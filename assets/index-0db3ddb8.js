import{_ as xs,d as p,e as ce,f as X,w as he,g as _t,h as Ot,n as qe,c,a as o,i as S,j,u as re,k as f,l as O,v as ws,t as v,m as Nt,p as po,F as pe,r as Se,q as b,s as Q,x as fo,y as go,T as _o,z as ee,A as fe,o as r,B as mo,C as Cs,D as Ss,E as $s}from"./index-8ddbc7ad.js";import x from"./vocabulary-9de5e70b.js";import{marked as Is}from"https://cdn.jsdelivr.net/npm/marked/lib/marked.esm.js";const h=Ye=>(Cs("data-v-33cb338c"),Ye=Ye(),Ss(),Ye),Ms={class:"app-root"},Ts={class:"tools-bar sticky-toolbar"},Es={class:"bar-inner"},As={class:"left-tools"},Ds={class:"mode-switch"},zs={key:0,class:"dot"},Ls={class:"toggle-label"},Ps=["title"],Os={class:"middle-tools"},Ns={key:0,class:"selectors"},Ws=["value"],Rs=["value"],Us={key:0,title:"å…¨ä¹¦æ€»è¯æ±‡é‡"},Bs={class:"s-learn",title:"å¤ä¹ é˜Ÿåˆ—ä¸­"},Gs={class:"s-done",title:"å·²æ–©æ€+å·²é€šå…³"},Vs={class:"s-new",title:"å‰©ä½™å•è¯"},Ks={class:"right-tools"},js=["value"],Hs={key:1,class:"pomo-time"},Js=["onClick"],Fs={class:"modal-box"},Xs={class:"modal-icon"},Zs={class:"modal-title"},qs={key:0,class:"modal-actions"},Ys={key:1,class:"modal-actions"},Qs={key:1,class:"header-table-row desktop-only"},en={class:"grid-layout"},tn=h(()=>o("div",{class:"col-idx text-center"},"#",-1)),on={class:"col-word header-word-col"},sn=["title"],nn={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ln=h(()=>o("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1)),an=h(()=>o("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1)),cn=[ln,an],rn={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},un=h(()=>o("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},null,-1)),dn=h(()=>o("circle",{cx:"12",cy:"10",r:"3"},null,-1)),vn=[un,dn],hn=h(()=>o("div",{class:"col-pos text-center"},"è¯æ€§",-1)),pn={class:"col-zh header-zh-col"},fn=["title"],gn={key:0,class:"col-ex"},_n={key:1,class:"col-note"},mn=h(()=>o("div",{class:"col-del text-center"},"åˆ ",-1)),yn={class:"content-container"},bn={key:0,class:"empty-tip"},kn=["onClick"],xn=h(()=>o("span",{style:{"font-weight":"800","margin-right":"4px"}},"P.",-1)),wn={key:1,class:"note-placeholder",style:{color:"#9ca3af"}},Cn={class:"group-actions"},Sn=["onClick"],$n=["onClick"],In=["onClick"],Mn={style:{"font-weight":"bold","margin-right":"10px"}},Tn=["onClick","title"],En=["fill"],An=h(()=>o("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},null,-1)),Dn=h(()=>o("circle",{cx:"12",cy:"10",r:"3"},null,-1)),zn=[An,Dn],Ln=h(()=>o("div",{style:{flex:"1"}},null,-1)),Pn=["id"],On={class:"col-idx text-center index-num desktop-only"},Nn={class:"col-word"},Wn={class:"word-wrapper"},Rn={key:0,class:"word-cell-container"},Un={class:"word-row-top"},Bn=["onClick"],Gn=["onClick"],Vn=["onClick"],Kn=["onClick"],jn=["onClick"],Hn=["onClick","title"],Jn={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Fn=h(()=>o("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},null,-1)),Xn=h(()=>o("circle",{cx:"12",cy:"10",r:"3"},null,-1)),Zn=[Fn,Xn],qn={key:1,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Yn=h(()=>o("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},null,-1)),Qn=h(()=>o("circle",{cx:"12",cy:"10",r:"3"},null,-1)),el=[Yn,Qn],tl={key:0,class:"source-container"},ol=["href","onClick"],sl=["href"],nl={key:1,class:"review-meta desktop-only"},ll={key:0,class:"tag-due"},al={key:1,class:"tag-wait"},il={key:1,class:"input-cell"},cl=["onClick"],rl={class:"input-col"},ul=["onChange","onInput","onFocus","onKeydown"],dl={key:0,class:"error-hint"},vl={key:1,class:"peek-hint"},hl=["onClick","title"],pl={class:"mobile-only mobile-pos"},fl=["onClick"],gl={class:"col-pos text-center italic desktop-only"},_l=["onClick"],ml={key:0,class:"mobile-only mobile-notation"},yl={key:0,class:"col-ex example-cell"},bl={class:"ex-content"},kl=["onClick"],xl={key:1,class:"col-note notation-cell desktop-only"},wl={class:"col-del text-center desktop-only"},Cl=["onClick","title"],Sl={key:1,class:"pagination-area"},$l=["disabled"],Il={class:"finish-control"},Ml={class:"page-info"},Tl=["disabled"],El=h(()=>o("div",{style:{height:"40px"}},null,-1)),Al=h(()=>o("span",{class:"pad-title"},":: æ‹–æ‹½ ::",-1)),Dl=h(()=>o("span",{class:"hint-text"},"â†˜ï¸å³ä¸‹è§’æ‹–åŠ¨è°ƒæ•´å¤§å°",-1)),zl={key:0,class:"animate-spin",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Ll=h(()=>o("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"},null,-1)),Pl=[Ll],Ol={key:1,xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 1024 1024",fill:"currentColor"},Nl=h(()=>o("path",{d:"M395.776 641.664a19.392 19.392 0 0 0-6.368-12.384l-36.672-32.416a190.496 190.496 0 0 1 87.328-70.88c47.52-19.2 99.776-18.72 146.944 1.28s83.776 57.28 103.008 104.8a31.936 31.936 0 0 0 41.632 17.696 31.936 31.936 0 0 0 17.696-41.632 254.208 254.208 0 0 0-137.312-139.776 254.56 254.56 0 0 0-195.936-1.728 253.984 253.984 0 0 0-111.552 87.616l-37.408-33.088a19.168 19.168 0 0 0-31.808 16.384l12.576 119.68a19.2 19.2 0 0 0 21.088 17.088l109.696-11.52a19.2 19.2 0 0 0 17.088-21.12zM757.92 729.088l-109.216 15.36a19.2 19.2 0 0 0-9.536 33.856l34.496 28.416a190.816 190.816 0 0 1-236.672 74.016 190.592 190.592 0 0 1-102.976-104.768 32 32 0 1 0-59.36 23.936 254.272 254.272 0 0 0 137.344 139.776 255.232 255.232 0 0 0 100 20.48 255.744 255.744 0 0 0 95.904-18.752 254.592 254.592 0 0 0 115.872-93.408l41.408 34.112a19.2 19.2 0 0 0 31.2-17.472l-16.736-119.168a19.264 19.264 0 0 0-21.728-16.384z"},null,-1)),Wl=h(()=>o("path",{d:"M808.192 262.592a320.16 320.16 0 0 0-592.352 0A238.592 238.592 0 0 0 32 496a240.32 240.32 0 0 0 130.976 213.888 32 32 0 1 0 29.12-57.024A176.192 176.192 0 0 1 96 496a175.04 175.04 0 0 1 148.48-173.888l19.04-2.976 6.24-18.24C305.248 197.472 402.592 128 512 128a256 256 0 0 1 242.208 172.896l6.272 18.24 19.04 2.976A175.04 175.04 0 0 1 928 496a176.128 176.128 0 0 1-96.128 156.896 32.064 32.064 0 0 0 29.12 57.024A240.416 240.416 0 0 0 992 496a238.592 238.592 0 0 0-183.808-233.408z"},null,-1)),Rl=[Nl,Wl],Ul={key:0,class:"cloud-sub-menu",style:{display:"flex","flex-direction":"column",gap:"10px","align-items":"center"}},Bl={class:"sync-status-panel"},Gl={class:"status-row",style:{color:"#6b7280"}},Vl=h(()=>o("span",null,"ğŸ’» æœ¬åœ°:",-1)),Kl=h(()=>o("span",null,"â˜ï¸ äº‘ç«¯:",-1)),jl={key:0},Hl={key:1},Jl={key:0,class:"update-badge"},Fl=["disabled"],Xl=h(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})],-1)),Zl=[Xl],ql=["disabled"],Yl=h(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM12 17l-5-5h3V8h4v4h3l-5 5z"})],-1)),Ql=[Yl],ea={class:"modal-box",style:{"max-width":"360px"}},ta=h(()=>o("h3",{class:"modal-title"},"âœï¸ æ·»åŠ æ–°è¯",-1)),oa={style:{margin:"20px 0"}},sa=["onKeydown"],na={class:"modal-actions"},la={class:"modal-box",style:{"max-width":"360px"}},aa=h(()=>o("h3",{class:"modal-title"},"ğŸ“– è¡¥å……é‡Šä¹‰",-1)),ia={style:{color:"#666","font-size":"14px","margin-bottom":"10px"}},ca={style:{margin:"15px 0"}},ra=["onKeydown"],ua={class:"modal-actions"},da={key:5,class:"modal-overlay",style:{background:"rgba(0,0,0,0.3)","z-index":"3000"}},va={class:"modal-box",style:{"max-width":"300px",padding:"30px 20px"}},ha=h(()=>o("div",{style:{"font-size":"40px","margin-bottom":"10px"}},"ğŸ‰",-1)),pa={style:{margin:"0",color:"#374151"}},fa={class:"modal-box",style:{"max-width":"360px","text-align":"left"}},ga=h(()=>o("h3",{class:"modal-title",style:{"text-align":"center"}},"ğŸ› ï¸ ä¿®æ”¹å•è¯",-1)),_a={style:{"margin-bottom":"15px"}},ma=h(()=>o("label",{style:{display:"block",color:"#666","font-size":"12px","margin-bottom":"5px"}},"è‹±æ–‡æ‹¼å†™",-1)),ya={style:{"margin-bottom":"20px"}},ba=h(()=>o("label",{style:{display:"block",color:"#666","font-size":"12px","margin-bottom":"5px"}},"ä¸­æ–‡é‡Šä¹‰",-1)),ka={class:"modal-actions"},xa={class:"modal-box stats-box"},wa={class:"stats-header"},Ca=h(()=>o("h3",null,"ğŸ“ˆ å­¦ä¹ æ•°æ®çœ‹æ¿",-1)),Sa={class:"stats-switcher"},$a={class:"stats-summary"},Ia={class:"summary-item"},Ma={class:"num"},Ta=h(()=>o("div",{class:"label"},"ä¸“æ³¨(åˆ†)",-1)),Ea={class:"summary-item"},Aa={class:"num",style:{color:"#10b981"}},Da=h(()=>o("div",{class:"label"},"ä»Šæ—¥å­¦ä¹ ",-1)),za={class:"summary-item"},La={class:"num",style:{color:"#3b82f6"}},Pa=h(()=>o("div",{class:"label"},"ä»Šæ—¥å¤ä¹ ",-1)),Oa={class:"summary-item"},Na={class:"num",style:{color:"#ef4444"}},Wa=h(()=>o("div",{class:"label"},"ä»Šæ—¥æ–©æ€",-1)),Ra={class:"chart-container"},Ua={class:"modal-box search-box-modal"},Ba={class:"search-header"},Ga=["onKeydown"],Va={class:"search-results-list"},Ka={key:0,class:"empty-tip-text"},ja={key:1,class:"empty-tip-text"},Ha=["onClick","onMouseenter"],Ja={class:"si-left"},Fa={class:"si-en"},Xa=["onClick"],Za={class:"si-zh"},qa={class:"si-right"},Ya={class:"si-source"},Qa={class:"modal-box",style:{"max-width":"600px","text-align":"left",height:"80vh",display:"flex","flex-direction":"column"}},ei=h(()=>o("h3",{class:"modal-title"},"ğŸ“ åˆ†ç»„è¾¨æç¬”è®°",-1)),ti={style:{"margin-bottom":"10px"}},oi=h(()=>o("label",{style:{"font-size":"12px",color:"#666","font-weight":"bold"}},"æ ‡é¢˜ (æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸Šæ–¹)",-1)),si={style:{flex:"1",display:"flex","flex-direction":"column","margin-bottom":"15px","min-height":"0"}},ni=h(()=>o("label",{style:{"font-size":"12px",color:"#666","font-weight":"bold","margin-bottom":"5px"}},"è¯¦ç»†å†…å®¹ (æ”¯æŒæ¢è¡Œ/ç®€å•Markdown)",-1)),li={class:"modal-actions"},ai={class:"modal-box read-card-modal"},ii={class:"read-header"},ci={class:"read-title"},ri={class:"read-actions"},ui=["innerHTML"],di={class:"modal-box read-card-modal",style:{height:"85vh",display:"flex","flex-direction":"column",padding:"0"}},vi={class:"read-header"},hi={class:"read-title"},pi={class:"read-actions"},fi={style:{flex:"1",display:"flex",overflow:"hidden"}},gi={class:"story-sidebar"},_i=h(()=>o("div",{class:"sidebar-header"},"æ–‡ç« åˆ—è¡¨",-1)),mi={class:"sidebar-list"},yi=["onClick"],bi=h(()=>o("span",{class:"item-icon"},"ğŸ“„",-1)),ki={class:"item-title"},xi={class:"story-content-area"},wi={key:0,class:"markdown-body story-reader"},Ci={class:"story-page-title"},Si=["innerHTML"],$i={key:1,class:"empty-story-tip"},Ii=h(()=>o("div",{style:{"font-size":"40px"}},"ğŸ“",-1)),Mi=h(()=>o("div",null,[j("æœ¬ç¯‡æ–‡ç« æš‚æ— å†…å®¹"),o("br"),j("ç‚¹å‡»å³ä¸Šè§’ "),o("b",null,'"âœ ç¼–è¾‘"'),j(" å¼€å§‹å†™ä½œ")],-1)),Ti=[Ii,Mi],Ei={key:1,class:"story-editor-layout"},Ai={style:{"margin-bottom":"10px"}},Di={style:{flex:"1",display:"flex",gap:"15px","min-height":"0"}},zi={style:{flex:"1",display:"flex","flex-direction":"column"}},Li=h(()=>o("span",null,"Markdown ç¼–è¾‘",-1)),Pi={class:"desktop-only preview-pane"},Oi=h(()=>o("div",{class:"editor-toolbar"},"å®æ—¶é¢„è§ˆ",-1)),Ni=["innerHTML"],Wi={key:0,class:"modal-actions",style:{padding:"10px 20px","border-top":"1px solid #eee",margin:"0"}},Ri={class:"modal-box",style:{"max-width":"400px","text-align":"left"}},Ui=h(()=>o("h3",{class:"modal-title"},"â˜ï¸ GitHub äº‘åŒæ­¥é…ç½®",-1)),Bi=h(()=>o("p",{style:{"font-size":"12px",color:"#666","margin-bottom":"15px","line-height":"1.5"}},[j(" åˆ©ç”¨ GitHub Gist å®ç°å…è´¹ç§æœ‰äº‘åŒæ­¥ã€‚"),o("br"),j(" æ•°æ®å­˜å‚¨åœ¨æ‚¨è‡ªå·±çš„ GitHub è´¦å·ä¸­ï¼Œå®‰å…¨å¯æ§ã€‚ ")],-1)),Gi={style:{"margin-bottom":"15px"}},Vi=h(()=>o("label",{style:{display:"block","font-size":"12px","font-weight":"bold","margin-bottom":"5px"}},"GitHub Token (å‹¾é€‰ gist æƒé™)",-1)),Ki={style:{"margin-bottom":"20px"}},ji=h(()=>o("label",{style:{display:"block","font-size":"12px","font-weight":"bold","margin-bottom":"5px"}},"Gist ID (æµè§ˆå™¨åœ°å€æ æœ€åä¸€æ®µ)",-1)),Hi={class:"modal-actions"},Ji=h(()=>o("div",{style:{"margin-top":"15px","font-size":"12px",color:"#999","text-align":"center"}}," é…ç½®ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚ ",-1)),Fi="/my-ielts/timeout.mp3",Xi="/my-ielts/do.mp3",Zi={__name:"index",setup(Ye){const yo=e=>{new Audio(e).play().catch(s=>console.log("äº¤äº’å—é™:",s))},Wt=["#ef4444","#3b82f6","#f59e0b","#8b5cf6","#10b981","#ec4899","#06b6d4","#f97316","#6366f1","#84cc16","#d946ef"],bo=["#ef4444","#f97316","#f59e0b","#10b981","#06b6d4","#3b82f6"],H=(e,t)=>{const s=p(t);return _t(()=>{try{const i=localStorage.getItem(e);i&&(s.value=JSON.parse(i))}catch{}}),he(s,i=>localStorage.setItem(e,JSON.stringify(i)),{deep:!0}),s},mt=x?Object.keys(x):[],$=H("my_ielts_chapter",mt[0]||""),m=H("my_ielts_review",[]),N=H("my_ielts_killed",[]),T=H("my_ielts_mastered",[]),le=H("my_ielts_completed_parts",{}),w=H("my_ielts_custom_dict",{}),ge=H("my_ielts_audio_peek_history",[]),J=H("my_ielts_group_notes",{}),A=p(!1),g=p(!1),D=p(0),$e=ce({}),Qe=[5,30,720,1440,2880,5760],_e=p([]),z=ce(new Set),ae=ce(new Set),ko=e=>{ae.has(e)?ae.delete(e):ae.add(e)},xo=e=>{z.has(e)?z.delete(e):z.add(e)},Rt=e=>{const t=Array.from(document.querySelectorAll(".dictation-input")),s=t.indexOf(e.target);e.shiftKey?s>0&&(t[s-1].focus(),setTimeout(()=>t[s-1].select(),10)):s>-1&&s<t.length-1&&t[s+1].focus()},We=H("my_ielts_page_stories",{}),et=p(!1),L=p([]),me=p(0),Z=p(!1),Ut=()=>`${$.value}_Part${D.value}`,wo=()=>{const e=Ut(),t=We.value[e];t?t.content&&!Array.isArray(t)?L.value=[{title:"æ–‡ç«  1",content:t.content}]:Array.isArray(t)?L.value=JSON.parse(JSON.stringify(t)):L.value=[{title:"æ–‡ç«  1",content:""}]:L.value=[{title:"æ–‡ç«  1",content:""}],me.value=0,Z.value=!L.value[0].content,et.value=!0},Bt=e=>{me.value=e,Z.value=!L.value[e].content},Co=()=>{const e=L.value.length;L.value.push({title:`æ–‡ç«  ${e+1}`,content:""}),Bt(e),Z.value=!0},So=()=>{if(L.value.length<=1){L.value[0].content="",L.value[0].title="æ–‡ç«  1",U("å·²æ¸…ç©ºå†…å®¹");return}confirm("ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ–‡ç« å—ï¼Ÿ")&&(L.value.splice(me.value,1),me.value>=L.value.length&&(me.value=L.value.length-1))},$o=()=>{const e=Ut();We.value={...We.value,[e]:L.value},Z.value=!1,U("æœ¬é¡µæ‰€æœ‰æ–‡ç« å·²ä¿å­˜ ğŸ’¾")},ue=X(()=>L.value[me.value]||{title:"",content:""}),Io=()=>{const e=[];if(de.value.forEach(s=>{s.list&&s.list.forEach(i=>e.push(i.en))}),e.length===0)return;const t=`Please write a short, interesting story (about 150-200 words) using the following vocabulary. Highlight the vocabulary words in bold within the story.

Words: ${e.join(", ")}`;if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{U("æç¤ºè¯å·²å¤åˆ¶ï¼å»é—® AI å§ ğŸ¤–")});else{const s=document.createElement("textarea");s.value=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),U("æç¤ºè¯å·²å¤åˆ¶ï¼å»é—® AI å§ ğŸ¤–")}},ye=p(!1),B=ce(new Set),Mo=()=>{ye.value=!ye.value,ye.value||B.clear()},To=e=>{B.has(e)?B.delete(e):B.add(e)};he([$,D,g,A],()=>{z.clear(),ae.clear(),B.clear()}),he([$,D,g,A],()=>{z.clear(),ae.clear()});const tt=X(()=>{if(de.value.length===0)return!1;const e=[];return de.value.forEach(t=>t.list.forEach(s=>e.push(s.en))),e.length>0&&e.every(t=>z.has(t))}),Gt=()=>{const e=[];de.value.forEach(s=>s.list.forEach(i=>e.push(i.en))),e.every(s=>z.has(s))?z.clear():e.forEach(s=>z.add(s))},Re=e=>e?Array.isArray(e)?Re(e[0]):String(e):"",ot=e=>{if(!e)return"";if(Array.isArray(e)){const s=[];return e[4]&&typeof e[4]=="string"&&e[4]!=="-"&&s.push(e[4]),e[5]&&typeof e[5]=="string"&&e[5]!=="-"&&s.push(e[5]),s.join("; ")}if(e.notation)return e.notation;if(e.phrase)return e.phrase;if(e.phrases)return e.phrases;if(e.collocation)return e.collocation;if(e.collocations)return e.collocations;if(e.extend)return e.extend;if(e.extension)return e.extension;if(e.note)return e.note;if(e.usage)return e.usage;if(e.æ‹“å±•)return e.æ‹“å±•;if(e.æ­é…)return e.æ­é…;if(e.çŸ­è¯­)return e.çŸ­è¯­;const t=Object.keys(e);for(const s of t){const i=s.toLowerCase();if((i.includes("not")||i.includes("phr")||i.includes("coll")||i.includes("ext"))&&typeof e[s]=="string"&&i!=="pronunciation"&&i!=="uk_audio"&&i!=="us_audio")return e[s]}return""},yt=e=>{if(w.value[e])return{en:e,zh:w.value[e].zh,pos:"è‡ªé€‰",example:"",notation:"æˆ‘çš„ç”Ÿè¯æœ¬",id:"â˜…",source:"ç”Ÿè¯æœ¬"};let t=0;for(const s in x){const i=x[s].words||x[s].list||[];let a=0,d=0;const n=35,u=45;for(let l=0;l<i.length;l++){const _=i[l];let C=0;for(const y of _)C++;const M=d+C;d>0&&(d>=n||M>u)&&(a++,d=0);for(const y of _){let k="",Y="",V="",ve="",gt="";Array.isArray(y)?(k=y[0],Y=y[1]||"",V=y[2]||"",ve=y[3]||"",gt=ot(y)):(k=y.word||y.en,Y=y.pos||"",V=y.meaning||y.trans||y.zh||"",ve=y.example||"",gt=ot(y));const ho=Re(k);if(t++,ho===e)return{en:ho,zh:V,pos:Y,example:ve,notation:gt,id:t,source:`${s} Part ${a+1}`}}d+=C}}return{en:e,zh:"æœªæ‰¾åˆ°é‡Šä¹‰",pos:"",example:"",notation:"",id:"-",source:"æœªçŸ¥"}},Eo=X(()=>{let e=0;for(const t in x)(x[t].words||x[t].list||[]).forEach(i=>e+=i.length);return e}),st=X(()=>{const e=Eo.value,t=m.value.length,s=new Set([...N.value,...T.value]).size,i=Math.max(0,e-t-s);return{total:e,learning:t,learned:s,unlearned:i}}),Ao=X(()=>{const e={};let t=0;for(const s of mt){e[s]=t;const i=x[s];(i.words||i.list||[]).forEach(d=>d.forEach(n=>{t++}))}return e}),Do=X(()=>{if(!$.value||!x[$.value])return[];const e=x[$.value].words||x[$.value].list||[];let t=[],s=Ao.value[$.value]||0;return e.forEach((i,a)=>{const d=Wt[a%Wt.length];let n=[];i.forEach(u=>{let l="",_="",C="",M="",y="";Array.isArray(u)?(l=u[0],_=u[1]||"",C=u[2]||"",M=u[3]||"",y=ot(u)):(l=u.word||u.en,_=u.pos||"",C=u.meaning||u.trans||u.zh||"",M=u.example||"",y=ot(u));const k=Re(l);s++;const Y=T.value.includes(k),V=N.value.includes(k);n.push({_id:s,en:k,zh:C,pos:_,example:M,notation:y,_color:d,_groupId:a,_isMastered:Y,_isKilled:V})}),n.length>0&&t.push(n)}),t}),Ie=X(()=>{if(g.value)return[];const e=Do.value,t=35,s=45;let i=[],a=[],d=0;return e.forEach(n=>{const u=d+n.length;d>0&&(d>=t||u>s)&&(i.push(a),a=[],d=0),a.push(...n),d+=n.length}),a.length>0&&i.push(a),i}),zo=X(()=>g.value?["å…¨éƒ¨é”™é¢˜"]:Ie.value.map((e,t)=>{var n;if(!e||e.length===0)return`Part ${t+1}`;const s=e[0]._id,i=e[e.length-1]._id,a=e.length,d=(n=le.value[$.value])==null?void 0:n.includes(t);return`Part ${t+1} (${s}-${i}) ${a}ä¸ª ${d?"âœ”":""}`})),Lo=e=>{const t=x[e];if(!t)return 0;const s=t.words||t.list||[],i=35,a=45;let d=0,n=0;return s.forEach(u=>{const l=u.length,_=n+l;n>0&&(n>=i||_>a)&&(d++,n=0),n+=l}),n>0&&d++,d},Po=X(()=>mt.map(e=>{const t=Lo(e),i=(le.value[e]||[]).length,a=t>0&&i>=t;return{value:e,label:e,isDone:a}})),de=X(()=>{if(g.value){const a=_e.value.length>0?_e.value:m.value,d={5:[],4:[],3:[],2:[],1:[],0:[]};a.forEach((l,_)=>{const C=l.stage>=6?5:l.stage||0;d[C]&&d[C].push({...yt(l.w),_review:l,_id:_+1})});const n=[],u=["é˜¶æ®µ 1 - æ–°æ‰‹/é‡æ¥ (5åˆ†é’Ÿ)","é˜¶æ®µ 2 - å…¥é—¨ (30åˆ†é’Ÿ)","é˜¶æ®µ 3 - ç†Ÿæ‚‰ (12å°æ—¶)","é˜¶æ®µ 4 - æŒæ¡ (1å¤©)","é˜¶æ®µ 5 - ç‰¢å›º (2å¤©)","é˜¶æ®µ 6 - å¤§å¸ˆ (4å¤©+)"];for(let l=5;l>=0;l--)d[l].length>0&&n.push({color:bo[l],title:`ğŸ”¥ ${u[l]} [${d[l].length}ä¸ª]`,list:d[l]});return n}const e=Ie.value[D.value]||[];if(e.length===0)return[];let t=[],s=null,i=-999;return e.forEach(a=>{a._groupId!==i&&(s={color:a._color,list:[],groupId:a._groupId},t.push(s),i=a._groupId),s.list.push(a)}),t});function bt(){if(!g.value)return;const e=m.value.filter(t=>t.time<=Date.now());_e.value=JSON.parse(JSON.stringify(e));for(const t in $e)delete $e[t];z.clear(),ae.clear(),B.clear(),qe(()=>{document.querySelectorAll(".dictation-input").forEach(s=>{s.value="",s.classList.remove("correct","error")})})}he(g,e=>{if(e){const t=m.value.filter(s=>s.time<=Date.now());_e.value=JSON.parse(JSON.stringify(t))}else _e.value=[]},{immediate:!0}),he(m,e=>{if(g.value&&_e.value.length===0){const t=e.filter(s=>s.time<=Date.now());_e.value=JSON.parse(JSON.stringify(t))}});let Ue=!1;he($,()=>{Ue||(D.value=0,g.value=!1)});const F=p(null),G=p(null),Be=e=>{const t="Mywonn",s="my-ielts",i="master";if(z.has(e)&&!ge.value.includes(e)&&ge.value.push(e),G.value===e){F.value&&(F.value.pause(),F.value=null),window.speechSynthesis.cancel(),G.value=null;return}F.value&&(F.value.pause(),F.value=null),window.speechSynthesis.cancel();const a=()=>{G.value=e;const l=new SpeechSynthesisUtterance(e);l.lang="en-US",l.volume=1,l.rate=.85;const _=window.speechSynthesis.getVoices(),C=_.find(M=>M.name.includes("Google US"))||_.find(M=>M.lang.includes("en-US"));C&&(l.voice=C),l.onend=()=>{G.value=null},l.onerror=M=>{console.error("TTS Error:",M),G.value=null},window.speechSynthesis.speak(l)};if(w.value[e]){G.value=e,a();return}let d=$.value;if(g.value&&x){for(const l in x)if((x[l].words||x[l].list||[]).some(M=>M.some(y=>{const k=Array.isArray(y)?y[0]:y.word||y.en;return Re(k)===e}))){d=l;break}}const n=`https://cdn.jsdelivr.net/gh/${t}/${s}@${i}/public/vocabulary/audio/${d}/${e}.mp3`;console.log("CDNæ’­æ”¾:",n);const u=new Audio(n);F.value=u,G.value=e,u.onerror=()=>{console.warn("CDN èµ„æºæœªæ‰¾åˆ°æˆ–åŠ è½½å¤±è´¥ï¼Œè‡ªåŠ¨é™çº§ä¸º TTS"),F.value=null,a()},u.onended=()=>{G.value=null,F.value=null},u.play().catch(l=>{console.log("æ’­æ”¾è¢«æ‹¦æˆªæˆ–å¤±è´¥ï¼Œè½¬TTS",l),a()})},Oo=e=>{G.value!==e&&(z.has(e)||Be(e))},No=e=>{if(!e)return console.warn("æ²¡æœ‰æ–‡æœ¬å¯è¯»");F.value&&(F.value.pause(),F.value=null),G.value=null,window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(e);t.lang="en-US",t.rate=.9,t.volume=1;const s=window.speechSynthesis.getVoices(),i=s.find(a=>a.name.includes("Google US"))||s.find(a=>a.lang.includes("en-US"));i&&(t.voice=i),window._debug_utterance=t,t.onerror=a=>{console.error("æœ—è¯»æŠ¥é”™:",a),a.error!=="canceled"&&a.error!=="interrupted"&&alert("è¯­éŸ³æ’­æ”¾å‡ºé”™: "+a.error)},setTimeout(()=>{window.speechSynthesis.speak(t),console.log("æ­£åœ¨æ’­æ”¾:",e,"ä½¿ç”¨è¯­éŸ³:",i?i.name:"ç³»ç»Ÿé»˜è®¤")},10)};function Wo(e,t){let s=t.target.value.trim().toLowerCase(),i=e.en.toLowerCase();const a=n=>n.replace(/[\u2018\u2019`]/g,"'").replace(/\s+/g," "),d=a(s)===a(i);if($e[e.en]=d?"correct":"error",d){if(z.has(e.en)||z.add(e.en),!g.value){Ae("learn",1),T.value.includes(e.en)||(T.value.push(e.en),Ae("kill",1));const u=m.value.findIndex(l=>l.w===e.en);u>-1&&m.value.splice(u,1);return}const n=m.value.findIndex(u=>u.w===e.en);if(n>-1){Ae("review",1);const u=m.value[n];u.stage+=1,u.stage>=Qe.length?(m.value.splice(n,1),N.value.includes(e.en)||(N.value.push(e.en),Ae("kill",1))):(u.time=Date.now()+Qe[u.stage]*6e4,m.value=[...m.value])}}else if(z.has(e.en)||z.add(e.en),!g.value)T.value.includes(e.en)&&(T.value=T.value.filter(u=>u!==e.en)),m.value.find(u=>u.w===e.en)||m.value.push({w:e.en,stage:0,time:Date.now()+Qe[0]*6e4});else{const n=m.value.findIndex(u=>u.w===e.en);n>-1&&(m.value[n].stage=0,m.value[n].time=Date.now()+Qe[0]*6e4)}}const Vt=e=>{if(N.value.includes(e)){if(!confirm(`ç¡®å®šè¦æ’¤é”€æ–©æ€ï¼Œæ¢å¤ "${e}" å—ï¼Ÿ`))return;N.value=N.value.filter(s=>s!==e),U(`"${e}" å·²æ¢å¤ ğŸº`);return}if(!confirm(`ç¡®å®šè¦æ–©æ€ "${e}" å—ï¼Ÿ
(å®ƒå°†å˜ä¸ºç´«è‰²å½’æ¡£çŠ¶æ€)`))return;N.value.push(e),Ae("kill",1);const t=m.value.findIndex(s=>s.w===e);t>-1&&m.value.splice(t,1),T.value.includes(e)&&(T.value=T.value.filter(s=>s!==e))};function Ro(){const e={k:N.value,r:m.value,c:le.value,m:T.value,d:w.value,s:W.value,n:J.value},t=new Blob([JSON.stringify(e)],{type:"application/json"}),s=URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=`ielts_data_${new Date().toISOString().slice(0,10)}.json`,i.click()}const Uo=e=>{if(navigator.clipboard)navigator.clipboard.writeText(e).then(()=>{});else{const t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}};function Bo(){document.getElementById("fileInput").click()}function Go(e){const t=e.target.files[0];if(!t)return;const s=new FileReader;s.onload=i=>{try{const a=JSON.parse(i.target.result);(a.k||a.r||a.d)&&(a.k&&(N.value=a.k),a.r&&(m.value=a.r),a.c&&(le.value=a.c),a.m&&(T.value=a.m),a.d&&(w.value=a.d),a.s&&(W.value=a.s),a.n&&(J.value=a.n),alert("åŒæ­¥æˆåŠŸ"),location.reload())}catch{alert("æ–‡ä»¶æ ¼å¼é”™è¯¯")}},s.readAsText(t),e.target.value=""}const be=p(!1),nt=p(""),Me=p(!1),lt=p(""),at=p(""),kt=p(!1),Kt=p("");p(!1);const Te=p(!1),xt=p(null);let it=null;const Ee=p("week"),W=H("my_ielts_stats_history",{}),Ge=()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},Ae=(e,t=1)=>{const s=Ge();W.value[s]||(W.value[s]={duration:0,review:0,kill:0,add:0}),typeof W.value[s][e]>"u"&&(W.value[s][e]=0),W.value[s][e]+=t,W.value={...W.value}},jt=async()=>{if(xt.value){it&&(it.destroy(),it=null);try{const{Chart:e,registerables:t}=await $s(()=>import("https://cdn.jsdelivr.net/npm/chart.js/+esm"),[],import.meta.url);e.register(...t);const s=document.body.classList.contains("dark")||document.documentElement.classList.contains("dark"),i=s?"#cbd5e1":"#666",a=s?"#334155":"#e5e7eb",d=Ee.value==="week"?7:30,n=[],u=[],l=[],_=[],C=[],M=new Date;for(let y=d-1;y>=0;y--){const k=new Date(M.getTime()-y*24*60*60*1e3),Y=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-${String(k.getDate()).padStart(2,"0")}`;n.push(String(k.getDate())+"æ—¥");const V=W.value[Y]||{duration:0,review:0,learn:0,kill:0};u.push(Math.round(V.duration/60)),l.push(V.review||0),_.push(V.learn||0),C.push(V.kill||0)}it=new e(xt.value,{type:"bar",data:{labels:n,datasets:[{label:"æ–°å­¦ (ä¸ª)",data:_,backgroundColor:"rgba(16, 185, 129, 0.6)",borderColor:"#10b981",borderWidth:1,yAxisID:"y",order:4,stack:"combined"},{label:"å¤ä¹  (ä¸ª)",data:l,backgroundColor:"rgba(59, 130, 246, 0.6)",borderColor:"#3b82f6",borderWidth:1,yAxisID:"y",order:3,stack:"combined"},{label:"æ–©æ€ (ä¸ª)",data:C,backgroundColor:"rgba(239, 68, 68, 0.6)",borderColor:"#ef4444",borderWidth:1,yAxisID:"y",order:2,stack:"combined"},{type:"line",label:"ä¸“æ³¨ (åˆ†)",data:u,borderColor:"#f59e0b",backgroundColor:"#f59e0b",borderWidth:2,pointRadius:3,tension:.3,yAxisID:"y1",order:1}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:i}}},scales:{x:{ticks:{color:i},grid:{color:a}},y:{type:"linear",display:!0,position:"left",stacked:!0,title:{display:!0,text:"å•è¯é‡",color:i},ticks:{color:i},grid:{color:a}},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},title:{display:!0,text:"åˆ†é’Ÿ",color:i},ticks:{color:i}}}}})}catch(e){console.error("å›¾è¡¨åŠ è½½å¤±è´¥:",e)}}};he(Te,e=>{e&&setTimeout(jt,100)}),he(Ee,()=>{Te.value&&jt()});function Vo(){nt.value="",be.value=!0,setTimeout(()=>{var e;return(e=document.getElementById("custom-word-input"))==null?void 0:e.focus()},100)}function Ht(){const e=nt.value;if(!e||!e.trim()){be.value=!1;return}const t=e.trim();be.value=!1,setTimeout(()=>{yt(t).zh==="æœªæ‰¾åˆ°é‡Šä¹‰"?(at.value=t,lt.value="",Me.value=!0,setTimeout(()=>{var i;return(i=document.getElementById("custom-meaning-input"))==null?void 0:i.focus()},100)):Ft(t)},200)}function Jt(){const e=lt.value.trim();e&&(Me.value=!1,w.value={...w.value,[at.value]:{zh:e}},Ft(at.value))}function Ft(e){be.value=!1,Me.value=!1;const t=m.value.findIndex(s=>s.w===e);t>-1?(m.value[t].stage=0,m.value[t].time=Date.now(),U(`"${e}" å·²é‡ç½®å¤ä¹ è¿›åº¦ï¼ğŸ”„`)):(m.value.push({w:e,stage:0,time:Date.now()}),U(`"${e}" å·²åŠ å…¥å¤ä¹ ï¼âœ…`)),g.value&&bt()}function U(e){Kt.value=e,kt.value=!0,setTimeout(()=>{kt.value=!1},1500)}const Ve=p(!1),te=ce({oldWord:"",newWord:"",newZh:""}),Ko=e=>{te.oldWord=e.en,te.newWord=e.en,te.newZh=e.zh,Ve.value=!0},jo=()=>{const e=te.oldWord,t=te.newWord.trim(),s=te.newZh.trim();if(!t)return alert("å•è¯ä¸èƒ½ä¸ºç©º");if(e===t)w.value[e]?w.value[e].zh=s:w.value={...w.value,[e]:{zh:s}},U("é‡Šä¹‰å·²æ›´æ–°");else{if(w.value[e]){const a={...w.value};delete a[e],a[t]={zh:s},w.value=a}else w.value={...w.value,[t]:{zh:s}};const i=m.value.findIndex(a=>a.w===e);i>-1&&(m.value[i].w=t),N.value.includes(e)&&(N.value=N.value.filter(a=>a!==e),N.value.push(t)),T.value.includes(e)&&(T.value=T.value.filter(a=>a!==e),T.value.push(t)),U(`å·²ä¿®æ­£: ${e} -> ${t}`)}g.value&&bt(),Ve.value=!1},ke=p(!1),ct=p(window.innerWidth-320-5),wt=p(window.innerHeight*.26),oe=p(null);let I=null,Ct=!1,St=!1,Xt=0,Zt=0,De=null;const qt=e=>{const t=oe.value;if(!t)return{x:0,y:0};const s=t.getBoundingClientRect();return{x:e.clientX-s.left,y:e.clientY-s.top}},$t=()=>{if(!oe.value)return;const e=oe.value,t=e.getBoundingClientRect(),s=Math.ceil(t.width),i=Math.ceil(t.height);s<1||i<1||(e.width!==s||e.height!==i?(e.width=s,e.height=i,I=e.getContext("2d"),I&&(I.strokeStyle="#ffffff",I.lineWidth=3,I.lineCap="round",I.lineJoin="round")):I||(I=e.getContext("2d")))},Ho=e=>{if(xe.value||(e.cancelable&&e.preventDefault(),!oe.value)||(I||$t(),!I))return;if(Ct=!0,e.target.setPointerCapture&&e.pointerId)try{e.target.setPointerCapture(e.pointerId)}catch{}I.strokeStyle="#ffffff",I.lineWidth=3,I.beginPath();const{x:s,y:i}=qt(e);I.moveTo(s,i)},Jo=e=>{if(!Ct||!I)return;e.cancelable&&e.preventDefault();const{x:t,y:s}=qt(e);I.lineTo(t,s),I.stroke()},Yt=e=>{if(Ct=!1,e&&e.target.releasePointerCapture&&e.pointerId)try{e.target.releasePointerCapture(e.pointerId)}catch{}},It=()=>{!oe.value||!I||I.clearRect(0,0,oe.value.width,oe.value.height)},Fo=e=>{e.target.tagName!=="BUTTON"&&(St=!0,Xt=e.clientX-ct.value,Zt=e.clientY-wt.value,window.addEventListener("mousemove",Qt),window.addEventListener("mouseup",eo))},Qt=e=>{St&&(ct.value=e.clientX-Xt,wt.value=e.clientY-Zt)},eo=()=>{St=!1,window.removeEventListener("mousemove",Qt),window.removeEventListener("mouseup",eo)},to=()=>{ke.value=!ke.value,ke.value?(qe(()=>{$t(),oe.value&&!De&&(De=new ResizeObserver(()=>{$t()}),De.observe(oe.value))}),window.addEventListener("keydown",oo)):(De&&(De.disconnect(),De=null),window.removeEventListener("keydown",oo))},oo=e=>{ke.value&&e.code==="Space"&&(e.preventDefault(),It())};function Xo(){if(m.value.length===0){alert("å½“å‰æ²¡æœ‰é”™é¢˜è®°å½•");return}let e=`My IELTS Mistakes

`;[...m.value].sort((d,n)=>d.time-n.time).forEach((d,n)=>{const u=yt(d.w);e+=`${n+1}. ${u.en} ${u.pos}
   [ä¹‰] ${u.zh}
`,u.example&&(e+=`   [ä¾‹] ${u.example}
`),u.notation&&(e+=`   [æ³¨] ${u.notation}
`),e+=`
`});const s=new Blob([e],{type:"text/plain;charset=utf-8"}),i=URL.createObjectURL(s),a=document.createElement("a");a.href=i,a.download="mistakes.txt",a.click(),URL.revokeObjectURL(i)}const so=X(()=>(le.value[$.value]||[]).includes(D.value)),Zo=()=>{const e=$.value,t=D.value,s={...le.value};s[e]||(s[e]=[]),s[e].includes(t)?s[e]=s[e].filter(i=>i!==t):s[e].push(t),le.value=s},no=e=>{const t=D.value+e;t>=0&&t<Ie.value.length&&(D.value=t,window.scrollTo({top:0,behavior:"smooth"}))},qo=[.0834,10,15,25,30,45,60],rt=H("my_ielts_focus_dur",30),ze=()=>Math.round(rt.value*60),xe=p(!1),Mt=p(!1),P=p(ze()),se=p("idle"),R=p(!1);let K=null;const lo=e=>{const t=Math.floor(e/60),s=e%60;return`${t<10?"0"+t:t}:${s<10?"0"+s:s}`},Ke=()=>{localStorage.setItem("my_ielts_pomo",JSON.stringify({seconds:P.value,isBreak:R.value,state:se.value,timestamp:Date.now()}))},Yo=()=>{K&&clearInterval(K),K=null,se.value="paused",Ke()},Le=e=>{R.value=!0,P.value=Math.round(e*60),xe.value=!1,ut()},Qo=()=>{R.value=!1,P.value=ze(),xe.value=!1,ut()},es=()=>{se.value==="idle"&&!R.value&&(P.value=ze())},ts=()=>{xe.value=!1,Ke()},ut=()=>{se.value!=="running"&&(K&&clearInterval(K),P.value<=0&&(P.value=R.value?5*60:ze()),se.value="running",Ke(),K=setInterval(()=>{if(P.value>0){P.value--;const e=R.value?"â˜•":"ğŸ…",t=R.value?"ä¼‘æ¯":"ä¸“æ³¨";document.title=`${lo(P.value)} ${e} ${t}`,R.value||Ae("duration",1),Ke()}else{Tt(!1);const e=R.value;Mt.value=e,yo(e?Xi:Fi),xe.value=!0,document.title="ğŸ”” æ—¶é—´åˆ°ï¼",R.value=!e,P.value=R.value?5*60:ze(),Ke()}},1e3))},Tt=(e=!0)=>{K&&(clearInterval(K),K=null),se.value="idle",localStorage.removeItem("my_ielts_pomo"),e&&(P.value=R.value?5*60:ze(),document.title="MyIELTS")},ao=p(!1),io=()=>{ao.value=window.scrollY>300},os=()=>{window.scrollTo({top:0,behavior:"smooth"})};_t(()=>{window.addEventListener("resize",Et),window.addEventListener("scroll",io)}),Ot(()=>{K&&clearInterval(K),Ce&&clearTimeout(Ce),window.removeEventListener("resize",Et),window.removeEventListener("scroll",io)}),Ot(()=>{K&&clearInterval(K)}),_t(()=>{const e=localStorage.getItem("my_ielts_pomo");if(e)try{const d=JSON.parse(e);if(R.value=d.isBreak,d.state==="paused")P.value=d.seconds,se.value="paused";else if(d.state==="running"){const n=Date.now(),u=Math.floor((n-d.timestamp)/1e3),l=d.seconds-u;l>0?(P.value=l,ut()):(P.value=0,Tt(!1))}}catch(d){console.error("ç•ªèŒ„é’Ÿæ¢å¤å¤±è´¥",d)}window.speechSynthesis.getVoices();const t=new URLSearchParams(window.location.search),s=t.get("chap"),i=t.get("part"),a=t.get("anchor");s&&i&&(Ue=!0,g.value=!1,$.value=decodeURIComponent(s),D.value=parseInt(i),qe(()=>{Ue=!1}),setTimeout(()=>{let d=null;if(a){const u="word-row-"+decodeURIComponent(a).replace(/\s+/g,"_");d=document.getElementById(u)}d||(d=document.querySelector(".row-item")),d&&(d.scrollIntoView({behavior:"smooth",block:"center"}),d.classList.add("highlight-flash"),setTimeout(()=>d.classList.remove("highlight-flash"),2500))},600))}),document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="visible"&&se.value==="running"){const e=localStorage.getItem("my_ielts_pomo");if(e)try{const t=JSON.parse(e),s=Date.now(),i=Math.floor((s-t.timestamp)/1e3);if(i>1){console.log(`åå°è¿è¡Œäº† ${i} ç§’ï¼Œæ­£åœ¨æ ¡å‡†...`);const a=t.seconds-i;a>0?P.value=a:P.value=0}}catch(t){console.error("æ ¡å‡†æ—¶é—´å¤±è´¥",t)}}});const je=p(!1),Pe=p(""),q=p([]),ss=()=>{Pe.value="",q.value=[],je.value=!0,setTimeout(()=>{var e;return(e=document.getElementById("global-search-input"))==null?void 0:e.focus()},100)},ie=p(-1),co=e=>{if(q.value.length===0)return;const t=q.value.length;ie.value===-1?ie.value=e>0?0:t-1:ie.value=(ie.value+e+t)%t,qe(()=>{const s=document.querySelector(".search-item.selected");s&&s.scrollIntoView({block:"nearest",behavior:"smooth"})})},ns=()=>{ie.value=-1;const e=Pe.value.trim().toLowerCase();if(!e){q.value=[];return}const t=[],s=new Set;for(const i in w.value)i.toLowerCase().includes(e)&&(t.push({en:i,zh:w.value[i].zh,source:"æˆ‘çš„ç”Ÿè¯æœ¬",isCustom:!0}),s.add(i));if(x)for(const i in x){const a=x[i].words||x[i].list||[];let d=0,n=0;const u=35,l=45;for(let _=0;_<a.length;_++){const C=a[_];let M=0;for(const k of C)M++;const y=n+M;n>0&&(n>=u||y>l)&&(d++,n=0);for(const k of C){let Y="",V="";Array.isArray(k)?(Y=k[0],V=k[2]||""):(Y=k.word||k.en,V=k.meaning||k.trans||k.zh||"");const ve=Re(Y);ve.toLowerCase().includes(e)&&!s.has(ve)&&(t.push({en:ve,zh:V,source:`${i} Â· Part ${d+1}`,chapter:i,partIdx:d,isCustom:!1}),s.add(ve))}n+=M}if(t.length>100)break}t.sort((i,a)=>{const d=i.en.toLowerCase(),n=a.en.toLowerCase();if(d===e&&n!==e)return-1;if(n===e&&d!==e)return 1;const u=d.startsWith(e),l=n.startsWith(e);return u&&!l?-1:l&&!u?1:d.length-n.length}),q.value=t.slice(0,50)},ls=()=>{const e=Pe.value.trim().toLowerCase();if(!e||q.value.length===0)return;if(ie.value!==-1){const s=q.value[ie.value];if(s){He(s);return}}const t=q.value.find(s=>s.en.toLowerCase()===e);He(t||q.value[0])},as=e=>{if(!e.source||e.source==="ç”Ÿè¯æœ¬"||e.source==="æœªçŸ¥"){U("è¯¥è¯å±äºè‡ªå®šä¹‰ç”Ÿè¯ï¼Œæ— å›ºå®šç« èŠ‚ä½ç½®");return}const t=" Part ",s=e.source.lastIndexOf(t);if(s===-1){console.warn("æ— æ³•è§£æå‡ºå¤„æ ¼å¼:",e.source);return}const i=e.source.substring(0,s),a=e.source.substring(s+t.length),d=parseInt(a)-1,n={en:e.en,chapter:i,partIdx:d,isCustom:!1};He(n)},He=e=>{e.isCustom||e.partIdx===void 0||(je.value=!1,g.value=!1,Ue=!0,$.value=e.chapter,D.value=e.partIdx,qe(()=>{Ue=!1}),setTimeout(()=>{const t="word-row-"+e.en.replace(/\s+/g,"_"),s=document.getElementById(t);s?(s.scrollIntoView({behavior:"smooth",block:"center"}),s.classList.add("highlight-flash"),setTimeout(()=>s.classList.remove("highlight-flash"),2e3)):console.warn("æœªæ‰¾åˆ°å…ƒç´ :",t)},400))},ro=e=>{const t=typeof e=="string"?e:e.source,s=typeof e=="string"?"":e.en;if(!t||t==="ç”Ÿè¯æœ¬"||t==="æœªçŸ¥")return"#";const i=" Part ",a=t.lastIndexOf(i);if(a===-1)return"#";const d=t.substring(0,a),n=t.substring(a+i.length),u=parseInt(n)-1;let l=`?chap=${encodeURIComponent(d)}&part=${u}`;s&&(l+=`&anchor=${encodeURIComponent(s)}`);const _=window.location.hash;return`${window.location.pathname}${l}${_}`},dt=ce({}),is=e=>{dt[e]=!dt[e]},Je=e=>!e||!e.list||e.list.length===0?!1:e.list.every(t=>B.has(t.en)),cs=e=>{const t=Je(e);e.list.forEach(s=>{t?B.delete(s.en):B.add(s.en)})},rs=()=>{const e=[];if(de.value.forEach(s=>{s.list&&s.list.forEach(i=>e.push(i.en))}),e.length===0)return U("å½“å‰æ²¡æœ‰å•è¯å¯å¤åˆ¶");const t=e.join(`
`);if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{U(`å·²å¤åˆ¶ ${e.length} ä¸ªå•è¯! ğŸ“‹`)});else{const s=document.createElement("textarea");s.value=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),U(`å·²å¤åˆ¶ ${e.length} ä¸ªå•è¯! ğŸ“‹`)}},us=e=>{if(!e||!e.list||e.list.length===0)return;const t=e.list.map(s=>s.en).join(`
`);if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{U(`å·²å¤åˆ¶è¯¥ç»„ ${e.list.length} ä¸ªå•è¯! ğŸ“‹`)});else{const s=document.createElement("textarea");s.value=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),U(`å·²å¤åˆ¶è¯¥ç»„ ${e.list.length} ä¸ªå•è¯! ğŸ“‹`)}},uo=p(window.innerWidth),Et=()=>uo.value=window.innerWidth;_t(()=>window.addEventListener("resize",Et));const ds=X(()=>ke.value?ct.value>uo.value/2-100:!1),Fe=p(!1),At=p(""),ne=ce({title:"",content:""}),vt=e=>`${$.value}_${e}`,Dt=e=>{const t=vt(e);At.value=t;const s=J.value[t]||{title:"",content:""};ne.title=s.title,ne.content=s.content,Fe.value=!0},Xe=p(!1),Oe=ce({title:"",content:"",groupId:-1}),zt=e=>{if(!e)return"";try{return Is.parse(e)}catch{return e}},vs=e=>{const t=vt(e),s=J.value[t];if(!s||!s.title&&!s.content){Dt(e);return}Oe.title=s.title||"è¯ä¹‰è¾¨æ",Oe.content=s.content,Oe.groupId=e,Xe.value=!0},hs=()=>{Xe.value=!1,Dt(Oe.groupId)},ps=()=>{if(!ne.title.trim()&&!ne.content.trim()){const e={...J.value};delete e[At.value],J.value=e}else J.value={...J.value,[At.value]:{title:ne.title.trim(),content:ne.content}};Fe.value=!1},ht=e=>{const t=vt(e),s=J.value[t];return s&&(s.title&&s.title.trim()||s.content&&s.content.trim())},fs=e=>{const t=vt(e),s=J.value[t];return s?s.title&&s.title.trim()?s.title.trim():s.content&&s.content.trim()?"ğŸ“ è¯ä¹‰è¾¨æ":"":""},gs=e=>{confirm(`ç¡®è®¤ç§»é™¤ "${e}" çš„å¬è§‰ä¾èµ–æ ‡è®°å—ï¼Ÿ`)&&(ge.value=ge.value.filter(t=>t!==e))},Ze=p(!1),E=ce({token:localStorage.getItem("my_ielts_gh_token")||"",gistId:localStorage.getItem("my_ielts_gh_gist_id")||""}),we=p(!1),Ne=p(!1),pt=H("my_ielts_last_sync_time",""),vo=()=>{const e=new Date,t=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0");pt.value=`${t}/${s} ${i}:${a}`},Lt=p(""),ft=p(!1),Pt=p(!1),_s=async()=>{if(!(!E.token||!E.gistId)){Pt.value=!0;try{const e=await fetch(`https://api.github.com/gists/${E.gistId}`,{headers:{Authorization:`token ${E.token}`}});if(e.ok){const t=await e.json(),s=new Date(t.updated_at),i=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0"),d=String(s.getHours()).padStart(2,"0"),n=String(s.getMinutes()).padStart(2,"0");Lt.value=`${i}/${a} ${d}:${n}`,pt.value&&Lt.value>pt.value?ft.value=!0:ft.value=!1}}catch(e){console.error("æ£€æµ‹äº‘ç«¯å¤±è´¥",e)}finally{Pt.value=!1}}};let Ce=null;const ms=()=>{Ce&&clearTimeout(Ce),Ne.value=!Ne.value,Ne.value&&(_s(),Ce=setTimeout(()=>{Ne.value=!1},5e3))};Ot(()=>{Ce&&clearTimeout(Ce)});const ys=()=>{localStorage.setItem("my_ielts_gh_token",E.token.trim()),localStorage.setItem("my_ielts_gh_gist_id",E.gistId.trim()),alert("é…ç½®å·²ä¿å­˜ï¼âœ…"),Ze.value=!1},bs=async()=>{if(!E.token||!E.gistId)return alert("è¯·å…ˆç‚¹å‡» âš™ï¸ é…ç½® GitHub Token å’Œ Gist ID");if(confirm("ç¡®å®šè¦è¦†ç›–äº‘ç«¯æ•°æ®å—ï¼Ÿ(äº‘ç«¯æ—§æ•°æ®å°†ä¸¢å¤±)")){we.value=!0;try{const e={k:N.value,r:m.value,c:le.value,m:T.value,d:w.value,s:W.value,n:J.value,st:We.value,ap:ge.value},t=JSON.stringify(e),s=`https://api.github.com/gists/${E.gistId}`,i=await fetch(s,{method:"PATCH",headers:{Authorization:`token ${E.token}`,"Content-Type":"application/json"},body:JSON.stringify({files:{"data.json":{content:t}}})});if(i.ok)vo(),alert("â˜ï¸ ä¸Šä¼ æˆåŠŸï¼æ•°æ®å·²å®‰å…¨ä¿å­˜åˆ° Gistã€‚");else throw new Error(i.statusText)}catch(e){alert("ä¸Šä¼ å¤±è´¥ï¼Œè¯·æ£€æŸ¥ Token æˆ–ç½‘ç»œ: "+e.message),console.error(e)}finally{we.value=!1}}},ks=async()=>{if(!E.token||!E.gistId)return alert("è¯·å…ˆç‚¹å‡» âš™ï¸ é…ç½® GitHub Token å’Œ Gist ID");if(confirm("âš ï¸ è­¦å‘Šï¼šè¿™å°†ç”¨äº‘ç«¯æ•°æ®è¦†ç›–å½“å‰æœ¬åœ°è¿›åº¦ï¼ç¡®å®šå—ï¼Ÿ")){we.value=!0;try{const e=`https://api.github.com/gists/${E.gistId}`,t=await fetch(e,{method:"GET",headers:{Authorization:`token ${E.token}`}});if(!t.ok)throw new Error(t.statusText);const i=(await t.json()).files["data.json"].content,a=JSON.parse(i);a.k&&(N.value=a.k),a.r&&(m.value=a.r),a.c&&(le.value=a.c),a.m&&(T.value=a.m),a.d&&(w.value=a.d),a.s&&(W.value=a.s),a.n&&(J.value=a.n),a.st&&(We.value=a.st),a.ap&&(ge.value=a.ap),vo(),alert("â˜ï¸ åŒæ­¥æˆåŠŸï¼æœ¬åœ°è¿›åº¦å·²æ›´æ–°ã€‚"),location.reload()}catch(e){alert("ä¸‹è½½å¤±è´¥: "+e.message),console.error(e)}finally{we.value=!1}}};return(e,t)=>{var s,i,a,d;return r(),c(pe,null,[o("div",Ms,[o("div",Ts,[o("div",Es,[o("div",As,[o("div",Ds,[o("button",{class:S(["tab-btn",{active:!g.value}]),onClick:t[0]||(t[0]=n=>g.value=!1)},"ğŸ“– å­¦ä¹ ",2),o("button",{class:S(["tab-btn review-tab",{active:g.value}]),onClick:t[1]||(t[1]=n=>g.value=!0)},[j(" ğŸ”¥ å¤ä¹ "),re(m).filter(n=>n.time<Date.now()).length>0?(r(),c("span",zs)):f("",!0)],2)]),o("label",Ls,[O(o("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=n=>A.value=n)},null,512),[[ws,A.value]]),o("span",null,v(A.value?"ğŸ™ï¸ ":"ğŸ‘€ "),1)]),A.value?(r(),c("button",{key:0,class:"mobile-only tool-btn-simple",onClick:Gt,style:{"margin-left":"10px","font-size":"20px"},title:tt.value?"å…¨éƒ¨éšè—":"å…¨éƒ¨æ˜¾ç¤º"},v(tt.value?"ğŸ“–":"ğŸ™ˆ"),9,Ps)):f("",!0)]),o("div",Os,[g.value?f("",!0):(r(),c("div",Ns,[O(o("select",{"onUpdate:modelValue":t[3]||(t[3]=n=>po($)?$.value=n:null),class:"sel-chap"},[(r(!0),c(pe,null,Se(Po.value,n=>(r(),c("option",{key:n.value,value:n.value},v(n.label)+v(n.isDone?"âœ…":""),9,Ws))),128))],512),[[Nt,re($)]]),O(o("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>D.value=n),class:"sel-part"},[(r(!0),c(pe,null,Se(zo.value,(n,u)=>(r(),c("option",{key:u,value:u},v(n),9,Rs))),128))],512),[[Nt,D.value]])])),o("div",{class:S(["stats-bar",{"compact-mode":!g.value}])},[g.value?(r(),c("span",Us,"ğŸ“š "+v(st.value.total),1)):f("",!0),o("span",Bs,"ğŸ”¥ "+v(st.value.learning),1),o("span",Gs,"âœ… "+v(st.value.learned),1),o("span",Vs,"ğŸŒ‘ "+v(st.value.unlearned),1)],2)]),o("div",Ks,[g.value?(r(),c("button",{key:0,onClick:t[5]||(t[5]=n=>Te.value=!0),class:"btn action-btn",title:"å­¦ä¹ ç»Ÿè®¡"},"ğŸ“Š")):f("",!0),o("button",{onClick:to,class:S(["btn action-btn desktop-only",{"active-pad":ke.value}]),title:"æ‰“å¼€/å…³é—­è‰ç¨¿æ¿"},"ğŸ–Šï¸",2),g.value?(r(),c("button",{key:1,onClick:Xo,class:"btn action-btn special-btn desktop-only",title:"å¯¼å‡ºé”™é¢˜æ–‡æœ¬ (TXT)"},"ğŸ“¥ ")):f("",!0),o("button",{onClick:Ro,class:"btn action-btn",title:"å¯¼å‡º/å¤‡ä»½è¿›åº¦ (JSON)"},"â¬‡ï¸ "),o("button",{onClick:Bo,class:"btn action-btn",style:{"margin-left":"8px"},title:"å¯¼å…¥/æ¢å¤è¿›åº¦"},"â¬†ï¸ "),o("input",{type:"file",id:"fileInput",hidden:"",onChange:Go},null,32),o("div",{class:S(["pomo-compact",{"break-mode":R.value}])},[!R.value&&se.value==="idle"?O((r(),c("select",{key:0,"onUpdate:modelValue":t[6]||(t[6]=n=>po(rt)?rt.value=n:null),onChange:es,class:"pomo-select",title:"ç‚¹å‡»è°ƒæ•´ä¸“æ³¨æ—¶é•¿"},[(r(),c(pe,null,Se(qo,n=>o("option",{key:n,value:n},v(n<1?"âš¡ 05s":(n<10?"0"+n:n)+":00"),9,js)),64))],544)),[[Nt,re(rt)]]):(r(),c("span",Hs,v(lo(P.value)),1)),se.value!=="running"?(r(),c("button",{key:2,onClick:ut,class:"pomo-btn-small play-btn"},"â–¶")):(r(),c("button",{key:3,onClick:Yo,class:"pomo-btn-small pause-btn"},"â¸")),o("button",{onClick:t[7]||(t[7]=n=>Tt(!0)),class:"pomo-btn-small stop-btn"},"â¹")],2)])])]),xe.value?(r(),c("div",{key:0,class:"modal-overlay",onClick:b(ts,["self"])},[o("div",Fs,[o("button",{class:"modal-close-icon",onClick:t[8]||(t[8]=n=>xe.value=!1)},"âœ•"),o("div",Xs,v(R.value?"ğŸ”‹":"ğŸ‰"),1),o("h2",Zs,v(Mt.value?"å……ç”µå®Œæ¯•":"ä¸“æ³¨å®Œæˆ"),1),Mt.value?(r(),c("div",Ys,[o("button",{onClick:Qo,class:"modal-btn focus-btn"},"å¼€å§‹ä¸“æ³¨")])):(r(),c("div",qs,[o("button",{onClick:t[9]||(t[9]=n=>Le(3)),class:"modal-btn break-btn"},"3m"),o("button",{onClick:t[10]||(t[10]=n=>Le(5)),class:"modal-btn break-btn"},"5m"),o("button",{onClick:t[11]||(t[11]=n=>Le(10)),class:"modal-btn break-btn"},"10m"),o("button",{onClick:t[12]||(t[12]=n=>Le(15)),class:"modal-btn break-btn"},"15m"),o("button",{onClick:t[13]||(t[13]=n=>Le(25)),class:"modal-btn long-break-btn"},"25m"),o("button",{onClick:t[14]||(t[14]=n=>Le(.05)),class:"modal-btn focus-btn"},"âš¡ 03s (æµ‹è¯•)")]))])],8,Js)):f("",!0),de.value.length>0?(r(),c("div",Qs,[o("div",en,[tn,o("div",on,[j(" å•è¯ "),g.value?(r(),c("button",{key:0,class:"toggle-source-btn",onClick:Mo,title:ye.value?"éšè—å…¨éƒ¨å‡ºå¤„":"æ˜¾ç¤ºå…¨éƒ¨å‡ºå¤„"},[ye.value?(r(),c("svg",nn,cn)):(r(),c("svg",rn,vn))],8,sn)):f("",!0),g.value?f("",!0):(r(),c("button",{key:1,class:"toggle-source-btn",onClick:rs,title:"å¤åˆ¶æœ¬é¡µæ‰€æœ‰å•è¯",style:{"margin-left":"4px"}}," ğŸ“‹ "))]),hn,o("div",pn,[j(" è¯ä¹‰ "),A.value?(r(),c("button",{key:0,class:"toggle-all-btn",onClick:Gt,title:tt.value?"å…¨éƒ¨éšè—":"å…¨éƒ¨æ˜¾ç¤º"},v(tt.value?"ğŸ“–":"ğŸ™ˆ"),9,fn)):f("",!0)]),A.value?f("",!0):(r(),c("div",gn,"ä¾‹å¥")),A.value?f("",!0):(r(),c("div",_n,"æ‹“å±•")),mn])])):f("",!0),o("div",yn,[de.value.length===0?(r(),c("div",bn,v(g.value?"æš‚æ— é”™é¢˜ ğŸ‰":"æœ¬ç« æ•°æ®åŠ è½½ä¸­"),1)):f("",!0),(r(!0),c(pe,null,Se(de.value,(n,u)=>(r(),c("div",{key:u,class:"vocab-block",style:Q({borderLeftColor:n.color})},[g.value?f("",!0):(r(),c("div",{key:0,class:S(["group-note-bar",{"has-note":ht(n.groupId)}]),style:Q({backgroundColor:ht(n.groupId)?n.color+"15":"transparent",borderBottom:ht(n.groupId)?"1px solid "+n.color+"20":"none"})},[o("div",{class:"note-title",onClick:l=>vs(n.groupId)},[ht(n.groupId)?(r(),c("span",{key:0,class:"note-exist-text",style:Q({color:n.color})},[xn,j(" "+v(fs(n.groupId)),1)],4)):(r(),c("span",wn," â• æ·»åŠ è¾¨æç¬”è®° "))],8,kn),o("div",Cn,[o("button",{class:"note-action-btn copy-group-btn",onClick:b(l=>us(n),["stop"]),title:"å¤åˆ¶æœ¬ç»„å•è¯"}," ğŸ“‹ ",8,Sn),o("button",{class:"note-action-btn",onClick:b(l=>Dt(n.groupId),["stop"]),title:"ç¼–è¾‘ç¬”è®°"}," âš™ï¸ ",8,$n)])],6)),g.value&&n.title?(r(),c("div",{key:1,class:"group-title",style:Q([{color:n.color,backgroundColor:n.color+"15"},{cursor:"pointer",display:"flex","align-items":"center","user-select":"none"}]),onClick:l=>is(n.title)},[o("span",Mn,v(n.title),1),o("button",{class:"stage-source-btn",onClick:b(l=>cs(n),["stop"]),title:Je(n)?"éšè—æœ¬é˜¶æ®µå‡ºå¤„":"æ˜¾ç¤ºæœ¬é˜¶æ®µå‡ºå¤„",style:Q({color:Je(n)?n.color:"#9ca3af",opacity:Je(n)?1:.5})},[(r(),c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:Je(n)?"currentColor":"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},zn,8,En))],12,Tn),Ln,o("button",{class:"collapse-btn",style:Q({color:n.color,borderColor:n.color})},v(dt[n.title]?"ğŸ”½ å±•å¼€":"ğŸ”¼ æ”¶èµ·"),5)],12,In)):f("",!0),O(o("div",null,[(r(!0),c(pe,null,Se(n.list,l=>(r(),c("div",{key:l.en,class:S(["grid-layout row-item",{"mastered-row":l._isMastered&&!l._isKilled&&!g.value,"killed-row":l._isKilled&&!g.value}]),id:"word-row-"+l.en.replace(/\s+/g,"_")},[o("div",On,[j(v(g.value?l.id:l._id)+" ",1),(l._isMastered||l._isKilled)&&!g.value?(r(),c("span",{key:0,class:"status-icon",style:Q({color:l._isKilled?"#a855f7":"#10b981",fontWeight:"bold"})}," âœ” ",4)):f("",!0)]),o("div",Nn,[o("div",Wn,[A.value?(r(),c("div",il,[o("span",{class:S(["speaker",{playing:G.value===l.en}]),onClick:b(_=>Be(l.en),["stop"])},v(G.value===l.en?"â¸ï¸":"ğŸ”Š"),11,cl),o("div",rl,[o("input",{type:"text",class:S(["dictation-input",[$e[l.en],{"mastered-input":l._isMastered&&!g.value}]]),placeholder:"è¾“å…¥...",onChange:_=>Wo(l,_),onInput:_=>$e[l.en]="",onFocus:_=>Oo(l.en),onKeydown:[t[15]||(t[15]=fe(b(()=>{},["stop"]),["space"])),fe(b(Rt,["prevent"]),["tab"]),fe(b(Rt,["prevent"]),["enter"])],autocomplete:"off"},null,42,ul),$e[l.en]==="error"?(r(),c("div",dl,"âŒ "+v(l.en),1)):f("",!0),ae.has(l.en)?(r(),c("div",vl,"ğŸ‘€ "+v(l.en),1)):f("",!0)]),o("button",{class:"peek-btn",onClick:b(_=>ko(l.en),["stop"]),title:ae.has(l.en)?"éšè—ç­”æ¡ˆ":"å·çœ‹ç­”æ¡ˆ"},v(ae.has(l.en)?"ğŸ™ˆ":"ğŸ‘ï¸"),9,hl)])):(r(),c("div",Rn,[o("div",Un,[o("span",{class:"en-text",onClick:b(_=>Be(l.en),["stop"]),style:{cursor:"pointer"},title:"ç‚¹å‡»å‘éŸ³"},v(l.en),9,Bn),o("span",{class:S(["speaker",{playing:G.value===l.en}]),onClick:b(_=>Be(l.en),["stop"])},v(G.value===l.en?"â¸ï¸":"ğŸ”Š"),11,Gn),re(ge).includes(l.en)?(r(),c("span",{key:0,onClick:b(_=>gs(l.en),["stop"]),title:"è¯¥è¯æ›¾ä¾èµ–å¬éŸ³å›å¿† (å¬è§‰å°è®°)",style:{"font-size":"14px","margin-left":"6px",cursor:"help"}}," ğŸ‘‚ ",8,Vn)):f("",!0),l.source!=="ç”Ÿè¯æœ¬"?(r(),c("button",{key:1,class:"copy-btn",onClick:b(_=>Uo(l.en),["stop"]),title:"ç‚¹å‡»å¤åˆ¶"},"ğŸ“‹",8,Kn)):f("",!0),g.value&&l.notation==="æˆ‘çš„ç”Ÿè¯æœ¬"?(r(),c("button",{key:2,class:"copy-btn edit-btn",onClick:b(_=>Ko(l),["stop"]),title:"ä¿®æ”¹å•è¯/é‡Šä¹‰"},"âœ",8,jn)):f("",!0),g.value&&!ye.value&&l.source!=="ç”Ÿè¯æœ¬"?(r(),c("button",{key:3,class:"copy-btn location-btn",onClick:b(_=>To(l.en),["stop"]),title:B.has(l.en)?"éšè—å‡ºå¤„":"æŸ¥çœ‹å‡ºå¤„",style:Q({color:B.has(l.en)?"#3b82f6":"",opacity:B.has(l.en)?"1":""})},[B.has(l.en)?(r(),c("svg",Jn,Zn)):(r(),c("svg",qn,el))],12,Hn)):f("",!0)]),ye.value||B.has(l.en)?(r(),c("div",tl,[o("a",{href:ro(l),class:"word-source-row clickable-source",onClick:b(_=>as(l),["prevent"]),title:"ç‚¹å‡»åœ¨å½“å‰é¡µè·³è½¬"}," ğŸ“ "+v(l.source),9,ol),o("a",{href:ro(l),class:"word-source-row icon-only",target:"_blank",title:"æ–°æ ‡ç­¾é¡µæ‰“å¼€å¹¶è‡ªåŠ¨åˆ‡æ¢ ğŸš€"}," ğŸš€ ",8,sl)])):f("",!0),g.value&&l._review?(r(),c("div",nl,[l._review.time<Date.now()?(r(),c("span",ll,"å¾…å¤ä¹ ")):(r(),c("span",al,v(Math.round((l._review.time-Date.now())/6e4))+"m",1))])):f("",!0)]))]),o("div",pl,v(l.pos),1),o("button",{class:"mobile-only mobile-kill",onClick:_=>Vt(l.en),style:Q(A.value?{top:"auto",bottom:"10px",right:"10px",background:"#fff",border:"1px solid #eee",borderRadius:"50%",width:"30px",height:"30px"}:{})},v(l._isKilled?"â†º":"âœ•"),13,fl)]),o("div",gl,v(l.pos),1),o("div",{class:S(["col-zh",{"interactive-zh":A.value}]),onClick:_=>A.value?xo(l.en):null},[o("div",{class:S(["zh-text",{"blur-zh":A.value&&!z.has(l.en)&&l.pos!=="è‡ªé€‰"}])},v(l.zh),3),l.notation&&!A.value?(r(),c("div",ml,v(l.notation),1)):f("",!0)],10,_l),A.value?f("",!0):(r(),c("div",yl,[o("div",bl,[o("span",null,v(l.example),1),l.example?(r(),c("span",{key:0,class:"speaker-small",onClick:b(_=>No(l.example),["stop"]),title:"è¯»ä¾‹å¥"},"ğŸ”‰",8,kl)):f("",!0)])])),A.value?f("",!0):(r(),c("div",xl,v(l.notation||""),1)),o("div",wl,[o("button",{class:"kill-btn",onClick:_=>Vt(l.en),title:l._isKilled?"æ¢å¤/æ’¤é”€æ–©æ€":"æ–©æ€/å½’æ¡£",style:Q({color:l._isKilled?"#a855f7":""})},v(l._isKilled?"â†º":"âœ•"),13,Cl)])],10,Pn))),128))],512),[[mo,!dt[n.title]]])],4))),128)),!g.value&&Ie.value.length>1?(r(),c("div",Sl,[o("button",{class:"page-btn big-btn",disabled:D.value===0,onClick:t[16]||(t[16]=n=>no(-1))},"â¬…ï¸ ä¸Šä¸€é¡µ",8,$l),o("div",Il,[o("span",Ml,v(D.value+1)+" / "+v(Ie.value.length),1),o("button",{class:S(["finish-btn",{done:so.value}]),onClick:Zo,title:"æ ‡è®°æœ¬é¡µä¸ºå·²å®Œæˆ"},v(so.value?"âœ… å·²å®Œæˆ":"â­• æ ‡è®°å®Œæˆ"),3)]),o("button",{class:"page-btn big-btn",disabled:D.value===Ie.value.length-1,onClick:t[17]||(t[17]=n=>no(1))},"ä¸‹ä¸€é¡µ â¡ï¸",8,Tl)])):f("",!0),El]),ke.value?(r(),c("div",{key:2,class:"scratchpad-window",style:Q({left:ct.value+"px",top:wt.value+"px"})},[o("div",{class:"pad-header",onMousedown:Fo},[Al,o("button",{class:"pad-close",onClick:to},"âœ•")],32),o("canvas",{ref_key:"canvasRef",ref:oe,class:"pad-canvas",style:{"touch-action":"none",display:"block"},onPointerdown:Ho,onPointermove:Jo,onPointerup:Yt,onPointerleave:Yt,onDblclick:It},null,544),o("div",{class:"pad-footer"},[Dl,o("button",{class:"pad-btn-clear",onClick:It},"ğŸ—‘ï¸ (Space)")])],4)):f("",!0),o("div",{class:S(["floating-action-group",{"pos-left":ds.value}])},[g.value?(r(),c("button",{key:0,onClick:bt,class:"floating-btn refresh-btn",title:"åˆ·æ–°æ•°æ®"},"ğŸ”„")):f("",!0),g.value?f("",!0):(r(),c("button",{key:1,onClick:wo,class:"floating-btn story-btn",title:"æœ¬é¡µåŠ©è®°æ–‡ç« /æ•…äº‹"},"ğŸ“œ")),o("button",{onClick:Vo,class:"floating-btn add-btn",title:"æ‰‹åŠ¨åŠ å…¥ç”Ÿè¯"},"â•"),o("button",{onClick:ss,class:"floating-btn search-btn",title:"æœç´¢å•è¯/è¯æ ¹"},"ğŸ”"),o("button",{onClick:ms,class:S(["floating-btn sync-btn main-cloud-trigger",{active:Ne.value}]),title:"äº‘åŒæ­¥èœå•"},[we.value?(r(),c("svg",zl,Pl)):(r(),c("svg",Ol,Rl))],2),fo(_o,{name:"fade-slide"},{default:go(()=>[O(o("button",{onClick:os,class:"floating-btn top-btn",title:"å›åˆ°é¡¶éƒ¨"}," â¬†ï¸ ",512),[[mo,ao.value]])]),_:1}),fo(_o,{name:"cloud-pop"},{default:go(()=>[Ne.value?(r(),c("div",Ul,[o("div",Bl,[o("div",Gl,[Vl,o("span",null,v(re(pt)||"æœªåŒæ­¥"),1)]),o("div",{class:S(["status-row",{"highlight-update":ft.value}])},[Kl,Pt.value?(r(),c("span",jl,"æ£€æµ‹ä¸­...")):(r(),c("span",Hl,v(Lt.value||"æœªçŸ¥"),1))],2),ft.value?(r(),c("div",Jl," âœ¨ æœ‰æ–°ç‰ˆæœ¬ ")):f("",!0)]),o("button",{onClick:bs,class:"floating-btn sync-btn svg-icon-btn sub-btn",title:"ä¸Šä¼ è¿›åº¦åˆ°äº‘ç«¯",disabled:we.value},Zl,8,Fl),o("button",{onClick:ks,class:"floating-btn sync-btn svg-icon-btn sub-btn",title:"ä»äº‘ç«¯ä¸‹è½½è¿›åº¦",disabled:we.value},Ql,8,ql),o("button",{onClick:t[18]||(t[18]=n=>Ze.value=!0),class:"floating-btn sync-btn sub-btn",title:"é…ç½®äº‘åŒæ­¥",style:{"font-size":"20px"}},"âš™ï¸")])):f("",!0)]),_:1})],2),be.value?(r(),c("div",{key:3,class:"modal-overlay",onClick:t[21]||(t[21]=b(n=>be.value=!1,["self"]))},[o("div",ea,[ta,o("div",oa,[O(o("input",{id:"custom-word-input",type:"text","onUpdate:modelValue":t[19]||(t[19]=n=>nt.value=n),class:"modal-input-field",placeholder:"è¯·è¾“å…¥å•è¯...",onKeydown:fe(Ht,["enter"]),autocomplete:"off"},null,40,sa),[[ee,nt.value]])]),o("div",na,[o("button",{onClick:t[20]||(t[20]=n=>be.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),o("button",{onClick:Ht,class:"modal-btn",style:{background:"#2563eb",color:"white"}},"ç¡®å®š")])])])):f("",!0),Me.value?(r(),c("div",{key:4,class:"modal-overlay",onClick:t[24]||(t[24]=b(n=>Me.value=!1,["self"]))},[o("div",la,[aa,o("p",ia,[j(' è¯åº“ä¸­æœªæ‰¾åˆ° "'),o("strong",null,v(at.value),1),j('"ï¼Œè¯·å¡«å†™ä¸­æ–‡æ„æ€ï¼š ')]),o("div",ca,[O(o("input",{id:"custom-meaning-input",type:"text","onUpdate:modelValue":t[22]||(t[22]=n=>lt.value=n),class:"modal-input-field",placeholder:"ä¾‹å¦‚ï¼šå¼€é˜”çœ¼ç•Œ...",onKeydown:fe(Jt,["enter"]),autocomplete:"off"},null,40,ra),[[ee,lt.value]])]),o("div",ua,[o("button",{onClick:t[23]||(t[23]=n=>Me.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),o("button",{onClick:Jt,class:"modal-btn",style:{background:"#10b981",color:"white"}},"ä¿å­˜å¹¶æ·»åŠ ")])])])):f("",!0),kt.value?(r(),c("div",da,[o("div",va,[ha,o("h3",pa,v(Kt.value),1)])])):f("",!0)]),Ve.value?(r(),c("div",{key:0,class:"modal-overlay",onClick:t[28]||(t[28]=b(n=>Ve.value=!1,["self"]))},[o("div",fa,[ga,o("div",_a,[ma,O(o("input",{type:"text","onUpdate:modelValue":t[25]||(t[25]=n=>te.newWord=n),class:"modal-input-field"},null,512),[[ee,te.newWord]])]),o("div",ya,[ba,O(o("input",{type:"text","onUpdate:modelValue":t[26]||(t[26]=n=>te.newZh=n),class:"modal-input-field"},null,512),[[ee,te.newZh]])]),o("div",ka,[o("button",{onClick:t[27]||(t[27]=n=>Ve.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),o("button",{onClick:jo,class:"modal-btn",style:{background:"#3b82f6",color:"white"}},"ä¿å­˜ä¿®æ”¹")])])])):f("",!0),Te.value?(r(),c("div",{key:1,class:"modal-overlay",onClick:t[32]||(t[32]=b(n=>Te.value=!1,["self"]))},[o("div",xa,[o("div",wa,[Ca,o("div",Sa,[o("button",{class:S({active:Ee.value==="week"}),onClick:t[29]||(t[29]=n=>Ee.value="week")},"è¿‘7å¤©",2),o("button",{class:S({active:Ee.value==="month"}),onClick:t[30]||(t[30]=n=>Ee.value="month")},"è¿‘30å¤©",2)])]),o("div",$a,[o("div",Ia,[o("div",Ma,v(Math.round((((s=re(W)[Ge()])==null?void 0:s.duration)||0)/60)),1),Ta]),o("div",Ea,[o("div",Aa,v(((i=re(W)[Ge()])==null?void 0:i.learn)||0),1),Da]),o("div",za,[o("div",La,v(((a=re(W)[Ge()])==null?void 0:a.review)||0),1),Pa]),o("div",Oa,[o("div",Na,v(((d=re(W)[Ge()])==null?void 0:d.kill)||0),1),Wa])]),o("div",Ra,[o("canvas",{ref_key:"statsChartCanvas",ref:xt},null,512)]),o("button",{class:"modal-close",onClick:t[31]||(t[31]=n=>Te.value=!1),style:{"margin-top":"15px"}},"å…³é—­")])])):f("",!0),je.value?(r(),c("div",{key:2,class:"modal-overlay",onClick:t[37]||(t[37]=b(n=>je.value=!1,["self"]))},[o("div",Ua,[o("div",Ba,[O(o("input",{id:"global-search-input",type:"text","onUpdate:modelValue":t[33]||(t[33]=n=>Pe.value=n),onInput:ns,onKeydown:[fe(b(ls,["prevent"]),["enter"]),t[34]||(t[34]=fe(b(n=>co(-1),["prevent"]),["up"])),t[35]||(t[35]=fe(b(n=>co(1),["prevent"]),["down"]))],placeholder:"è¾“å…¥è¯æ ¹ (æ”¯æŒé”®ç›˜ â†‘â†“ é€‰æ‹©)...",class:"modal-input-field search-input",autocomplete:"off"},null,40,Ga),[[ee,Pe.value]]),o("button",{class:"modal-close-icon static-pos",onClick:t[36]||(t[36]=n=>je.value=!1)},"âœ•")]),o("div",Va,[Pe.value?q.value.length===0?(r(),c("div",ja,"æœªæ‰¾åˆ°åŒ¹é…å•è¯")):(r(!0),c(pe,{key:2},Se(q.value,(n,u)=>(r(),c("div",{key:n.en,class:S(["search-item",{"clickable-item":!n.isCustom,selected:u===ie.value}]),onClick:l=>He(n),onMouseenter:l=>ie.value=u},[o("div",Ja,[o("div",Fa,[j(v(n.en)+" ",1),o("span",{class:"speaker-small",onClick:b(l=>Be(n.en),["stop"])},"ğŸ”Š",8,Xa)]),o("div",Za,v(n.zh),1)]),o("div",qa,[o("span",Ya,v(n.source),1)])],42,Ha))),128)):(r(),c("div",Ka,"è¾“å…¥å­—æ¯æŸ¥æ‰¾åŒ…å«è¯¥è¯æ ¹çš„å•è¯"))])])])):f("",!0),Fe.value?(r(),c("div",{key:3,class:"modal-overlay",onClick:t[41]||(t[41]=b(n=>Fe.value=!1,["self"]))},[o("div",Qa,[ei,o("div",ti,[oi,O(o("input",{type:"text","onUpdate:modelValue":t[38]||(t[38]=n=>ne.title=n),class:"modal-input-field",placeholder:"ä¾‹å¦‚ï¼šDiscover vs Invent åŒºåˆ«...",autocomplete:"off"},null,512),[[ee,ne.title]])]),o("div",si,[ni,O(o("textarea",{"onUpdate:modelValue":t[39]||(t[39]=n=>ne.content=n),class:"modal-input-field",style:{flex:"1",resize:"none","line-height":"1.6","font-family":"sans-serif"},placeholder:"åœ¨è¿™é‡Œè®°å½•è¯¦ç»†çš„è¯ä¹‰è¾¨æã€åœºæ™¯ç”¨æ³•ç­‰..."},null,512),[[ee,ne.content]])]),o("div",li,[o("button",{onClick:t[40]||(t[40]=n=>Fe.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),o("button",{onClick:ps,class:"modal-btn",style:{background:"#8b5cf6",color:"white"}},"ğŸ’¾ ä¿å­˜ç¬”è®°")])])])):f("",!0),Xe.value?(r(),c("div",{key:4,class:"modal-overlay",onClick:t[43]||(t[43]=b(n=>Xe.value=!1,["self"]))},[o("div",ai,[o("div",ii,[o("h3",ci,v(Oe.title||"æ— æ ‡é¢˜ç¬”è®°"),1),o("div",ri,[o("button",{class:"icon-btn edit-switch-btn",onClick:hs,title:"ä¿®æ”¹å†…å®¹"},"âœ"),o("button",{class:"icon-btn close-btn",onClick:t[42]||(t[42]=n=>Xe.value=!1)},"âœ•")])]),o("div",{class:"read-content markdown-body",innerHTML:zt(Oe.content)},null,8,ui)])])):f("",!0),et.value?(r(),c("div",{key:5,class:"modal-overlay",onClick:t[50]||(t[50]=b(n=>et.value=!1,["self"]))},[o("div",di,[o("div",vi,[o("h3",hi,v(Z.value?"âœï¸ ç¼–è¾‘æ¨¡å¼":"ğŸ“œ æœ¬é¡µåŠ©è®°æ–‡ç«  (Part "+(D.value+1)+")"),1),o("div",pi,[Z.value?(r(),c("button",{key:1,class:"icon-btn",onClick:t[45]||(t[45]=n=>Z.value=!1),title:"é¢„è§ˆ"}," ğŸ‘ï¸ é¢„è§ˆ ")):(r(),c("button",{key:0,class:"icon-btn edit-switch-btn",onClick:t[44]||(t[44]=n=>Z.value=!0),title:"ç¼–è¾‘å½“å‰æ–‡ç« "}," âœ ç¼–è¾‘ ")),o("button",{class:"icon-btn close-btn",onClick:t[46]||(t[46]=n=>et.value=!1)},"âœ•")])]),o("div",fi,[o("div",gi,[_i,o("div",mi,[(r(!0),c(pe,null,Se(L.value,(n,u)=>(r(),c("div",{key:u,class:S(["sidebar-item",{active:me.value===u}]),onClick:l=>Bt(u)},[bi,o("span",ki,v(n.title||"æ— æ ‡é¢˜æ–‡ç« "),1)],10,yi))),128))]),o("button",{class:"sidebar-add-btn",onClick:Co}," + æ–°å¢æ–‡ç«  ")]),o("div",xi,[Z.value?(r(),c("div",Ei,[o("div",Ai,[O(o("input",{type:"text","onUpdate:modelValue":t[47]||(t[47]=n=>ue.value.title=n),class:"modal-input-field",placeholder:"è¯·è¾“å…¥æ–‡ç« æ ‡é¢˜...",style:{"font-weight":"bold"}},null,512),[[ee,ue.value.title]])]),o("div",Di,[o("div",zi,[o("div",{class:"editor-toolbar"},[Li,o("button",{class:"tiny-btn",onClick:Io},"ğŸ¤– å¤åˆ¶ AI Prompt"),o("button",{class:"tiny-btn delete-btn",onClick:So},"ğŸ—‘ï¸ åˆ é™¤æ­¤ç¯‡")]),O(o("textarea",{"onUpdate:modelValue":t[48]||(t[48]=n=>ue.value.content=n),class:"modal-input-field",style:{flex:"1",resize:"none","margin-bottom":"0"},placeholder:"åœ¨æ­¤ç²˜è´´æ•…äº‹å†…å®¹..."},null,512),[[ee,ue.value.content]])]),o("div",Pi,[Oi,o("div",{class:"markdown-body",style:{padding:"10px","overflow-y":"auto",height:"100%"},innerHTML:zt(ue.value.content)},null,8,Ni)])])])):(r(),c("div",wi,[o("h1",Ci,v(ue.value.title),1),ue.value.content?(r(),c("div",{key:0,innerHTML:zt(ue.value.content)},null,8,Si)):(r(),c("div",$i,Ti))]))])]),Z.value?(r(),c("div",Wi,[o("button",{onClick:t[49]||(t[49]=n=>Z.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),o("button",{onClick:$o,class:"modal-btn",style:{background:"#f59e0b",color:"white"}},"ğŸ’¾ ä¿å­˜å…¨éƒ¨æ›´æ”¹")])):f("",!0)])])):f("",!0),Ze.value?(r(),c("div",{key:6,class:"modal-overlay",onClick:t[54]||(t[54]=b(n=>Ze.value=!1,["self"]))},[o("div",Ri,[Ui,Bi,o("div",Gi,[Vi,O(o("input",{type:"password","onUpdate:modelValue":t[51]||(t[51]=n=>E.token=n),class:"modal-input-field",placeholder:"ghp_xxxxxxxxxxxx..."},null,512),[[ee,E.token]])]),o("div",Ki,[ji,O(o("input",{type:"text","onUpdate:modelValue":t[52]||(t[52]=n=>E.gistId=n),class:"modal-input-field",placeholder:"ä¾‹å¦‚: e5a3c..."},null,512),[[ee,E.gistId]])]),o("div",Hi,[o("button",{onClick:t[53]||(t[53]=n=>Ze.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),o("button",{onClick:ys,class:"modal-btn",style:{background:"#a855f7",color:"white"}},"ğŸ’¾ ä¿å­˜é…ç½®")]),Ji])])):f("",!0)],64)}}},ec=xs(Zi,[["__scopeId","data-v-33cb338c"]]);export{ec as default};
