import{_ as Ys,d as h,e as re,f as V,w as ue,g as qs,h as St,c,a as s,n as $,i as Y,u as de,j as p,k as U,v as Qs,t as v,l as $t,m as qt,F as ve,r as ke,p as m,q as Z,s as le,x as pe,y as it,o as r,z as eo,A as to,B as so,C as oo}from"./index-e4449c99.js";import x from"./vocabulary-9de5e70b.js";import{marked as no}from"https://cdn.jsdelivr.net/npm/marked/lib/marked.esm.js";const _=Fe=>(to("data-v-8c07079f"),Fe=Fe(),so(),Fe),lo={class:"app-root"},ao={class:"tools-bar sticky-toolbar"},io={class:"bar-inner"},co={class:"left-tools"},ro={class:"mode-switch"},uo={key:0,class:"dot"},vo={class:"toggle-label"},po=["title"],ho={class:"middle-tools"},fo={key:0,class:"selectors"},_o=["value"],yo=["value"],go={key:0,title:"å…¨ä¹¦æ€»è¯æ±‡é‡"},mo={class:"s-learn",title:"å¤ä¹ é˜Ÿåˆ—ä¸­"},bo={class:"s-done",title:"å·²æ–©æ€+å·²é€šå…³"},ko={class:"s-new",title:"å‰©ä½™å•è¯"},xo={class:"right-tools"},Co=["value"],wo={key:1,class:"pomo-time"},So=["onClick"],$o={class:"modal-box"},Io={class:"modal-icon"},Mo={class:"modal-title"},Eo={key:0,class:"modal-actions"},To={key:1,class:"modal-actions"},Ao={key:1,class:"header-table-row desktop-only"},Do={class:"grid-layout"},Lo=_(()=>s("div",{class:"col-idx text-center"},"#",-1)),zo={class:"col-word header-word-col"},Po=["title"],Oo={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Wo=_(()=>s("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1)),No=_(()=>s("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1)),Ro=[Wo,No],Uo={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Bo=_(()=>s("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},null,-1)),Ko=_(()=>s("circle",{cx:"12",cy:"10",r:"3"},null,-1)),Vo=[Bo,Ko],Fo=_(()=>s("div",{class:"col-pos text-center"},"è¯æ€§",-1)),Jo={class:"col-zh header-zh-col"},jo=["title"],Go={key:0,class:"col-ex"},Ho={key:1,class:"col-note"},Xo=_(()=>s("div",{class:"col-del text-center"},"åˆ ",-1)),Zo={class:"content-container"},Yo={key:0,class:"empty-tip"},qo=["onClick"],Qo=_(()=>s("span",{style:{"font-weight":"800","margin-right":"4px"}},"P.",-1)),en={key:1,class:"note-placeholder",style:{color:"#9ca3af"}},tn={class:"group-actions"},sn=["onClick"],on=["onClick"],nn=["onClick"],ln={style:{"font-weight":"bold","margin-right":"10px"}},an=["onClick","title"],cn=["fill"],rn=_(()=>s("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},null,-1)),un=_(()=>s("circle",{cx:"12",cy:"10",r:"3"},null,-1)),dn=[rn,un],vn=_(()=>s("div",{style:{flex:"1"}},null,-1)),pn=["id"],hn={class:"col-idx text-center index-num desktop-only"},fn={class:"col-word"},_n={class:"word-wrapper"},yn={key:0,class:"word-cell-container"},gn={class:"word-row-top"},mn=["onClick"],bn=["onClick"],kn=["onClick"],xn=["onClick"],Cn=["onClick"],wn=["onClick","title"],Sn={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},$n=_(()=>s("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},null,-1)),In=_(()=>s("circle",{cx:"12",cy:"10",r:"3"},null,-1)),Mn=[$n,In],En={key:1,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Tn=_(()=>s("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},null,-1)),An=_(()=>s("circle",{cx:"12",cy:"10",r:"3"},null,-1)),Dn=[Tn,An],Ln=["onClick"],zn={key:1,class:"review-meta desktop-only"},Pn={key:0,class:"tag-due"},On={key:1,class:"tag-wait"},Wn={key:1,class:"input-cell"},Nn=["onClick"],Rn={class:"input-col"},Un=["onChange","onInput","onFocus","onKeydown"],Bn={key:0,class:"error-hint"},Kn={key:1,class:"peek-hint"},Vn=["onClick","title"],Fn={class:"mobile-only mobile-pos"},Jn=["onClick"],jn={class:"col-pos text-center italic desktop-only"},Gn=["onClick"],Hn={key:0,class:"mobile-only mobile-notation"},Xn={key:0,class:"col-ex example-cell"},Zn={class:"ex-content"},Yn=["onClick"],qn={key:1,class:"col-note notation-cell desktop-only"},Qn={class:"col-del text-center desktop-only"},el=["onClick","title"],tl={key:1,class:"pagination-area"},sl=["disabled"],ol={class:"finish-control"},nl={class:"page-info"},ll=["disabled"],al=_(()=>s("div",{style:{height:"40px"}},null,-1)),il=_(()=>s("span",{class:"pad-title"},":: æ‹–æ‹½ ::",-1)),cl=_(()=>s("span",{class:"hint-text"},"â†˜ï¸å³ä¸‹è§’æ‹–åŠ¨è°ƒæ•´å¤§å°",-1)),rl={class:"modal-box",style:{"max-width":"360px"}},ul=_(()=>s("h3",{class:"modal-title"},"âœï¸ æ·»åŠ æ–°è¯",-1)),dl={style:{margin:"20px 0"}},vl=["onKeydown"],pl={class:"modal-actions"},hl={class:"modal-box",style:{"max-width":"360px"}},fl=_(()=>s("h3",{class:"modal-title"},"ğŸ“– è¡¥å……é‡Šä¹‰",-1)),_l={style:{color:"#666","font-size":"14px","margin-bottom":"10px"}},yl={style:{margin:"15px 0"}},gl=["onKeydown"],ml={class:"modal-actions"},bl={key:5,class:"modal-overlay",style:{background:"rgba(0,0,0,0.3)","z-index":"3000"}},kl={class:"modal-box",style:{"max-width":"300px",padding:"30px 20px"}},xl=_(()=>s("div",{style:{"font-size":"40px","margin-bottom":"10px"}},"ğŸ‰",-1)),Cl={style:{margin:"0",color:"#374151"}},wl={class:"modal-box",style:{"max-width":"360px","text-align":"left"}},Sl=_(()=>s("h3",{class:"modal-title",style:{"text-align":"center"}},"ğŸ› ï¸ ä¿®æ”¹å•è¯",-1)),$l={style:{"margin-bottom":"15px"}},Il=_(()=>s("label",{style:{display:"block",color:"#666","font-size":"12px","margin-bottom":"5px"}},"è‹±æ–‡æ‹¼å†™",-1)),Ml={style:{"margin-bottom":"20px"}},El=_(()=>s("label",{style:{display:"block",color:"#666","font-size":"12px","margin-bottom":"5px"}},"ä¸­æ–‡é‡Šä¹‰",-1)),Tl={class:"modal-actions"},Al={class:"modal-box stats-box"},Dl={class:"stats-header"},Ll=_(()=>s("h3",null,"ğŸ“ˆ å­¦ä¹ æ•°æ®çœ‹æ¿",-1)),zl={class:"stats-switcher"},Pl={class:"stats-summary"},Ol={class:"summary-item"},Wl={class:"num"},Nl=_(()=>s("div",{class:"label"},"ä¸“æ³¨(åˆ†)",-1)),Rl={class:"summary-item"},Ul={class:"num",style:{color:"#10b981"}},Bl=_(()=>s("div",{class:"label"},"ä»Šæ—¥å­¦ä¹ ",-1)),Kl={class:"summary-item"},Vl={class:"num",style:{color:"#3b82f6"}},Fl=_(()=>s("div",{class:"label"},"ä»Šæ—¥å¤ä¹ ",-1)),Jl={class:"summary-item"},jl={class:"num",style:{color:"#ef4444"}},Gl=_(()=>s("div",{class:"label"},"ä»Šæ—¥æ–©æ€",-1)),Hl={class:"chart-container"},Xl={class:"modal-box search-box-modal"},Zl={class:"search-header"},Yl=["onKeydown"],ql={class:"search-results-list"},Ql={key:0,class:"empty-tip-text"},ea={key:1,class:"empty-tip-text"},ta=["onClick","onMouseenter"],sa={class:"si-left"},oa={class:"si-en"},na=["onClick"],la={class:"si-zh"},aa={class:"si-right"},ia={class:"si-source"},ca={class:"modal-box",style:{"max-width":"600px","text-align":"left",height:"80vh",display:"flex","flex-direction":"column"}},ra=_(()=>s("h3",{class:"modal-title"},"ğŸ“ åˆ†ç»„è¾¨æç¬”è®°",-1)),ua={style:{"margin-bottom":"10px"}},da=_(()=>s("label",{style:{"font-size":"12px",color:"#666","font-weight":"bold"}},"æ ‡é¢˜ (æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸Šæ–¹)",-1)),va={style:{flex:"1",display:"flex","flex-direction":"column","margin-bottom":"15px","min-height":"0"}},pa=_(()=>s("label",{style:{"font-size":"12px",color:"#666","font-weight":"bold","margin-bottom":"5px"}},"è¯¦ç»†å†…å®¹ (æ”¯æŒæ¢è¡Œ/ç®€å•Markdown)",-1)),ha={class:"modal-actions"},fa={class:"modal-box read-card-modal"},_a={class:"read-header"},ya={class:"read-title"},ga={class:"read-actions"},ma=["innerHTML"],ba={class:"modal-box read-card-modal",style:{height:"85vh",display:"flex","flex-direction":"column",padding:"0"}},ka={class:"read-header"},xa={class:"read-title"},Ca={class:"read-actions"},wa={style:{flex:"1",display:"flex",overflow:"hidden"}},Sa={class:"story-sidebar"},$a=_(()=>s("div",{class:"sidebar-header"},"æ–‡ç« åˆ—è¡¨",-1)),Ia={class:"sidebar-list"},Ma=["onClick"],Ea=_(()=>s("span",{class:"item-icon"},"ğŸ“„",-1)),Ta={class:"item-title"},Aa={class:"story-content-area"},Da={key:0,class:"markdown-body story-reader"},La={class:"story-page-title"},za=["innerHTML"],Pa={key:1,class:"empty-story-tip"},Oa=_(()=>s("div",{style:{"font-size":"40px"}},"ğŸ“",-1)),Wa=_(()=>s("div",null,[Y("æœ¬ç¯‡æ–‡ç« æš‚æ— å†…å®¹"),s("br"),Y("ç‚¹å‡»å³ä¸Šè§’ "),s("b",null,'"âœ ç¼–è¾‘"'),Y(" å¼€å§‹å†™ä½œ")],-1)),Na=[Oa,Wa],Ra={key:1,class:"story-editor-layout"},Ua={style:{"margin-bottom":"10px"}},Ba={style:{flex:"1",display:"flex",gap:"15px","min-height":"0"}},Ka={style:{flex:"1",display:"flex","flex-direction":"column"}},Va=_(()=>s("span",null,"Markdown ç¼–è¾‘",-1)),Fa={class:"desktop-only preview-pane"},Ja=_(()=>s("div",{class:"editor-toolbar"},"å®æ—¶é¢„è§ˆ",-1)),ja=["innerHTML"],Ga={key:0,class:"modal-actions",style:{padding:"10px 20px","border-top":"1px solid #eee",margin:"0"}},Ha="/my-ielts/timeout.mp3",Xa="/my-ielts/do.mp3",Za={__name:"index",setup(Fe){const Qt=e=>{new Audio(e).play().catch(o=>console.log("äº¤äº’å—é™:",o))},It=["#ef4444","#3b82f6","#f59e0b","#8b5cf6","#10b981","#ec4899","#06b6d4","#f97316","#6366f1","#84cc16","#d946ef"],es=["#ef4444","#f97316","#f59e0b","#10b981","#06b6d4","#3b82f6"],F=(e,t)=>{const o=h(t);return St(()=>{try{const a=localStorage.getItem(e);a&&(o.value=JSON.parse(a))}catch{}}),ue(o,a=>localStorage.setItem(e,JSON.stringify(a)),{deep:!0}),o},ct=x?Object.keys(x):[],w=F("my_ielts_chapter",ct[0]||""),g=F("my_ielts_review",[]),O=F("my_ielts_killed",[]),T=F("my_ielts_mastered",[]),he=F("my_ielts_completed_parts",{}),S=F("my_ielts_custom_dict",{}),Le=F("my_ielts_audio_peek_history",[]),q=F("my_ielts_group_notes",{}),I=h(!1),f=h(!1),A=h(0),xe=re({}),Je=[5,30,720,1440,2880,5760],fe=h([]),M=re(new Set),oe=re(new Set),ts=e=>{oe.has(e)?oe.delete(e):oe.add(e)},ss=e=>{M.has(e)?M.delete(e):M.add(e)},Mt=e=>{const t=Array.from(document.querySelectorAll(".dictation-input")),o=t.indexOf(e.target);e.shiftKey?o>0&&(t[o-1].focus(),setTimeout(()=>t[o-1].select(),10)):o>-1&&o<t.length-1&&t[o+1].focus()},rt=F("my_ielts_page_stories",{}),je=h(!1),E=h([]),_e=h(0),J=h(!1),Et=()=>`${w.value}_Part${A.value}`,os=()=>{const e=Et(),t=rt.value[e];t?t.content&&!Array.isArray(t)?E.value=[{title:"æ–‡ç«  1",content:t.content}]:Array.isArray(t)?E.value=JSON.parse(JSON.stringify(t)):E.value=[{title:"æ–‡ç«  1",content:""}]:E.value=[{title:"æ–‡ç«  1",content:""}],_e.value=0,J.value=!E.value[0].content,je.value=!0},Tt=e=>{_e.value=e,J.value=!E.value[e].content},ns=()=>{const e=E.value.length;E.value.push({title:`æ–‡ç«  ${e+1}`,content:""}),Tt(e),J.value=!0},ls=()=>{if(E.value.length<=1){E.value[0].content="",E.value[0].title="æ–‡ç«  1",z("å·²æ¸…ç©ºå†…å®¹");return}confirm("ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ–‡ç« å—ï¼Ÿ")&&(E.value.splice(_e.value,1),_e.value>=E.value.length&&(_e.value=E.value.length-1))},as=()=>{const e=Et();rt.value={...rt.value,[e]:E.value},J.value=!1,z("æœ¬é¡µæ‰€æœ‰æ–‡ç« å·²ä¿å­˜ ğŸ’¾")},ae=V(()=>E.value[_e.value]||{title:"",content:""}),is=()=>{const e=[];if(ie.value.forEach(o=>{o.list&&o.list.forEach(a=>e.push(a.en))}),e.length===0)return;const t=`Please write a short, interesting story (about 150-200 words) using the following vocabulary. Highlight the vocabulary words in bold within the story.

Words: ${e.join(", ")}`;if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{z("æç¤ºè¯å·²å¤åˆ¶ï¼å»é—® AI å§ ğŸ¤–")});else{const o=document.createElement("textarea");o.value=t,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),z("æç¤ºè¯å·²å¤åˆ¶ï¼å»é—® AI å§ ğŸ¤–")}},ye=h(!1),W=re(new Set),cs=()=>{ye.value=!ye.value,ye.value||W.clear()},rs=e=>{W.has(e)?W.delete(e):W.add(e)};ue([w,A,f,I],()=>{M.clear(),oe.clear(),W.clear()}),ue([w,A,f,I],()=>{M.clear(),oe.clear()});const Ge=V(()=>{if(ie.value.length===0)return!1;const e=[];return ie.value.forEach(t=>t.list.forEach(o=>e.push(o.en))),e.length>0&&e.every(t=>M.has(t))}),At=()=>{const e=[];ie.value.forEach(o=>o.list.forEach(a=>e.push(a.en))),e.every(o=>M.has(o))?M.clear():e.forEach(o=>M.add(o))},ze=e=>e?Array.isArray(e)?ze(e[0]):String(e):"",He=e=>{if(!e)return"";if(Array.isArray(e)){const o=[];return e[4]&&typeof e[4]=="string"&&e[4]!=="-"&&o.push(e[4]),e[5]&&typeof e[5]=="string"&&e[5]!=="-"&&o.push(e[5]),o.join("; ")}if(e.notation)return e.notation;if(e.phrase)return e.phrase;if(e.phrases)return e.phrases;if(e.collocation)return e.collocation;if(e.collocations)return e.collocations;if(e.extend)return e.extend;if(e.extension)return e.extension;if(e.note)return e.note;if(e.usage)return e.usage;if(e.æ‹“å±•)return e.æ‹“å±•;if(e.æ­é…)return e.æ­é…;if(e.çŸ­è¯­)return e.çŸ­è¯­;const t=Object.keys(e);for(const o of t){const a=o.toLowerCase();if((a.includes("not")||a.includes("phr")||a.includes("coll")||a.includes("ext"))&&typeof e[o]=="string"&&a!=="pronunciation"&&a!=="uk_audio"&&a!=="us_audio")return e[o]}return""},ut=e=>{if(S.value[e])return{en:e,zh:S.value[e].zh,pos:"è‡ªé€‰",example:"",notation:"æˆ‘çš„ç”Ÿè¯æœ¬",id:"â˜…",source:"ç”Ÿè¯æœ¬"};let t=0;for(const o in x){const a=x[o].words||x[o].list||[];let i=0,d=0;const n=35,u=45;for(let l=0;l<a.length;l++){const y=a[l];let L=0;for(const b of y)L++;const H=d+L;d>0&&(d>=n||H>u)&&(i++,d=0);for(const b of y){let k="",X="",R="",ce="",at="";Array.isArray(b)?(k=b[0],X=b[1]||"",R=b[2]||"",ce=b[3]||"",at=He(b)):(k=b.word||b.en,X=b.pos||"",R=b.meaning||b.trans||b.zh||"",ce=b.example||"",at=He(b));const Yt=ze(k);if(t++,Yt===e)return{en:Yt,zh:R,pos:X,example:ce,notation:at,id:t,source:`${o} Part ${i+1}`}}d+=L}}return{en:e,zh:"æœªæ‰¾åˆ°é‡Šä¹‰",pos:"",example:"",notation:"",id:"-",source:"æœªçŸ¥"}},us=V(()=>{let e=0;for(const t in x)(x[t].words||x[t].list||[]).forEach(a=>e+=a.length);return e}),Xe=V(()=>{const e=us.value,t=g.value.length,o=new Set([...O.value,...T.value]).size,a=Math.max(0,e-t-o);return{total:e,learning:t,learned:o,unlearned:a}}),ds=V(()=>{const e={};let t=0;for(const o of ct){e[o]=t;const a=x[o];(a.words||a.list||[]).forEach(d=>d.forEach(n=>{t++}))}return e}),vs=V(()=>{if(!w.value||!x[w.value])return[];const e=x[w.value].words||x[w.value].list||[];let t=[],o=ds.value[w.value]||0;return e.forEach((a,i)=>{const d=It[i%It.length];let n=[];a.forEach(u=>{let l="",y="",L="",H="",b="";Array.isArray(u)?(l=u[0],y=u[1]||"",L=u[2]||"",H=u[3]||"",b=He(u)):(l=u.word||u.en,y=u.pos||"",L=u.meaning||u.trans||u.zh||"",H=u.example||"",b=He(u));const k=ze(l);o++;const X=T.value.includes(k),R=O.value.includes(k);n.push({_id:o,en:k,zh:L,pos:y,example:H,notation:b,_color:d,_groupId:i,_isMastered:X,_isKilled:R})}),n.length>0&&t.push(n)}),t}),Ce=V(()=>{if(f.value)return[];const e=vs.value,t=35,o=45;let a=[],i=[],d=0;return e.forEach(n=>{const u=d+n.length;d>0&&(d>=t||u>o)&&(a.push(i),i=[],d=0),i.push(...n),d+=n.length}),i.length>0&&a.push(i),a}),ps=V(()=>f.value?["å…¨éƒ¨é”™é¢˜"]:Ce.value.map((e,t)=>{var n;if(!e||e.length===0)return`Part ${t+1}`;const o=e[0]._id,a=e[e.length-1]._id,i=e.length,d=(n=he.value[w.value])==null?void 0:n.includes(t);return`Part ${t+1} (${o}-${a}) ${i}ä¸ª ${d?"âœ”":""}`})),hs=e=>{const t=x[e];if(!t)return 0;const o=t.words||t.list||[],a=35,i=45;let d=0,n=0;return o.forEach(u=>{const l=u.length,y=n+l;n>0&&(n>=a||y>i)&&(d++,n=0),n+=l}),n>0&&d++,d},fs=V(()=>ct.map(e=>{const t=hs(e),a=(he.value[e]||[]).length,i=t>0&&a>=t;return{value:e,label:e,isDone:i}})),ie=V(()=>{if(f.value){const i=fe.value.length>0?fe.value:g.value,d={5:[],4:[],3:[],2:[],1:[],0:[]};i.forEach((l,y)=>{const L=l.stage>=6?5:l.stage||0;d[L]&&d[L].push({...ut(l.w),_review:l,_id:y+1})});const n=[],u=["é˜¶æ®µ 1 - æ–°æ‰‹/é‡æ¥ (5åˆ†é’Ÿ)","é˜¶æ®µ 2 - å…¥é—¨ (30åˆ†é’Ÿ)","é˜¶æ®µ 3 - ç†Ÿæ‚‰ (12å°æ—¶)","é˜¶æ®µ 4 - æŒæ¡ (1å¤©)","é˜¶æ®µ 5 - ç‰¢å›º (2å¤©)","é˜¶æ®µ 6 - å¤§å¸ˆ (4å¤©+)"];for(let l=5;l>=0;l--)d[l].length>0&&n.push({color:es[l],title:`ğŸ”¥ ${u[l]} [${d[l].length}ä¸ª]`,list:d[l]});return n}const e=Ce.value[A.value]||[];if(e.length===0)return[];let t=[],o=null,a=-999;return e.forEach(i=>{i._groupId!==a&&(o={color:i._color,list:[],groupId:i._groupId},t.push(o),a=i._groupId),o.list.push(i)}),t});function dt(){if(!f.value)return;const e=g.value.filter(t=>t.time<=Date.now());fe.value=JSON.parse(JSON.stringify(e));for(const t in xe)delete xe[t];M.clear(),oe.clear(),W.clear(),it(()=>{document.querySelectorAll(".dictation-input").forEach(o=>{o.value="",o.classList.remove("correct","error")})})}ue(f,e=>{if(e){const t=g.value.filter(o=>o.time<=Date.now());fe.value=JSON.parse(JSON.stringify(t))}else fe.value=[]},{immediate:!0}),ue(g,e=>{if(f.value&&fe.value.length===0){const t=e.filter(o=>o.time<=Date.now());fe.value=JSON.parse(JSON.stringify(t))}});let vt=!1;ue(w,()=>{vt||(A.value=0,f.value=!1)});const B=h(null),K=h(null),Pe=e=>{if(M.has(e)&&!Le.value.includes(e)&&Le.value.push(e),K.value===e){B.value&&(B.value.pause(),B.value.currentTime=0,B.value=null),window.speechSynthesis.cancel(),K.value=null;return}B.value&&(B.value.pause(),B.value=null),window.speechSynthesis.cancel();const t=()=>{const i=new SpeechSynthesisUtterance(e);i.lang="en-US",i.volume=1,i.rate=.85;const d=window.speechSynthesis.getVoices(),n=d.find(u=>u.name.includes("Google US"))||d.find(u=>u.lang.includes("en-US"));n&&(i.voice=n),i.onend=()=>{K.value=null},i.onerror=u=>{console.error("TTS Error:",u),K.value=null},window.speechSynthesis.speak(i)};if(S.value[e]){K.value=e,t();return}let o=w.value;if(f.value&&x){for(const i in x)if((x[i].words||x[i].list||[]).some(u=>u.some(l=>{const y=Array.isArray(l)?l[0]:l.word||l.en;return ze(y)===e}))){o=i;break}}const a=new Audio(`vocabulary/audio/${o}/${e}.mp3`);B.value=a,a.onended=()=>{K.value=null,B.value=null},a.onerror=()=>{B.value=null,t()},a.play().catch(i=>{console.log("MP3æ’­æ”¾å—é˜»æˆ–æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè½¬TTS"),t()}),K.value=e},_s=e=>{K.value!==e&&(M.has(e)||Pe(e))},ys=e=>{if(!e)return console.warn("æ²¡æœ‰æ–‡æœ¬å¯è¯»");B.value&&(B.value.pause(),B.value=null),K.value=null,window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(e);t.lang="en-US",t.rate=.9,t.volume=1;const o=window.speechSynthesis.getVoices(),a=o.find(i=>i.name.includes("Google US"))||o.find(i=>i.lang.includes("en-US"));a&&(t.voice=a),window._debug_utterance=t,t.onerror=i=>{console.error("æœ—è¯»æŠ¥é”™:",i),i.error!=="canceled"&&i.error!=="interrupted"&&alert("è¯­éŸ³æ’­æ”¾å‡ºé”™: "+i.error)},setTimeout(()=>{window.speechSynthesis.speak(t),console.log("æ­£åœ¨æ’­æ”¾:",e,"ä½¿ç”¨è¯­éŸ³:",a?a.name:"ç³»ç»Ÿé»˜è®¤")},10)};function gs(e,t){let o=t.target.value.trim().toLowerCase(),a=e.en.toLowerCase();const i=n=>n.replace(/[\u2018\u2019`]/g,"'").replace(/\s+/g," "),d=i(o)===i(a);if(xe[e.en]=d?"correct":"error",d){if(M.has(e.en)||M.add(e.en),!f.value){Ie("learn",1),T.value.includes(e.en)||(T.value.push(e.en),Ie("kill",1));const u=g.value.findIndex(l=>l.w===e.en);u>-1&&g.value.splice(u,1);return}const n=g.value.findIndex(u=>u.w===e.en);if(n>-1){Ie("review",1);const u=g.value[n];u.stage+=1,u.stage>=Je.length?(g.value.splice(n,1),O.value.includes(e.en)||(O.value.push(e.en),Ie("kill",1))):(u.time=Date.now()+Je[u.stage]*6e4,g.value=[...g.value])}}else if(M.has(e.en)||M.add(e.en),!f.value)T.value.includes(e.en)&&(T.value=T.value.filter(u=>u!==e.en)),g.value.find(u=>u.w===e.en)||g.value.push({w:e.en,stage:0,time:Date.now()+Je[0]*6e4});else{const n=g.value.findIndex(u=>u.w===e.en);n>-1&&(g.value[n].stage=0,g.value[n].time=Date.now()+Je[0]*6e4)}}const Dt=e=>{if(O.value.includes(e)){if(!confirm(`ç¡®å®šè¦æ’¤é”€æ–©æ€ï¼Œæ¢å¤ "${e}" å—ï¼Ÿ`))return;O.value=O.value.filter(o=>o!==e),z(`"${e}" å·²æ¢å¤ ğŸº`);return}if(!confirm(`ç¡®å®šè¦æ–©æ€ "${e}" å—ï¼Ÿ
(å®ƒå°†å˜ä¸ºç´«è‰²å½’æ¡£çŠ¶æ€)`))return;O.value.push(e),Ie("kill",1);const t=g.value.findIndex(o=>o.w===e);t>-1&&g.value.splice(t,1),T.value.includes(e)&&(T.value=T.value.filter(o=>o!==e))};function ms(){const e={k:O.value,r:g.value,c:he.value,m:T.value,d:S.value,s:N.value,n:q.value},t=new Blob([JSON.stringify(e)],{type:"application/json"}),o=URL.createObjectURL(t),a=document.createElement("a");a.href=o,a.download=`ielts_data_${new Date().toISOString().slice(0,10)}.json`,a.click()}const bs=e=>{if(navigator.clipboard)navigator.clipboard.writeText(e).then(()=>{});else{const t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}};function ks(){document.getElementById("fileInput").click()}function xs(e){const t=e.target.files[0];if(!t)return;const o=new FileReader;o.onload=a=>{try{const i=JSON.parse(a.target.result);(i.k||i.r||i.d)&&(i.k&&(O.value=i.k),i.r&&(g.value=i.r),i.c&&(he.value=i.c),i.m&&(T.value=i.m),i.d&&(S.value=i.d),i.s&&(N.value=i.s),i.n&&(q.value=i.n),alert("åŒæ­¥æˆåŠŸ"),location.reload())}catch{alert("æ–‡ä»¶æ ¼å¼é”™è¯¯")}},o.readAsText(t),e.target.value=""}const ge=h(!1),Ze=h(""),we=h(!1),Ye=h(""),qe=h(""),pt=h(!1),Lt=h("");h(!1);const Se=h(!1),ht=h(null);let Qe=null;const $e=h("week"),N=F("my_ielts_stats_history",{}),Oe=()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},Ie=(e,t=1)=>{const o=Oe();N.value[o]||(N.value[o]={duration:0,review:0,kill:0,add:0}),typeof N.value[o][e]>"u"&&(N.value[o][e]=0),N.value[o][e]+=t,N.value={...N.value}},zt=async()=>{if(ht.value){Qe&&(Qe.destroy(),Qe=null);try{const{Chart:e,registerables:t}=await oo(()=>import("https://cdn.jsdelivr.net/npm/chart.js/+esm"),[],import.meta.url);e.register(...t);const o=document.body.classList.contains("dark")||document.documentElement.classList.contains("dark"),a=o?"#cbd5e1":"#666",i=o?"#334155":"#e5e7eb",d=$e.value==="week"?7:30,n=[],u=[],l=[],y=[],L=[],H=new Date;for(let b=d-1;b>=0;b--){const k=new Date(H.getTime()-b*24*60*60*1e3),X=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-${String(k.getDate()).padStart(2,"0")}`;n.push(String(k.getDate())+"æ—¥");const R=N.value[X]||{duration:0,review:0,learn:0,kill:0};u.push(Math.round(R.duration/60)),l.push(R.review||0),y.push(R.learn||0),L.push(R.kill||0)}Qe=new e(ht.value,{type:"bar",data:{labels:n,datasets:[{label:"æ–°å­¦ (ä¸ª)",data:y,backgroundColor:"rgba(16, 185, 129, 0.6)",borderColor:"#10b981",borderWidth:1,yAxisID:"y",order:4,stack:"combined"},{label:"å¤ä¹  (ä¸ª)",data:l,backgroundColor:"rgba(59, 130, 246, 0.6)",borderColor:"#3b82f6",borderWidth:1,yAxisID:"y",order:3,stack:"combined"},{label:"æ–©æ€ (ä¸ª)",data:L,backgroundColor:"rgba(239, 68, 68, 0.6)",borderColor:"#ef4444",borderWidth:1,yAxisID:"y",order:2,stack:"combined"},{type:"line",label:"ä¸“æ³¨ (åˆ†)",data:u,borderColor:"#f59e0b",backgroundColor:"#f59e0b",borderWidth:2,pointRadius:3,tension:.3,yAxisID:"y1",order:1}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:a}}},scales:{x:{ticks:{color:a},grid:{color:i}},y:{type:"linear",display:!0,position:"left",stacked:!0,title:{display:!0,text:"å•è¯é‡",color:a},ticks:{color:a},grid:{color:i}},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},title:{display:!0,text:"åˆ†é’Ÿ",color:a},ticks:{color:a}}}}})}catch(e){console.error("å›¾è¡¨åŠ è½½å¤±è´¥:",e)}}};ue(Se,e=>{e&&setTimeout(zt,100)}),ue($e,()=>{Se.value&&zt()});function Cs(){Ze.value="",ge.value=!0,setTimeout(()=>{var e;return(e=document.getElementById("custom-word-input"))==null?void 0:e.focus()},100)}function Pt(){const e=Ze.value;if(!e||!e.trim()){ge.value=!1;return}const t=e.trim();ge.value=!1,setTimeout(()=>{ut(t).zh==="æœªæ‰¾åˆ°é‡Šä¹‰"?(qe.value=t,Ye.value="",we.value=!0,setTimeout(()=>{var a;return(a=document.getElementById("custom-meaning-input"))==null?void 0:a.focus()},100)):Wt(t)},200)}function Ot(){const e=Ye.value.trim();e&&(we.value=!1,S.value={...S.value,[qe.value]:{zh:e}},Wt(qe.value))}function Wt(e){ge.value=!1,we.value=!1;const t=g.value.findIndex(o=>o.w===e);t>-1?(g.value[t].stage=0,g.value[t].time=Date.now(),z(`"${e}" å·²é‡ç½®å¤ä¹ è¿›åº¦ï¼ğŸ”„`)):(g.value.push({w:e,stage:0,time:Date.now()}),z(`"${e}" å·²åŠ å…¥å¤ä¹ ï¼âœ…`)),f.value&&dt()}function z(e){Lt.value=e,pt.value=!0,setTimeout(()=>{pt.value=!1},1500)}const We=h(!1),Q=re({oldWord:"",newWord:"",newZh:""}),ws=e=>{Q.oldWord=e.en,Q.newWord=e.en,Q.newZh=e.zh,We.value=!0},Ss=()=>{const e=Q.oldWord,t=Q.newWord.trim(),o=Q.newZh.trim();if(!t)return alert("å•è¯ä¸èƒ½ä¸ºç©º");if(e===t)S.value[e]?S.value[e].zh=o:S.value={...S.value,[e]:{zh:o}},z("é‡Šä¹‰å·²æ›´æ–°");else{if(S.value[e]){const i={...S.value};delete i[e],i[t]={zh:o},S.value=i}else S.value={...S.value,[t]:{zh:o}};const a=g.value.findIndex(i=>i.w===e);a>-1&&(g.value[a].w=t),O.value.includes(e)&&(O.value=O.value.filter(i=>i!==e),O.value.push(t)),T.value.includes(e)&&(T.value=T.value.filter(i=>i!==e),T.value.push(t)),z(`å·²ä¿®æ­£: ${e} -> ${t}`)}f.value&&dt(),We.value=!1},me=h(!1),et=h(window.innerWidth-320-5),ft=h(window.innerHeight*.26),ee=h(null);let C=null,_t=!1,yt=!1,Nt=0,Rt=0,Me=null;const Ut=e=>{const t=ee.value;if(!t)return{x:0,y:0};const o=t.getBoundingClientRect();return{x:e.clientX-o.left,y:e.clientY-o.top}},gt=()=>{if(!ee.value)return;const e=ee.value,t=e.getBoundingClientRect(),o=Math.ceil(t.width),a=Math.ceil(t.height);o<1||a<1||(e.width!==o||e.height!==a?(e.width=o,e.height=a,C=e.getContext("2d"),C&&(C.strokeStyle="#ffffff",C.lineWidth=3,C.lineCap="round",C.lineJoin="round")):C||(C=e.getContext("2d")))},$s=e=>{if(be.value||(e.cancelable&&e.preventDefault(),!ee.value)||(C||gt(),!C))return;if(_t=!0,e.target.setPointerCapture&&e.pointerId)try{e.target.setPointerCapture(e.pointerId)}catch{}C.strokeStyle="#ffffff",C.lineWidth=3,C.beginPath();const{x:o,y:a}=Ut(e);C.moveTo(o,a)},Is=e=>{if(!_t||!C)return;e.cancelable&&e.preventDefault();const{x:t,y:o}=Ut(e);C.lineTo(t,o),C.stroke()},Bt=e=>{if(_t=!1,e&&e.target.releasePointerCapture&&e.pointerId)try{e.target.releasePointerCapture(e.pointerId)}catch{}},mt=()=>{!ee.value||!C||C.clearRect(0,0,ee.value.width,ee.value.height)},Ms=e=>{e.target.tagName!=="BUTTON"&&(yt=!0,Nt=e.clientX-et.value,Rt=e.clientY-ft.value,window.addEventListener("mousemove",Kt),window.addEventListener("mouseup",Vt))},Kt=e=>{yt&&(et.value=e.clientX-Nt,ft.value=e.clientY-Rt)},Vt=()=>{yt=!1,window.removeEventListener("mousemove",Kt),window.removeEventListener("mouseup",Vt)},Ft=()=>{me.value=!me.value,me.value?(it(()=>{gt(),ee.value&&!Me&&(Me=new ResizeObserver(()=>{gt()}),Me.observe(ee.value))}),window.addEventListener("keydown",Jt)):(Me&&(Me.disconnect(),Me=null),window.removeEventListener("keydown",Jt))},Jt=e=>{me.value&&e.code==="Space"&&(e.preventDefault(),mt())};function Es(){if(g.value.length===0){alert("å½“å‰æ²¡æœ‰é”™é¢˜è®°å½•");return}let e=`My IELTS Mistakes

`;[...g.value].sort((d,n)=>d.time-n.time).forEach((d,n)=>{const u=ut(d.w);e+=`${n+1}. ${u.en} ${u.pos}
   [ä¹‰] ${u.zh}
`,u.example&&(e+=`   [ä¾‹] ${u.example}
`),u.notation&&(e+=`   [æ³¨] ${u.notation}
`),e+=`
`});const o=new Blob([e],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download="mistakes.txt",i.click(),URL.revokeObjectURL(a)}const jt=V(()=>(he.value[w.value]||[]).includes(A.value)),Ts=()=>{const e=w.value,t=A.value,o={...he.value};o[e]||(o[e]=[]),o[e].includes(t)?o[e]=o[e].filter(a=>a!==t):o[e].push(t),he.value=o},Gt=e=>{const t=A.value+e;t>=0&&t<Ce.value.length&&(A.value=t,window.scrollTo({top:0,behavior:"smooth"}))},As=[.0834,10,15,25,30,45,60],tt=F("my_ielts_focus_dur",30),Ee=()=>Math.round(tt.value*60),be=h(!1),bt=h(!1),P=h(Ee()),te=h("idle"),D=h(!1);let j=null;const Ht=e=>{const t=Math.floor(e/60),o=e%60;return`${t<10?"0"+t:t}:${o<10?"0"+o:o}`},Ne=()=>{localStorage.setItem("my_ielts_pomo",JSON.stringify({seconds:P.value,isBreak:D.value,state:te.value,timestamp:Date.now()}))},Ds=()=>{j&&clearInterval(j),j=null,te.value="paused",Ne()},Te=e=>{D.value=!0,P.value=Math.round(e*60),be.value=!1,st()},Ls=()=>{D.value=!1,P.value=Ee(),be.value=!1,st()},zs=()=>{te.value==="idle"&&!D.value&&(P.value=Ee())},Ps=()=>{be.value=!1,Ne()},st=()=>{te.value!=="running"&&(j&&clearInterval(j),P.value<=0&&(P.value=D.value?5*60:Ee()),te.value="running",Ne(),j=setInterval(()=>{if(P.value>0){P.value--;const e=D.value?"â˜•":"ğŸ…",t=D.value?"ä¼‘æ¯":"ä¸“æ³¨";document.title=`${Ht(P.value)} ${e} ${t}`,D.value||Ie("duration",1),Ne()}else{kt(!1);const e=D.value;bt.value=e,Qt(e?Xa:Ha),be.value=!0,document.title="ğŸ”” æ—¶é—´åˆ°ï¼",D.value=!e,P.value=D.value?5*60:Ee(),Ne()}},1e3))},kt=(e=!0)=>{j&&(clearInterval(j),j=null),te.value="idle",localStorage.removeItem("my_ielts_pomo"),e&&(P.value=D.value?5*60:Ee(),document.title="MyIELTS")};qs(()=>{j&&clearInterval(j)}),St(()=>{const e=localStorage.getItem("my_ielts_pomo");if(e)try{const t=JSON.parse(e);if(D.value=t.isBreak,t.state==="paused")P.value=t.seconds,te.value="paused";else if(t.state==="running"){const o=Date.now(),a=Math.floor((o-t.timestamp)/1e3),i=t.seconds-a;i>0?(P.value=i,st()):(P.value=0,kt(!1))}}catch(t){console.error("ç•ªèŒ„é’Ÿæ¢å¤å¤±è´¥",t)}window.speechSynthesis.getVoices()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&te.value});const Re=h(!1),Ae=h(""),G=h([]),Os=()=>{Ae.value="",G.value=[],Re.value=!0,setTimeout(()=>{var e;return(e=document.getElementById("global-search-input"))==null?void 0:e.focus()},100)},ne=h(-1),Xt=e=>{if(G.value.length===0)return;const t=G.value.length;ne.value===-1?ne.value=e>0?0:t-1:ne.value=(ne.value+e+t)%t,it(()=>{const o=document.querySelector(".search-item.selected");o&&o.scrollIntoView({block:"nearest",behavior:"smooth"})})},Ws=()=>{ne.value=-1;const e=Ae.value.trim().toLowerCase();if(!e){G.value=[];return}const t=[],o=new Set;for(const a in S.value)a.toLowerCase().includes(e)&&(t.push({en:a,zh:S.value[a].zh,source:"æˆ‘çš„ç”Ÿè¯æœ¬",isCustom:!0}),o.add(a));if(x)for(const a in x){const i=x[a].words||x[a].list||[];let d=0,n=0;const u=35,l=45;for(let y=0;y<i.length;y++){const L=i[y];let H=0;for(const k of L)H++;const b=n+H;n>0&&(n>=u||b>l)&&(d++,n=0);for(const k of L){let X="",R="";Array.isArray(k)?(X=k[0],R=k[2]||""):(X=k.word||k.en,R=k.meaning||k.trans||k.zh||"");const ce=ze(X);ce.toLowerCase().includes(e)&&!o.has(ce)&&(t.push({en:ce,zh:R,source:`${a} Â· Part ${d+1}`,chapter:a,partIdx:d,isCustom:!1}),o.add(ce))}n+=H}if(t.length>100)break}t.sort((a,i)=>{const d=a.en.toLowerCase(),n=i.en.toLowerCase();if(d===e&&n!==e)return-1;if(n===e&&d!==e)return 1;const u=d.startsWith(e),l=n.startsWith(e);return u&&!l?-1:l&&!u?1:d.length-n.length}),G.value=t.slice(0,50)},Ns=()=>{const e=Ae.value.trim().toLowerCase();if(!e||G.value.length===0)return;if(ne.value!==-1){const o=G.value[ne.value];if(o){Ue(o);return}}const t=G.value.find(o=>o.en.toLowerCase()===e);Ue(t||G.value[0])},Rs=e=>{if(!e.source||e.source==="ç”Ÿè¯æœ¬"||e.source==="æœªçŸ¥"){z("è¯¥è¯å±äºè‡ªå®šä¹‰ç”Ÿè¯ï¼Œæ— å›ºå®šç« èŠ‚ä½ç½®");return}const t=" Part ",o=e.source.lastIndexOf(t);if(o===-1){console.warn("æ— æ³•è§£æå‡ºå¤„æ ¼å¼:",e.source);return}const a=e.source.substring(0,o),i=e.source.substring(o+t.length),d=parseInt(i)-1,n={en:e.en,chapter:a,partIdx:d,isCustom:!1};Ue(n)},Ue=e=>{e.isCustom||e.partIdx===void 0||(Re.value=!1,f.value=!1,vt=!0,w.value=e.chapter,A.value=e.partIdx,it(()=>{vt=!1}),setTimeout(()=>{const t="word-row-"+e.en.replace(/\s+/g,"_"),o=document.getElementById(t);o?(o.scrollIntoView({behavior:"smooth",block:"center"}),o.classList.add("highlight-flash"),setTimeout(()=>o.classList.remove("highlight-flash"),2e3)):console.warn("æœªæ‰¾åˆ°å…ƒç´ :",t)},400))},ot=re({}),Us=e=>{ot[e]=!ot[e]},Be=e=>!e||!e.list||e.list.length===0?!1:e.list.every(t=>W.has(t.en)),Bs=e=>{const t=Be(e);e.list.forEach(o=>{t?W.delete(o.en):W.add(o.en)})},Ks=()=>{const e=[];if(ie.value.forEach(o=>{o.list&&o.list.forEach(a=>e.push(a.en))}),e.length===0)return z("å½“å‰æ²¡æœ‰å•è¯å¯å¤åˆ¶");const t=e.join(`
`);if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{z(`å·²å¤åˆ¶ ${e.length} ä¸ªå•è¯! ğŸ“‹`)});else{const o=document.createElement("textarea");o.value=t,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),z(`å·²å¤åˆ¶ ${e.length} ä¸ªå•è¯! ğŸ“‹`)}},Vs=e=>{if(!e||!e.list||e.list.length===0)return;const t=e.list.map(o=>o.en).join(`
`);if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{z(`å·²å¤åˆ¶è¯¥ç»„ ${e.list.length} ä¸ªå•è¯! ğŸ“‹`)});else{const o=document.createElement("textarea");o.value=t,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),z(`å·²å¤åˆ¶è¯¥ç»„ ${e.list.length} ä¸ªå•è¯! ğŸ“‹`)}},Zt=h(window.innerWidth),Fs=()=>Zt.value=window.innerWidth;St(()=>window.addEventListener("resize",Fs));const Js=V(()=>me.value?et.value>Zt.value/2-100:!1),Ke=h(!1),xt=h(""),se=re({title:"",content:""}),nt=e=>`${w.value}_${e}`,Ct=e=>{const t=nt(e);xt.value=t;const o=q.value[t]||{title:"",content:""};se.title=o.title,se.content=o.content,Ke.value=!0},Ve=h(!1),De=re({title:"",content:"",groupId:-1}),wt=e=>{if(!e)return"";try{return no.parse(e)}catch{return e}},js=e=>{const t=nt(e),o=q.value[t];if(!o||!o.title&&!o.content){Ct(e);return}De.title=o.title||"è¯ä¹‰è¾¨æ",De.content=o.content,De.groupId=e,Ve.value=!0},Gs=()=>{Ve.value=!1,Ct(De.groupId)},Hs=()=>{if(!se.title.trim()&&!se.content.trim()){const e={...q.value};delete e[xt.value],q.value=e}else q.value={...q.value,[xt.value]:{title:se.title.trim(),content:se.content}};Ke.value=!1},lt=e=>{const t=nt(e),o=q.value[t];return o&&(o.title&&o.title.trim()||o.content&&o.content.trim())},Xs=e=>{const t=nt(e),o=q.value[t];return o?o.title&&o.title.trim()?o.title.trim():o.content&&o.content.trim()?"ğŸ“ è¯ä¹‰è¾¨æ":"":""},Zs=e=>{confirm(`ç¡®è®¤ç§»é™¤ "${e}" çš„å¬è§‰ä¾èµ–æ ‡è®°å—ï¼Ÿ`)&&(Le.value=Le.value.filter(t=>t!==e))};return(e,t)=>{var o,a,i,d;return r(),c(ve,null,[s("div",lo,[s("div",ao,[s("div",io,[s("div",co,[s("div",ro,[s("button",{class:$(["tab-btn",{active:!f.value}]),onClick:t[0]||(t[0]=n=>f.value=!1)},"ğŸ“– å­¦ä¹ ",2),s("button",{class:$(["tab-btn review-tab",{active:f.value}]),onClick:t[1]||(t[1]=n=>f.value=!0)},[Y(" ğŸ”¥ å¤ä¹ "),de(g).filter(n=>n.time<Date.now()).length>0?(r(),c("span",uo)):p("",!0)],2)]),s("label",vo,[U(s("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=n=>I.value=n)},null,512),[[Qs,I.value]]),s("span",null,v(I.value?"ğŸ™ï¸ ":"ğŸ‘€ "),1)]),I.value?(r(),c("button",{key:0,class:"mobile-only tool-btn-simple",onClick:At,style:{"margin-left":"10px","font-size":"20px"},title:Ge.value?"å…¨éƒ¨éšè—":"å…¨éƒ¨æ˜¾ç¤º"},v(Ge.value?"ğŸ“–":"ğŸ™ˆ"),9,po)):p("",!0)]),s("div",ho,[f.value?p("",!0):(r(),c("div",fo,[U(s("select",{"onUpdate:modelValue":t[3]||(t[3]=n=>qt(w)?w.value=n:null),class:"sel-chap"},[(r(!0),c(ve,null,ke(fs.value,n=>(r(),c("option",{key:n.value,value:n.value},v(n.label)+v(n.isDone?"âœ…":""),9,_o))),128))],512),[[$t,de(w)]]),U(s("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>A.value=n),class:"sel-part"},[(r(!0),c(ve,null,ke(ps.value,(n,u)=>(r(),c("option",{key:u,value:u},v(n),9,yo))),128))],512),[[$t,A.value]])])),s("div",{class:$(["stats-bar",{"compact-mode":!f.value}])},[f.value?(r(),c("span",go,"ğŸ“š "+v(Xe.value.total),1)):p("",!0),s("span",mo,"ğŸ”¥ "+v(Xe.value.learning),1),s("span",bo,"âœ… "+v(Xe.value.learned),1),s("span",ko,"ğŸŒ‘ "+v(Xe.value.unlearned),1)],2)]),s("div",xo,[f.value?(r(),c("button",{key:0,onClick:t[5]||(t[5]=n=>Se.value=!0),class:"btn action-btn",title:"å­¦ä¹ ç»Ÿè®¡"},"ğŸ“Š")):p("",!0),s("button",{onClick:Ft,class:$(["btn action-btn desktop-only",{"active-pad":me.value}]),title:"æ‰“å¼€/å…³é—­è‰ç¨¿æ¿"},"ğŸ–Šï¸",2),f.value?(r(),c("button",{key:1,onClick:Es,class:"btn action-btn special-btn desktop-only",title:"å¯¼å‡ºé”™é¢˜æ–‡æœ¬ (TXT)"},"ğŸ“¥ ")):p("",!0),s("button",{onClick:ms,class:"btn action-btn",title:"å¯¼å‡º/å¤‡ä»½è¿›åº¦ (JSON)"},"â¬‡ï¸ "),s("button",{onClick:ks,class:"btn action-btn",style:{"margin-left":"8px"},title:"å¯¼å…¥/æ¢å¤è¿›åº¦"},"â¬†ï¸ "),s("input",{type:"file",id:"fileInput",hidden:"",onChange:xs},null,32),s("div",{class:$(["pomo-compact",{"break-mode":D.value}])},[!D.value&&te.value==="idle"?U((r(),c("select",{key:0,"onUpdate:modelValue":t[6]||(t[6]=n=>qt(tt)?tt.value=n:null),onChange:zs,class:"pomo-select",title:"ç‚¹å‡»è°ƒæ•´ä¸“æ³¨æ—¶é•¿"},[(r(),c(ve,null,ke(As,n=>s("option",{key:n,value:n},v(n<1?"âš¡ 05s":(n<10?"0"+n:n)+":00"),9,Co)),64))],544)),[[$t,de(tt)]]):(r(),c("span",wo,v(Ht(P.value)),1)),te.value!=="running"?(r(),c("button",{key:2,onClick:st,class:"pomo-btn-small play-btn"},"â–¶")):(r(),c("button",{key:3,onClick:Ds,class:"pomo-btn-small pause-btn"},"â¸")),s("button",{onClick:t[7]||(t[7]=n=>kt(!0)),class:"pomo-btn-small stop-btn"},"â¹")],2)])])]),be.value?(r(),c("div",{key:0,class:"modal-overlay",onClick:m(Ps,["self"])},[s("div",$o,[s("button",{class:"modal-close-icon",onClick:t[8]||(t[8]=n=>be.value=!1)},"âœ•"),s("div",Io,v(D.value?"ğŸ”‹":"ğŸ‰"),1),s("h2",Mo,v(bt.value?"å……ç”µå®Œæ¯•":"ä¸“æ³¨å®Œæˆ"),1),bt.value?(r(),c("div",To,[s("button",{onClick:Ls,class:"modal-btn focus-btn"},"å¼€å§‹ä¸“æ³¨")])):(r(),c("div",Eo,[s("button",{onClick:t[9]||(t[9]=n=>Te(3)),class:"modal-btn break-btn"},"3m"),s("button",{onClick:t[10]||(t[10]=n=>Te(5)),class:"modal-btn break-btn"},"5m"),s("button",{onClick:t[11]||(t[11]=n=>Te(10)),class:"modal-btn break-btn"},"10m"),s("button",{onClick:t[12]||(t[12]=n=>Te(15)),class:"modal-btn break-btn"},"15m"),s("button",{onClick:t[13]||(t[13]=n=>Te(25)),class:"modal-btn long-break-btn"},"25m"),s("button",{onClick:t[14]||(t[14]=n=>Te(.05)),class:"modal-btn focus-btn"},"âš¡ 03s (æµ‹è¯•)")]))])],8,So)):p("",!0),ie.value.length>0?(r(),c("div",Ao,[s("div",Do,[Lo,s("div",zo,[Y(" å•è¯ "),f.value?(r(),c("button",{key:0,class:"toggle-source-btn",onClick:cs,title:ye.value?"éšè—å…¨éƒ¨å‡ºå¤„":"æ˜¾ç¤ºå…¨éƒ¨å‡ºå¤„"},[ye.value?(r(),c("svg",Oo,Ro)):(r(),c("svg",Uo,Vo))],8,Po)):p("",!0),f.value?p("",!0):(r(),c("button",{key:1,class:"toggle-source-btn",onClick:Ks,title:"å¤åˆ¶æœ¬é¡µæ‰€æœ‰å•è¯",style:{"margin-left":"4px"}}," ğŸ“‹ "))]),Fo,s("div",Jo,[Y(" è¯ä¹‰ "),I.value?(r(),c("button",{key:0,class:"toggle-all-btn",onClick:At,title:Ge.value?"å…¨éƒ¨éšè—":"å…¨éƒ¨æ˜¾ç¤º"},v(Ge.value?"ğŸ“–":"ğŸ™ˆ"),9,jo)):p("",!0)]),I.value?p("",!0):(r(),c("div",Go,"ä¾‹å¥")),I.value?p("",!0):(r(),c("div",Ho,"æ‹“å±•")),Xo])])):p("",!0),s("div",Zo,[ie.value.length===0?(r(),c("div",Yo,v(f.value?"æš‚æ— é”™é¢˜ ğŸ‰":"æœ¬ç« æ•°æ®åŠ è½½ä¸­"),1)):p("",!0),(r(!0),c(ve,null,ke(ie.value,(n,u)=>(r(),c("div",{key:u,class:"vocab-block",style:Z({borderLeftColor:n.color})},[f.value?p("",!0):(r(),c("div",{key:0,class:$(["group-note-bar",{"has-note":lt(n.groupId)}]),style:Z({backgroundColor:lt(n.groupId)?n.color+"15":"transparent",borderBottom:lt(n.groupId)?"1px solid "+n.color+"20":"none"})},[s("div",{class:"note-title",onClick:l=>js(n.groupId)},[lt(n.groupId)?(r(),c("span",{key:0,class:"note-exist-text",style:Z({color:n.color})},[Qo,Y(" "+v(Xs(n.groupId)),1)],4)):(r(),c("span",en," â• æ·»åŠ è¾¨æç¬”è®° "))],8,qo),s("div",tn,[s("button",{class:"note-action-btn copy-group-btn",onClick:m(l=>Vs(n),["stop"]),title:"å¤åˆ¶æœ¬ç»„å•è¯"}," ğŸ“‹ ",8,sn),s("button",{class:"note-action-btn",onClick:m(l=>Ct(n.groupId),["stop"]),title:"ç¼–è¾‘ç¬”è®°"}," âš™ï¸ ",8,on)])],6)),f.value&&n.title?(r(),c("div",{key:1,class:"group-title",style:Z([{color:n.color,backgroundColor:n.color+"15"},{cursor:"pointer",display:"flex","align-items":"center","user-select":"none"}]),onClick:l=>Us(n.title)},[s("span",ln,v(n.title),1),s("button",{class:"stage-source-btn",onClick:m(l=>Bs(n),["stop"]),title:Be(n)?"éšè—æœ¬é˜¶æ®µå‡ºå¤„":"æ˜¾ç¤ºæœ¬é˜¶æ®µå‡ºå¤„",style:Z({color:Be(n)?n.color:"#9ca3af",opacity:Be(n)?1:.5})},[(r(),c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:Be(n)?"currentColor":"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},dn,8,cn))],12,an),vn,s("button",{class:"collapse-btn",style:Z({color:n.color,borderColor:n.color})},v(ot[n.title]?"ğŸ”½ å±•å¼€":"ğŸ”¼ æ”¶èµ·"),5)],12,nn)):p("",!0),U(s("div",null,[(r(!0),c(ve,null,ke(n.list,l=>(r(),c("div",{key:l.en,class:$(["grid-layout row-item",{"mastered-row":l._isMastered&&!l._isKilled&&!f.value,"killed-row":l._isKilled&&!f.value}]),id:"word-row-"+l.en.replace(/\s+/g,"_")},[s("div",hn,[Y(v(f.value?l.id:l._id)+" ",1),(l._isMastered||l._isKilled)&&!f.value?(r(),c("span",{key:0,class:"status-icon",style:Z({color:l._isKilled?"#a855f7":"#10b981",fontWeight:"bold"})}," âœ” ",4)):p("",!0)]),s("div",fn,[s("div",_n,[I.value?(r(),c("div",Wn,[s("span",{class:$(["speaker",{playing:K.value===l.en}]),onClick:m(y=>Pe(l.en),["stop"])},v(K.value===l.en?"â¸ï¸":"ğŸ”Š"),11,Nn),s("div",Rn,[s("input",{type:"text",class:$(["dictation-input",[xe[l.en],{"mastered-input":l._isMastered&&!f.value}]]),placeholder:"è¾“å…¥...",onChange:y=>gs(l,y),onInput:y=>xe[l.en]="",onFocus:y=>_s(l.en),onKeydown:[t[15]||(t[15]=pe(m(()=>{},["stop"]),["space"])),pe(m(Mt,["prevent"]),["tab"]),pe(m(Mt,["prevent"]),["enter"])],autocomplete:"off"},null,42,Un),xe[l.en]==="error"?(r(),c("div",Bn,"âŒ "+v(l.en),1)):p("",!0),oe.has(l.en)?(r(),c("div",Kn,"ğŸ‘€ "+v(l.en),1)):p("",!0)]),s("button",{class:"peek-btn",onClick:m(y=>ts(l.en),["stop"]),title:oe.has(l.en)?"éšè—ç­”æ¡ˆ":"å·çœ‹ç­”æ¡ˆ"},v(oe.has(l.en)?"ğŸ™ˆ":"ğŸ‘ï¸"),9,Vn)])):(r(),c("div",yn,[s("div",gn,[s("span",{class:"en-text",onClick:m(y=>Pe(l.en),["stop"]),style:{cursor:"pointer"},title:"ç‚¹å‡»å‘éŸ³"},v(l.en),9,mn),s("span",{class:$(["speaker",{playing:K.value===l.en}]),onClick:m(y=>Pe(l.en),["stop"])},v(K.value===l.en?"â¸ï¸":"ğŸ”Š"),11,bn),de(Le).includes(l.en)?(r(),c("span",{key:0,onClick:m(y=>Zs(l.en),["stop"]),title:"è¯¥è¯æ›¾ä¾èµ–å¬éŸ³å›å¿† (å¬è§‰å°è®°)",style:{"font-size":"14px","margin-left":"6px",cursor:"help"}}," ğŸ‘‚ ",8,kn)):p("",!0),l.source!=="ç”Ÿè¯æœ¬"?(r(),c("button",{key:1,class:"copy-btn",onClick:m(y=>bs(l.en),["stop"]),title:"ç‚¹å‡»å¤åˆ¶"},"ğŸ“‹",8,xn)):p("",!0),f.value&&l.notation==="æˆ‘çš„ç”Ÿè¯æœ¬"?(r(),c("button",{key:2,class:"copy-btn edit-btn",onClick:m(y=>ws(l),["stop"]),title:"ä¿®æ”¹å•è¯/é‡Šä¹‰"},"âœ",8,Cn)):p("",!0),f.value&&!ye.value&&l.source!=="ç”Ÿè¯æœ¬"?(r(),c("button",{key:3,class:"copy-btn location-btn",onClick:m(y=>rs(l.en),["stop"]),title:W.has(l.en)?"éšè—å‡ºå¤„":"æŸ¥çœ‹å‡ºå¤„",style:Z({color:W.has(l.en)?"#3b82f6":"",opacity:W.has(l.en)?"1":""})},[W.has(l.en)?(r(),c("svg",Sn,Mn)):(r(),c("svg",En,Dn))],12,wn)):p("",!0)]),ye.value||W.has(l.en)?(r(),c("div",{key:0,class:"word-source-row clickable-source",onClick:m(y=>Rs(l),["stop"]),title:"ç‚¹å‡»è·³è½¬åˆ°åŸæ–‡ä½ç½® ğŸš€"}," ğŸ“ "+v(l.source)+" âœ ",9,Ln)):p("",!0),f.value&&l._review?(r(),c("div",zn,[l._review.time<Date.now()?(r(),c("span",Pn,"å¾…å¤ä¹ ")):(r(),c("span",On,v(Math.round((l._review.time-Date.now())/6e4))+"m",1))])):p("",!0)]))]),s("div",Fn,v(l.pos),1),s("button",{class:"mobile-only mobile-kill",onClick:y=>Dt(l.en),style:Z(I.value?{top:"auto",bottom:"10px",right:"10px",background:"#fff",border:"1px solid #eee",borderRadius:"50%",width:"30px",height:"30px"}:{})},v(l._isKilled?"â†º":"âœ•"),13,Jn)]),s("div",jn,v(l.pos),1),s("div",{class:$(["col-zh",{"interactive-zh":I.value}]),onClick:y=>I.value?ss(l.en):null},[s("div",{class:$(["zh-text",{"blur-zh":I.value&&!M.has(l.en)&&l.pos!=="è‡ªé€‰"}])},v(l.zh),3),l.notation&&!I.value?(r(),c("div",Hn,v(l.notation),1)):p("",!0)],10,Gn),I.value?p("",!0):(r(),c("div",Xn,[s("div",Zn,[s("span",null,v(l.example),1),l.example?(r(),c("span",{key:0,class:"speaker-small",onClick:m(y=>ys(l.example),["stop"]),title:"è¯»ä¾‹å¥"},"ğŸ”‰",8,Yn)):p("",!0)])])),I.value?p("",!0):(r(),c("div",qn,v(l.notation||""),1)),s("div",Qn,[s("button",{class:"kill-btn",onClick:y=>Dt(l.en),title:l._isKilled?"æ¢å¤/æ’¤é”€æ–©æ€":"æ–©æ€/å½’æ¡£",style:Z({color:l._isKilled?"#a855f7":""})},v(l._isKilled?"â†º":"âœ•"),13,el)])],10,pn))),128))],512),[[eo,!ot[n.title]]])],4))),128)),!f.value&&Ce.value.length>1?(r(),c("div",tl,[s("button",{class:"page-btn big-btn",disabled:A.value===0,onClick:t[16]||(t[16]=n=>Gt(-1))},"â¬…ï¸ ä¸Šä¸€é¡µ",8,sl),s("div",ol,[s("span",nl,v(A.value+1)+" / "+v(Ce.value.length),1),s("button",{class:$(["finish-btn",{done:jt.value}]),onClick:Ts,title:"æ ‡è®°æœ¬é¡µä¸ºå·²å®Œæˆ"},v(jt.value?"âœ… å·²å®Œæˆ":"â­• æ ‡è®°å®Œæˆ"),3)]),s("button",{class:"page-btn big-btn",disabled:A.value===Ce.value.length-1,onClick:t[17]||(t[17]=n=>Gt(1))},"ä¸‹ä¸€é¡µ â¡ï¸",8,ll)])):p("",!0),al]),me.value?(r(),c("div",{key:2,class:"scratchpad-window",style:Z({left:et.value+"px",top:ft.value+"px"})},[s("div",{class:"pad-header",onMousedown:Ms},[il,s("button",{class:"pad-close",onClick:Ft},"âœ•")],32),s("canvas",{ref_key:"canvasRef",ref:ee,class:"pad-canvas",style:{"touch-action":"none",display:"block"},onPointerdown:$s,onPointermove:Is,onPointerup:Bt,onPointerleave:Bt,onDblclick:mt},null,544),s("div",{class:"pad-footer"},[cl,s("button",{class:"pad-btn-clear",onClick:mt},"ğŸ—‘ï¸ (Space)")])],4)):p("",!0),s("div",{class:$(["floating-action-group",{"pos-left":Js.value}])},[f.value?(r(),c("button",{key:0,onClick:dt,class:"floating-btn refresh-btn",title:"åˆ·æ–°æ•°æ®"},"ğŸ”„")):p("",!0),f.value?p("",!0):(r(),c("button",{key:1,onClick:os,class:"floating-btn story-btn",title:"æœ¬é¡µåŠ©è®°æ–‡ç« /æ•…äº‹"},"ğŸ“œ")),s("button",{onClick:Cs,class:"floating-btn add-btn",title:"æ‰‹åŠ¨åŠ å…¥ç”Ÿè¯"},"â•"),s("button",{onClick:Os,class:"floating-btn search-btn",title:"æœç´¢å•è¯/è¯æ ¹"},"ğŸ”")],2),ge.value?(r(),c("div",{key:3,class:"modal-overlay",onClick:t[20]||(t[20]=m(n=>ge.value=!1,["self"]))},[s("div",rl,[ul,s("div",dl,[U(s("input",{id:"custom-word-input",type:"text","onUpdate:modelValue":t[18]||(t[18]=n=>Ze.value=n),class:"modal-input-field",placeholder:"è¯·è¾“å…¥å•è¯...",onKeydown:pe(Pt,["enter"]),autocomplete:"off"},null,40,vl),[[le,Ze.value]])]),s("div",pl,[s("button",{onClick:t[19]||(t[19]=n=>ge.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),s("button",{onClick:Pt,class:"modal-btn",style:{background:"#2563eb",color:"white"}},"ç¡®å®š")])])])):p("",!0),we.value?(r(),c("div",{key:4,class:"modal-overlay",onClick:t[23]||(t[23]=m(n=>we.value=!1,["self"]))},[s("div",hl,[fl,s("p",_l,[Y(' è¯åº“ä¸­æœªæ‰¾åˆ° "'),s("strong",null,v(qe.value),1),Y('"ï¼Œè¯·å¡«å†™ä¸­æ–‡æ„æ€ï¼š ')]),s("div",yl,[U(s("input",{id:"custom-meaning-input",type:"text","onUpdate:modelValue":t[21]||(t[21]=n=>Ye.value=n),class:"modal-input-field",placeholder:"ä¾‹å¦‚ï¼šå¼€é˜”çœ¼ç•Œ...",onKeydown:pe(Ot,["enter"]),autocomplete:"off"},null,40,gl),[[le,Ye.value]])]),s("div",ml,[s("button",{onClick:t[22]||(t[22]=n=>we.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),s("button",{onClick:Ot,class:"modal-btn",style:{background:"#10b981",color:"white"}},"ä¿å­˜å¹¶æ·»åŠ ")])])])):p("",!0),pt.value?(r(),c("div",bl,[s("div",kl,[xl,s("h3",Cl,v(Lt.value),1)])])):p("",!0)]),We.value?(r(),c("div",{key:0,class:"modal-overlay",onClick:t[27]||(t[27]=m(n=>We.value=!1,["self"]))},[s("div",wl,[Sl,s("div",$l,[Il,U(s("input",{type:"text","onUpdate:modelValue":t[24]||(t[24]=n=>Q.newWord=n),class:"modal-input-field"},null,512),[[le,Q.newWord]])]),s("div",Ml,[El,U(s("input",{type:"text","onUpdate:modelValue":t[25]||(t[25]=n=>Q.newZh=n),class:"modal-input-field"},null,512),[[le,Q.newZh]])]),s("div",Tl,[s("button",{onClick:t[26]||(t[26]=n=>We.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),s("button",{onClick:Ss,class:"modal-btn",style:{background:"#3b82f6",color:"white"}},"ä¿å­˜ä¿®æ”¹")])])])):p("",!0),Se.value?(r(),c("div",{key:1,class:"modal-overlay",onClick:t[31]||(t[31]=m(n=>Se.value=!1,["self"]))},[s("div",Al,[s("div",Dl,[Ll,s("div",zl,[s("button",{class:$({active:$e.value==="week"}),onClick:t[28]||(t[28]=n=>$e.value="week")},"è¿‘7å¤©",2),s("button",{class:$({active:$e.value==="month"}),onClick:t[29]||(t[29]=n=>$e.value="month")},"è¿‘30å¤©",2)])]),s("div",Pl,[s("div",Ol,[s("div",Wl,v(Math.round((((o=de(N)[Oe()])==null?void 0:o.duration)||0)/60)),1),Nl]),s("div",Rl,[s("div",Ul,v(((a=de(N)[Oe()])==null?void 0:a.learn)||0),1),Bl]),s("div",Kl,[s("div",Vl,v(((i=de(N)[Oe()])==null?void 0:i.review)||0),1),Fl]),s("div",Jl,[s("div",jl,v(((d=de(N)[Oe()])==null?void 0:d.kill)||0),1),Gl])]),s("div",Hl,[s("canvas",{ref_key:"statsChartCanvas",ref:ht},null,512)]),s("button",{class:"modal-close",onClick:t[30]||(t[30]=n=>Se.value=!1),style:{"margin-top":"15px"}},"å…³é—­")])])):p("",!0),Re.value?(r(),c("div",{key:2,class:"modal-overlay",onClick:t[36]||(t[36]=m(n=>Re.value=!1,["self"]))},[s("div",Xl,[s("div",Zl,[U(s("input",{id:"global-search-input",type:"text","onUpdate:modelValue":t[32]||(t[32]=n=>Ae.value=n),onInput:Ws,onKeydown:[pe(m(Ns,["prevent"]),["enter"]),t[33]||(t[33]=pe(m(n=>Xt(-1),["prevent"]),["up"])),t[34]||(t[34]=pe(m(n=>Xt(1),["prevent"]),["down"]))],placeholder:"è¾“å…¥è¯æ ¹ (æ”¯æŒé”®ç›˜ â†‘â†“ é€‰æ‹©)...",class:"modal-input-field search-input",autocomplete:"off"},null,40,Yl),[[le,Ae.value]]),s("button",{class:"modal-close-icon static-pos",onClick:t[35]||(t[35]=n=>Re.value=!1)},"âœ•")]),s("div",ql,[Ae.value?G.value.length===0?(r(),c("div",ea,"æœªæ‰¾åˆ°åŒ¹é…å•è¯")):(r(!0),c(ve,{key:2},ke(G.value,(n,u)=>(r(),c("div",{key:n.en,class:$(["search-item",{"clickable-item":!n.isCustom,selected:u===ne.value}]),onClick:l=>Ue(n),onMouseenter:l=>ne.value=u},[s("div",sa,[s("div",oa,[Y(v(n.en)+" ",1),s("span",{class:"speaker-small",onClick:m(l=>Pe(n.en),["stop"])},"ğŸ”Š",8,na)]),s("div",la,v(n.zh),1)]),s("div",aa,[s("span",ia,v(n.source),1)])],42,ta))),128)):(r(),c("div",Ql,"è¾“å…¥å­—æ¯æŸ¥æ‰¾åŒ…å«è¯¥è¯æ ¹çš„å•è¯"))])])])):p("",!0),Ke.value?(r(),c("div",{key:3,class:"modal-overlay",onClick:t[40]||(t[40]=m(n=>Ke.value=!1,["self"]))},[s("div",ca,[ra,s("div",ua,[da,U(s("input",{type:"text","onUpdate:modelValue":t[37]||(t[37]=n=>se.title=n),class:"modal-input-field",placeholder:"ä¾‹å¦‚ï¼šDiscover vs Invent åŒºåˆ«...",autocomplete:"off"},null,512),[[le,se.title]])]),s("div",va,[pa,U(s("textarea",{"onUpdate:modelValue":t[38]||(t[38]=n=>se.content=n),class:"modal-input-field",style:{flex:"1",resize:"none","line-height":"1.6","font-family":"sans-serif"},placeholder:"åœ¨è¿™é‡Œè®°å½•è¯¦ç»†çš„è¯ä¹‰è¾¨æã€åœºæ™¯ç”¨æ³•ç­‰..."},null,512),[[le,se.content]])]),s("div",ha,[s("button",{onClick:t[39]||(t[39]=n=>Ke.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),s("button",{onClick:Hs,class:"modal-btn",style:{background:"#8b5cf6",color:"white"}},"ğŸ’¾ ä¿å­˜ç¬”è®°")])])])):p("",!0),Ve.value?(r(),c("div",{key:4,class:"modal-overlay",onClick:t[42]||(t[42]=m(n=>Ve.value=!1,["self"]))},[s("div",fa,[s("div",_a,[s("h3",ya,v(De.title||"æ— æ ‡é¢˜ç¬”è®°"),1),s("div",ga,[s("button",{class:"icon-btn edit-switch-btn",onClick:Gs,title:"ä¿®æ”¹å†…å®¹"},"âœ"),s("button",{class:"icon-btn close-btn",onClick:t[41]||(t[41]=n=>Ve.value=!1)},"âœ•")])]),s("div",{class:"read-content markdown-body",innerHTML:wt(De.content)},null,8,ma)])])):p("",!0),je.value?(r(),c("div",{key:5,class:"modal-overlay",onClick:t[49]||(t[49]=m(n=>je.value=!1,["self"]))},[s("div",ba,[s("div",ka,[s("h3",xa,v(J.value?"âœï¸ ç¼–è¾‘æ¨¡å¼":"ğŸ“œ æœ¬é¡µåŠ©è®°æ–‡ç«  (Part "+(A.value+1)+")"),1),s("div",Ca,[J.value?(r(),c("button",{key:1,class:"icon-btn",onClick:t[44]||(t[44]=n=>J.value=!1),title:"é¢„è§ˆ"}," ğŸ‘ï¸ é¢„è§ˆ ")):(r(),c("button",{key:0,class:"icon-btn edit-switch-btn",onClick:t[43]||(t[43]=n=>J.value=!0),title:"ç¼–è¾‘å½“å‰æ–‡ç« "}," âœ ç¼–è¾‘ ")),s("button",{class:"icon-btn close-btn",onClick:t[45]||(t[45]=n=>je.value=!1)},"âœ•")])]),s("div",wa,[s("div",Sa,[$a,s("div",Ia,[(r(!0),c(ve,null,ke(E.value,(n,u)=>(r(),c("div",{key:u,class:$(["sidebar-item",{active:_e.value===u}]),onClick:l=>Tt(u)},[Ea,s("span",Ta,v(n.title||"æ— æ ‡é¢˜æ–‡ç« "),1)],10,Ma))),128))]),s("button",{class:"sidebar-add-btn",onClick:ns}," + æ–°å¢æ–‡ç«  ")]),s("div",Aa,[J.value?(r(),c("div",Ra,[s("div",Ua,[U(s("input",{type:"text","onUpdate:modelValue":t[46]||(t[46]=n=>ae.value.title=n),class:"modal-input-field",placeholder:"è¯·è¾“å…¥æ–‡ç« æ ‡é¢˜...",style:{"font-weight":"bold"}},null,512),[[le,ae.value.title]])]),s("div",Ba,[s("div",Ka,[s("div",{class:"editor-toolbar"},[Va,s("button",{class:"tiny-btn",onClick:is},"ğŸ¤– å¤åˆ¶ AI Prompt"),s("button",{class:"tiny-btn delete-btn",onClick:ls},"ğŸ—‘ï¸ åˆ é™¤æ­¤ç¯‡")]),U(s("textarea",{"onUpdate:modelValue":t[47]||(t[47]=n=>ae.value.content=n),class:"modal-input-field",style:{flex:"1",resize:"none","margin-bottom":"0"},placeholder:"åœ¨æ­¤ç²˜è´´æ•…äº‹å†…å®¹..."},null,512),[[le,ae.value.content]])]),s("div",Fa,[Ja,s("div",{class:"markdown-body",style:{padding:"10px","overflow-y":"auto",height:"100%"},innerHTML:wt(ae.value.content)},null,8,ja)])])])):(r(),c("div",Da,[s("h1",La,v(ae.value.title),1),ae.value.content?(r(),c("div",{key:0,innerHTML:wt(ae.value.content)},null,8,za)):(r(),c("div",Pa,Na))]))])]),J.value?(r(),c("div",Ga,[s("button",{onClick:t[48]||(t[48]=n=>J.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),s("button",{onClick:as,class:"modal-btn",style:{background:"#f59e0b",color:"white"}},"ğŸ’¾ ä¿å­˜å…¨éƒ¨æ›´æ”¹")])):p("",!0)])])):p("",!0)],64)}}},ei=Ys(Za,[["__scopeId","data-v-8c07079f"]]);export{ei as default};
