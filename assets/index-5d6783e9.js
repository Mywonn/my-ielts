import{_ as ns,d as f,e as ce,f as J,w as pe,g as ls,h as Mt,c,a as o,n as $,i as V,u as fe,j as p,k as O,v as as,t as v,l as Tt,m as to,F as he,r as we,p as m,q as Q,s as ee,x as ge,y as dt,o as r,z as is,A as cs,B as rs,C as us}from"./index-1c077681.js";import x from"./vocabulary-9de5e70b.js";import{marked as ds}from"https://cdn.jsdelivr.net/npm/marked/lib/marked.esm.js";const h=He=>(cs("data-v-2d3967ef"),He=He(),rs(),He),vs={class:"app-root"},ps={class:"tools-bar sticky-toolbar"},fs={class:"bar-inner"},hs={class:"left-tools"},gs={class:"mode-switch"},_s={key:0,class:"dot"},ys={class:"toggle-label"},ms=["title"],bs={class:"middle-tools"},ks={key:0,class:"selectors"},xs=["value"],Cs=["value"],ws={key:0,title:"å…¨ä¹¦æ€»è¯æ±‡é‡"},Ss={class:"s-learn",title:"å¤ä¹ é˜Ÿåˆ—ä¸­"},Is={class:"s-done",title:"å·²æ–©æ€+å·²é€šå…³"},$s={class:"s-new",title:"å‰©ä½™å•è¯"},Ms={class:"right-tools"},Ts=["value"],Es={key:1,class:"pomo-time"},As=["onClick"],Ds={class:"modal-box"},zs={class:"modal-icon"},Ls={class:"modal-title"},Ps={key:0,class:"modal-actions"},Os={key:1,class:"modal-actions"},Ws={key:1,class:"header-table-row desktop-only"},Ns={class:"grid-layout"},Rs=h(()=>o("div",{class:"col-idx text-center"},"#",-1)),Us={class:"col-word header-word-col"},Bs=["title"],Gs={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Ks=h(()=>o("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1)),Vs=h(()=>o("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1)),js=[Ks,Vs],Js={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Fs=h(()=>o("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},null,-1)),Hs=h(()=>o("circle",{cx:"12",cy:"10",r:"3"},null,-1)),Xs=[Fs,Hs],Zs=h(()=>o("div",{class:"col-pos text-center"},"è¯æ€§",-1)),Ys={class:"col-zh header-zh-col"},qs=["title"],Qs={key:0,class:"col-ex"},en={key:1,class:"col-note"},tn=h(()=>o("div",{class:"col-del text-center"},"åˆ ",-1)),on={class:"content-container"},sn={key:0,class:"empty-tip"},nn=["onClick"],ln=h(()=>o("span",{style:{"font-weight":"800","margin-right":"4px"}},"P.",-1)),an={key:1,class:"note-placeholder",style:{color:"#9ca3af"}},cn={class:"group-actions"},rn=["onClick"],un=["onClick"],dn=["onClick"],vn={style:{"font-weight":"bold","margin-right":"10px"}},pn=["onClick","title"],fn=["fill"],hn=h(()=>o("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},null,-1)),gn=h(()=>o("circle",{cx:"12",cy:"10",r:"3"},null,-1)),_n=[hn,gn],yn=h(()=>o("div",{style:{flex:"1"}},null,-1)),mn=["id"],bn={class:"col-idx text-center index-num desktop-only"},kn={class:"col-word"},xn={class:"word-wrapper"},Cn={key:0,class:"word-cell-container"},wn={class:"word-row-top"},Sn=["onClick"],In=["onClick"],$n=["onClick"],Mn=["onClick"],Tn=["onClick"],En=["onClick","title"],An={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Dn=h(()=>o("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},null,-1)),zn=h(()=>o("circle",{cx:"12",cy:"10",r:"3"},null,-1)),Ln=[Dn,zn],Pn={key:1,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},On=h(()=>o("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},null,-1)),Wn=h(()=>o("circle",{cx:"12",cy:"10",r:"3"},null,-1)),Nn=[On,Wn],Rn=["onClick"],Un={key:1,class:"review-meta desktop-only"},Bn={key:0,class:"tag-due"},Gn={key:1,class:"tag-wait"},Kn={key:1,class:"input-cell"},Vn=["onClick"],jn={class:"input-col"},Jn=["onChange","onInput","onFocus","onKeydown"],Fn={key:0,class:"error-hint"},Hn={key:1,class:"peek-hint"},Xn=["onClick","title"],Zn={class:"mobile-only mobile-pos"},Yn=["onClick"],qn={class:"col-pos text-center italic desktop-only"},Qn=["onClick"],el={key:0,class:"mobile-only mobile-notation"},tl={key:0,class:"col-ex example-cell"},ol={class:"ex-content"},sl=["onClick"],nl={key:1,class:"col-note notation-cell desktop-only"},ll={class:"col-del text-center desktop-only"},al=["onClick","title"],il={key:1,class:"pagination-area"},cl=["disabled"],rl={class:"finish-control"},ul={class:"page-info"},dl=["disabled"],vl=h(()=>o("div",{style:{height:"40px"}},null,-1)),pl=h(()=>o("span",{class:"pad-title"},":: æ‹–æ‹½ ::",-1)),fl=h(()=>o("span",{class:"hint-text"},"â†˜ï¸å³ä¸‹è§’æ‹–åŠ¨è°ƒæ•´å¤§å°",-1)),hl=["disabled"],gl=["disabled"],_l={class:"modal-box",style:{"max-width":"360px"}},yl=h(()=>o("h3",{class:"modal-title"},"âœï¸ æ·»åŠ æ–°è¯",-1)),ml={style:{margin:"20px 0"}},bl=["onKeydown"],kl={class:"modal-actions"},xl={class:"modal-box",style:{"max-width":"360px"}},Cl=h(()=>o("h3",{class:"modal-title"},"ğŸ“– è¡¥å……é‡Šä¹‰",-1)),wl={style:{color:"#666","font-size":"14px","margin-bottom":"10px"}},Sl={style:{margin:"15px 0"}},Il=["onKeydown"],$l={class:"modal-actions"},Ml={key:5,class:"modal-overlay",style:{background:"rgba(0,0,0,0.3)","z-index":"3000"}},Tl={class:"modal-box",style:{"max-width":"300px",padding:"30px 20px"}},El=h(()=>o("div",{style:{"font-size":"40px","margin-bottom":"10px"}},"ğŸ‰",-1)),Al={style:{margin:"0",color:"#374151"}},Dl={class:"modal-box",style:{"max-width":"360px","text-align":"left"}},zl=h(()=>o("h3",{class:"modal-title",style:{"text-align":"center"}},"ğŸ› ï¸ ä¿®æ”¹å•è¯",-1)),Ll={style:{"margin-bottom":"15px"}},Pl=h(()=>o("label",{style:{display:"block",color:"#666","font-size":"12px","margin-bottom":"5px"}},"è‹±æ–‡æ‹¼å†™",-1)),Ol={style:{"margin-bottom":"20px"}},Wl=h(()=>o("label",{style:{display:"block",color:"#666","font-size":"12px","margin-bottom":"5px"}},"ä¸­æ–‡é‡Šä¹‰",-1)),Nl={class:"modal-actions"},Rl={class:"modal-box stats-box"},Ul={class:"stats-header"},Bl=h(()=>o("h3",null,"ğŸ“ˆ å­¦ä¹ æ•°æ®çœ‹æ¿",-1)),Gl={class:"stats-switcher"},Kl={class:"stats-summary"},Vl={class:"summary-item"},jl={class:"num"},Jl=h(()=>o("div",{class:"label"},"ä¸“æ³¨(åˆ†)",-1)),Fl={class:"summary-item"},Hl={class:"num",style:{color:"#10b981"}},Xl=h(()=>o("div",{class:"label"},"ä»Šæ—¥å­¦ä¹ ",-1)),Zl={class:"summary-item"},Yl={class:"num",style:{color:"#3b82f6"}},ql=h(()=>o("div",{class:"label"},"ä»Šæ—¥å¤ä¹ ",-1)),Ql={class:"summary-item"},ea={class:"num",style:{color:"#ef4444"}},ta=h(()=>o("div",{class:"label"},"ä»Šæ—¥æ–©æ€",-1)),oa={class:"chart-container"},sa={class:"modal-box search-box-modal"},na={class:"search-header"},la=["onKeydown"],aa={class:"search-results-list"},ia={key:0,class:"empty-tip-text"},ca={key:1,class:"empty-tip-text"},ra=["onClick","onMouseenter"],ua={class:"si-left"},da={class:"si-en"},va=["onClick"],pa={class:"si-zh"},fa={class:"si-right"},ha={class:"si-source"},ga={class:"modal-box",style:{"max-width":"600px","text-align":"left",height:"80vh",display:"flex","flex-direction":"column"}},_a=h(()=>o("h3",{class:"modal-title"},"ğŸ“ åˆ†ç»„è¾¨æç¬”è®°",-1)),ya={style:{"margin-bottom":"10px"}},ma=h(()=>o("label",{style:{"font-size":"12px",color:"#666","font-weight":"bold"}},"æ ‡é¢˜ (æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸Šæ–¹)",-1)),ba={style:{flex:"1",display:"flex","flex-direction":"column","margin-bottom":"15px","min-height":"0"}},ka=h(()=>o("label",{style:{"font-size":"12px",color:"#666","font-weight":"bold","margin-bottom":"5px"}},"è¯¦ç»†å†…å®¹ (æ”¯æŒæ¢è¡Œ/ç®€å•Markdown)",-1)),xa={class:"modal-actions"},Ca={class:"modal-box read-card-modal"},wa={class:"read-header"},Sa={class:"read-title"},Ia={class:"read-actions"},$a=["innerHTML"],Ma={class:"modal-box read-card-modal",style:{height:"85vh",display:"flex","flex-direction":"column",padding:"0"}},Ta={class:"read-header"},Ea={class:"read-title"},Aa={class:"read-actions"},Da={style:{flex:"1",display:"flex",overflow:"hidden"}},za={class:"story-sidebar"},La=h(()=>o("div",{class:"sidebar-header"},"æ–‡ç« åˆ—è¡¨",-1)),Pa={class:"sidebar-list"},Oa=["onClick"],Wa=h(()=>o("span",{class:"item-icon"},"ğŸ“„",-1)),Na={class:"item-title"},Ra={class:"story-content-area"},Ua={key:0,class:"markdown-body story-reader"},Ba={class:"story-page-title"},Ga=["innerHTML"],Ka={key:1,class:"empty-story-tip"},Va=h(()=>o("div",{style:{"font-size":"40px"}},"ğŸ“",-1)),ja=h(()=>o("div",null,[V("æœ¬ç¯‡æ–‡ç« æš‚æ— å†…å®¹"),o("br"),V("ç‚¹å‡»å³ä¸Šè§’ "),o("b",null,'"âœ ç¼–è¾‘"'),V(" å¼€å§‹å†™ä½œ")],-1)),Ja=[Va,ja],Fa={key:1,class:"story-editor-layout"},Ha={style:{"margin-bottom":"10px"}},Xa={style:{flex:"1",display:"flex",gap:"15px","min-height":"0"}},Za={style:{flex:"1",display:"flex","flex-direction":"column"}},Ya=h(()=>o("span",null,"Markdown ç¼–è¾‘",-1)),qa={class:"desktop-only preview-pane"},Qa=h(()=>o("div",{class:"editor-toolbar"},"å®æ—¶é¢„è§ˆ",-1)),ei=["innerHTML"],ti={key:0,class:"modal-actions",style:{padding:"10px 20px","border-top":"1px solid #eee",margin:"0"}},oi={class:"modal-box",style:{"max-width":"400px","text-align":"left"}},si=h(()=>o("h3",{class:"modal-title"},"â˜ï¸ GitHub äº‘åŒæ­¥é…ç½®",-1)),ni=h(()=>o("p",{style:{"font-size":"12px",color:"#666","margin-bottom":"15px","line-height":"1.5"}},[V(" åˆ©ç”¨ GitHub Gist å®ç°å…è´¹ç§æœ‰äº‘åŒæ­¥ã€‚"),o("br"),V(" æ•°æ®å­˜å‚¨åœ¨æ‚¨è‡ªå·±çš„ GitHub è´¦å·ä¸­ï¼Œå®‰å…¨å¯æ§ã€‚ ")],-1)),li={style:{"margin-bottom":"15px"}},ai=h(()=>o("label",{style:{display:"block","font-size":"12px","font-weight":"bold","margin-bottom":"5px"}},"GitHub Token (å‹¾é€‰ gist æƒé™)",-1)),ii={style:{"margin-bottom":"20px"}},ci=h(()=>o("label",{style:{display:"block","font-size":"12px","font-weight":"bold","margin-bottom":"5px"}},"Gist ID (æµè§ˆå™¨åœ°å€æ æœ€åä¸€æ®µ)",-1)),ri={class:"modal-actions"},ui=h(()=>o("div",{style:{"margin-top":"15px","font-size":"12px",color:"#999","text-align":"center"}}," é…ç½®ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚ ",-1)),di="/my-ielts/timeout.mp3",vi="/my-ielts/do.mp3",pi={__name:"index",setup(He){const oo=e=>{new Audio(e).play().catch(s=>console.log("äº¤äº’å—é™:",s))},Et=["#ef4444","#3b82f6","#f59e0b","#8b5cf6","#10b981","#ec4899","#06b6d4","#f97316","#6366f1","#84cc16","#d946ef"],so=["#ef4444","#f97316","#f59e0b","#10b981","#06b6d4","#3b82f6"],F=(e,t)=>{const s=f(t);return Mt(()=>{try{const i=localStorage.getItem(e);i&&(s.value=JSON.parse(i))}catch{}}),pe(s,i=>localStorage.setItem(e,JSON.stringify(i)),{deep:!0}),s},vt=x?Object.keys(x):[],S=F("my_ielts_chapter",vt[0]||""),y=F("my_ielts_review",[]),A=F("my_ielts_killed",[]),I=F("my_ielts_mastered",[]),le=F("my_ielts_completed_parts",{}),C=F("my_ielts_custom_dict",{}),_e=F("my_ielts_audio_peek_history",[]),j=F("my_ielts_group_notes",{}),M=f(!1),g=f(!1),D=f(0),Se=ce({}),Xe=[5,30,720,1440,2880,5760],ye=f([]),T=ce(new Set),ae=ce(new Set),no=e=>{ae.has(e)?ae.delete(e):ae.add(e)},lo=e=>{T.has(e)?T.delete(e):T.add(e)},At=e=>{const t=Array.from(document.querySelectorAll(".dictation-input")),s=t.indexOf(e.target);e.shiftKey?s>0&&(t[s-1].focus(),setTimeout(()=>t[s-1].select(),10)):s>-1&&s<t.length-1&&t[s+1].focus()},Oe=F("my_ielts_page_stories",{}),Ze=f(!1),E=f([]),me=f(0),H=f(!1),Dt=()=>`${S.value}_Part${D.value}`,ao=()=>{const e=Dt(),t=Oe.value[e];t?t.content&&!Array.isArray(t)?E.value=[{title:"æ–‡ç«  1",content:t.content}]:Array.isArray(t)?E.value=JSON.parse(JSON.stringify(t)):E.value=[{title:"æ–‡ç«  1",content:""}]:E.value=[{title:"æ–‡ç«  1",content:""}],me.value=0,H.value=!E.value[0].content,Ze.value=!0},zt=e=>{me.value=e,H.value=!E.value[e].content},io=()=>{const e=E.value.length;E.value.push({title:`æ–‡ç«  ${e+1}`,content:""}),zt(e),H.value=!0},co=()=>{if(E.value.length<=1){E.value[0].content="",E.value[0].title="æ–‡ç«  1",W("å·²æ¸…ç©ºå†…å®¹");return}confirm("ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ–‡ç« å—ï¼Ÿ")&&(E.value.splice(me.value,1),me.value>=E.value.length&&(me.value=E.value.length-1))},ro=()=>{const e=Dt();Oe.value={...Oe.value,[e]:E.value},H.value=!1,W("æœ¬é¡µæ‰€æœ‰æ–‡ç« å·²ä¿å­˜ ğŸ’¾")},re=J(()=>E.value[me.value]||{title:"",content:""}),uo=()=>{const e=[];if(ue.value.forEach(s=>{s.list&&s.list.forEach(i=>e.push(i.en))}),e.length===0)return;const t=`Please write a short, interesting story (about 150-200 words) using the following vocabulary. Highlight the vocabulary words in bold within the story.

Words: ${e.join(", ")}`;if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{W("æç¤ºè¯å·²å¤åˆ¶ï¼å»é—® AI å§ ğŸ¤–")});else{const s=document.createElement("textarea");s.value=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),W("æç¤ºè¯å·²å¤åˆ¶ï¼å»é—® AI å§ ğŸ¤–")}},be=f(!1),R=ce(new Set),vo=()=>{be.value=!be.value,be.value||R.clear()},po=e=>{R.has(e)?R.delete(e):R.add(e)};pe([S,D,g,M],()=>{T.clear(),ae.clear(),R.clear()}),pe([S,D,g,M],()=>{T.clear(),ae.clear()});const Ye=J(()=>{if(ue.value.length===0)return!1;const e=[];return ue.value.forEach(t=>t.list.forEach(s=>e.push(s.en))),e.length>0&&e.every(t=>T.has(t))}),Lt=()=>{const e=[];ue.value.forEach(s=>s.list.forEach(i=>e.push(i.en))),e.every(s=>T.has(s))?T.clear():e.forEach(s=>T.add(s))},We=e=>e?Array.isArray(e)?We(e[0]):String(e):"",qe=e=>{if(!e)return"";if(Array.isArray(e)){const s=[];return e[4]&&typeof e[4]=="string"&&e[4]!=="-"&&s.push(e[4]),e[5]&&typeof e[5]=="string"&&e[5]!=="-"&&s.push(e[5]),s.join("; ")}if(e.notation)return e.notation;if(e.phrase)return e.phrase;if(e.phrases)return e.phrases;if(e.collocation)return e.collocation;if(e.collocations)return e.collocations;if(e.extend)return e.extend;if(e.extension)return e.extension;if(e.note)return e.note;if(e.usage)return e.usage;if(e.æ‹“å±•)return e.æ‹“å±•;if(e.æ­é…)return e.æ­é…;if(e.çŸ­è¯­)return e.çŸ­è¯­;const t=Object.keys(e);for(const s of t){const i=s.toLowerCase();if((i.includes("not")||i.includes("phr")||i.includes("coll")||i.includes("ext"))&&typeof e[s]=="string"&&i!=="pronunciation"&&i!=="uk_audio"&&i!=="us_audio")return e[s]}return""},pt=e=>{if(C.value[e])return{en:e,zh:C.value[e].zh,pos:"è‡ªé€‰",example:"",notation:"æˆ‘çš„ç”Ÿè¯æœ¬",id:"â˜…",source:"ç”Ÿè¯æœ¬"};let t=0;for(const s in x){const i=x[s].words||x[s].list||[];let l=0,d=0;const n=35,u=45;for(let a=0;a<i.length;a++){const _=i[a];let P=0;for(const b of _)P++;const Y=d+P;d>0&&(d>=n||Y>u)&&(l++,d=0);for(const b of _){let k="",q="",B="",ve="",ut="";Array.isArray(b)?(k=b[0],q=b[1]||"",B=b[2]||"",ve=b[3]||"",ut=qe(b)):(k=b.word||b.en,q=b.pos||"",B=b.meaning||b.trans||b.zh||"",ve=b.example||"",ut=qe(b));const eo=We(k);if(t++,eo===e)return{en:eo,zh:B,pos:q,example:ve,notation:ut,id:t,source:`${s} Part ${l+1}`}}d+=P}}return{en:e,zh:"æœªæ‰¾åˆ°é‡Šä¹‰",pos:"",example:"",notation:"",id:"-",source:"æœªçŸ¥"}},fo=J(()=>{let e=0;for(const t in x)(x[t].words||x[t].list||[]).forEach(i=>e+=i.length);return e}),Qe=J(()=>{const e=fo.value,t=y.value.length,s=new Set([...A.value,...I.value]).size,i=Math.max(0,e-t-s);return{total:e,learning:t,learned:s,unlearned:i}}),ho=J(()=>{const e={};let t=0;for(const s of vt){e[s]=t;const i=x[s];(i.words||i.list||[]).forEach(d=>d.forEach(n=>{t++}))}return e}),go=J(()=>{if(!S.value||!x[S.value])return[];const e=x[S.value].words||x[S.value].list||[];let t=[],s=ho.value[S.value]||0;return e.forEach((i,l)=>{const d=Et[l%Et.length];let n=[];i.forEach(u=>{let a="",_="",P="",Y="",b="";Array.isArray(u)?(a=u[0],_=u[1]||"",P=u[2]||"",Y=u[3]||"",b=qe(u)):(a=u.word||u.en,_=u.pos||"",P=u.meaning||u.trans||u.zh||"",Y=u.example||"",b=qe(u));const k=We(a);s++;const q=I.value.includes(k),B=A.value.includes(k);n.push({_id:s,en:k,zh:P,pos:_,example:Y,notation:b,_color:d,_groupId:l,_isMastered:q,_isKilled:B})}),n.length>0&&t.push(n)}),t}),Ie=J(()=>{if(g.value)return[];const e=go.value,t=35,s=45;let i=[],l=[],d=0;return e.forEach(n=>{const u=d+n.length;d>0&&(d>=t||u>s)&&(i.push(l),l=[],d=0),l.push(...n),d+=n.length}),l.length>0&&i.push(l),i}),_o=J(()=>g.value?["å…¨éƒ¨é”™é¢˜"]:Ie.value.map((e,t)=>{var n;if(!e||e.length===0)return`Part ${t+1}`;const s=e[0]._id,i=e[e.length-1]._id,l=e.length,d=(n=le.value[S.value])==null?void 0:n.includes(t);return`Part ${t+1} (${s}-${i}) ${l}ä¸ª ${d?"âœ”":""}`})),yo=e=>{const t=x[e];if(!t)return 0;const s=t.words||t.list||[],i=35,l=45;let d=0,n=0;return s.forEach(u=>{const a=u.length,_=n+a;n>0&&(n>=i||_>l)&&(d++,n=0),n+=a}),n>0&&d++,d},mo=J(()=>vt.map(e=>{const t=yo(e),i=(le.value[e]||[]).length,l=t>0&&i>=t;return{value:e,label:e,isDone:l}})),ue=J(()=>{if(g.value){const l=ye.value.length>0?ye.value:y.value,d={5:[],4:[],3:[],2:[],1:[],0:[]};l.forEach((a,_)=>{const P=a.stage>=6?5:a.stage||0;d[P]&&d[P].push({...pt(a.w),_review:a,_id:_+1})});const n=[],u=["é˜¶æ®µ 1 - æ–°æ‰‹/é‡æ¥ (5åˆ†é’Ÿ)","é˜¶æ®µ 2 - å…¥é—¨ (30åˆ†é’Ÿ)","é˜¶æ®µ 3 - ç†Ÿæ‚‰ (12å°æ—¶)","é˜¶æ®µ 4 - æŒæ¡ (1å¤©)","é˜¶æ®µ 5 - ç‰¢å›º (2å¤©)","é˜¶æ®µ 6 - å¤§å¸ˆ (4å¤©+)"];for(let a=5;a>=0;a--)d[a].length>0&&n.push({color:so[a],title:`ğŸ”¥ ${u[a]} [${d[a].length}ä¸ª]`,list:d[a]});return n}const e=Ie.value[D.value]||[];if(e.length===0)return[];let t=[],s=null,i=-999;return e.forEach(l=>{l._groupId!==i&&(s={color:l._color,list:[],groupId:l._groupId},t.push(s),i=l._groupId),s.list.push(l)}),t});function ft(){if(!g.value)return;const e=y.value.filter(t=>t.time<=Date.now());ye.value=JSON.parse(JSON.stringify(e));for(const t in Se)delete Se[t];T.clear(),ae.clear(),R.clear(),dt(()=>{document.querySelectorAll(".dictation-input").forEach(s=>{s.value="",s.classList.remove("correct","error")})})}pe(g,e=>{if(e){const t=y.value.filter(s=>s.time<=Date.now());ye.value=JSON.parse(JSON.stringify(t))}else ye.value=[]},{immediate:!0}),pe(y,e=>{if(g.value&&ye.value.length===0){const t=e.filter(s=>s.time<=Date.now());ye.value=JSON.parse(JSON.stringify(t))}});let ht=!1;pe(S,()=>{ht||(D.value=0,g.value=!1)});const G=f(null),K=f(null),Ne=e=>{if(T.has(e)&&!_e.value.includes(e)&&_e.value.push(e),K.value===e){G.value&&(G.value.pause(),G.value.currentTime=0,G.value=null),window.speechSynthesis.cancel(),K.value=null;return}G.value&&(G.value.pause(),G.value=null),window.speechSynthesis.cancel();const t=()=>{const l=new SpeechSynthesisUtterance(e);l.lang="en-US",l.volume=1,l.rate=.85;const d=window.speechSynthesis.getVoices(),n=d.find(u=>u.name.includes("Google US"))||d.find(u=>u.lang.includes("en-US"));n&&(l.voice=n),l.onend=()=>{K.value=null},l.onerror=u=>{console.error("TTS Error:",u),K.value=null},window.speechSynthesis.speak(l)};if(C.value[e]){K.value=e,t();return}let s=S.value;if(g.value&&x){for(const l in x)if((x[l].words||x[l].list||[]).some(u=>u.some(a=>{const _=Array.isArray(a)?a[0]:a.word||a.en;return We(_)===e}))){s=l;break}}const i=new Audio(`vocabulary/audio/${s}/${e}.mp3`);G.value=i,i.onended=()=>{K.value=null,G.value=null},i.onerror=()=>{G.value=null,t()},i.play().catch(l=>{console.log("MP3æ’­æ”¾å—é˜»æˆ–æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè½¬TTS"),t()}),K.value=e},bo=e=>{K.value!==e&&(T.has(e)||Ne(e))},ko=e=>{if(!e)return console.warn("æ²¡æœ‰æ–‡æœ¬å¯è¯»");G.value&&(G.value.pause(),G.value=null),K.value=null,window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(e);t.lang="en-US",t.rate=.9,t.volume=1;const s=window.speechSynthesis.getVoices(),i=s.find(l=>l.name.includes("Google US"))||s.find(l=>l.lang.includes("en-US"));i&&(t.voice=i),window._debug_utterance=t,t.onerror=l=>{console.error("æœ—è¯»æŠ¥é”™:",l),l.error!=="canceled"&&l.error!=="interrupted"&&alert("è¯­éŸ³æ’­æ”¾å‡ºé”™: "+l.error)},setTimeout(()=>{window.speechSynthesis.speak(t),console.log("æ­£åœ¨æ’­æ”¾:",e,"ä½¿ç”¨è¯­éŸ³:",i?i.name:"ç³»ç»Ÿé»˜è®¤")},10)};function xo(e,t){let s=t.target.value.trim().toLowerCase(),i=e.en.toLowerCase();const l=n=>n.replace(/[\u2018\u2019`]/g,"'").replace(/\s+/g," "),d=l(s)===l(i);if(Se[e.en]=d?"correct":"error",d){if(T.has(e.en)||T.add(e.en),!g.value){Ee("learn",1),I.value.includes(e.en)||(I.value.push(e.en),Ee("kill",1));const u=y.value.findIndex(a=>a.w===e.en);u>-1&&y.value.splice(u,1);return}const n=y.value.findIndex(u=>u.w===e.en);if(n>-1){Ee("review",1);const u=y.value[n];u.stage+=1,u.stage>=Xe.length?(y.value.splice(n,1),A.value.includes(e.en)||(A.value.push(e.en),Ee("kill",1))):(u.time=Date.now()+Xe[u.stage]*6e4,y.value=[...y.value])}}else if(T.has(e.en)||T.add(e.en),!g.value)I.value.includes(e.en)&&(I.value=I.value.filter(u=>u!==e.en)),y.value.find(u=>u.w===e.en)||y.value.push({w:e.en,stage:0,time:Date.now()+Xe[0]*6e4});else{const n=y.value.findIndex(u=>u.w===e.en);n>-1&&(y.value[n].stage=0,y.value[n].time=Date.now()+Xe[0]*6e4)}}const Pt=e=>{if(A.value.includes(e)){if(!confirm(`ç¡®å®šè¦æ’¤é”€æ–©æ€ï¼Œæ¢å¤ "${e}" å—ï¼Ÿ`))return;A.value=A.value.filter(s=>s!==e),W(`"${e}" å·²æ¢å¤ ğŸº`);return}if(!confirm(`ç¡®å®šè¦æ–©æ€ "${e}" å—ï¼Ÿ
(å®ƒå°†å˜ä¸ºç´«è‰²å½’æ¡£çŠ¶æ€)`))return;A.value.push(e),Ee("kill",1);const t=y.value.findIndex(s=>s.w===e);t>-1&&y.value.splice(t,1),I.value.includes(e)&&(I.value=I.value.filter(s=>s!==e))};function Co(){const e={k:A.value,r:y.value,c:le.value,m:I.value,d:C.value,s:z.value,n:j.value},t=new Blob([JSON.stringify(e)],{type:"application/json"}),s=URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=`ielts_data_${new Date().toISOString().slice(0,10)}.json`,i.click()}const wo=e=>{if(navigator.clipboard)navigator.clipboard.writeText(e).then(()=>{});else{const t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}};function So(){document.getElementById("fileInput").click()}function Io(e){const t=e.target.files[0];if(!t)return;const s=new FileReader;s.onload=i=>{try{const l=JSON.parse(i.target.result);(l.k||l.r||l.d)&&(l.k&&(A.value=l.k),l.r&&(y.value=l.r),l.c&&(le.value=l.c),l.m&&(I.value=l.m),l.d&&(C.value=l.d),l.s&&(z.value=l.s),l.n&&(j.value=l.n),alert("åŒæ­¥æˆåŠŸ"),location.reload())}catch{alert("æ–‡ä»¶æ ¼å¼é”™è¯¯")}},s.readAsText(t),e.target.value=""}const ke=f(!1),et=f(""),$e=f(!1),tt=f(""),ot=f(""),gt=f(!1),Ot=f("");f(!1);const Me=f(!1),_t=f(null);let st=null;const Te=f("week"),z=F("my_ielts_stats_history",{}),Re=()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},Ee=(e,t=1)=>{const s=Re();z.value[s]||(z.value[s]={duration:0,review:0,kill:0,add:0}),typeof z.value[s][e]>"u"&&(z.value[s][e]=0),z.value[s][e]+=t,z.value={...z.value}},Wt=async()=>{if(_t.value){st&&(st.destroy(),st=null);try{const{Chart:e,registerables:t}=await us(()=>import("https://cdn.jsdelivr.net/npm/chart.js/+esm"),[],import.meta.url);e.register(...t);const s=document.body.classList.contains("dark")||document.documentElement.classList.contains("dark"),i=s?"#cbd5e1":"#666",l=s?"#334155":"#e5e7eb",d=Te.value==="week"?7:30,n=[],u=[],a=[],_=[],P=[],Y=new Date;for(let b=d-1;b>=0;b--){const k=new Date(Y.getTime()-b*24*60*60*1e3),q=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-${String(k.getDate()).padStart(2,"0")}`;n.push(String(k.getDate())+"æ—¥");const B=z.value[q]||{duration:0,review:0,learn:0,kill:0};u.push(Math.round(B.duration/60)),a.push(B.review||0),_.push(B.learn||0),P.push(B.kill||0)}st=new e(_t.value,{type:"bar",data:{labels:n,datasets:[{label:"æ–°å­¦ (ä¸ª)",data:_,backgroundColor:"rgba(16, 185, 129, 0.6)",borderColor:"#10b981",borderWidth:1,yAxisID:"y",order:4,stack:"combined"},{label:"å¤ä¹  (ä¸ª)",data:a,backgroundColor:"rgba(59, 130, 246, 0.6)",borderColor:"#3b82f6",borderWidth:1,yAxisID:"y",order:3,stack:"combined"},{label:"æ–©æ€ (ä¸ª)",data:P,backgroundColor:"rgba(239, 68, 68, 0.6)",borderColor:"#ef4444",borderWidth:1,yAxisID:"y",order:2,stack:"combined"},{type:"line",label:"ä¸“æ³¨ (åˆ†)",data:u,borderColor:"#f59e0b",backgroundColor:"#f59e0b",borderWidth:2,pointRadius:3,tension:.3,yAxisID:"y1",order:1}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:i}}},scales:{x:{ticks:{color:i},grid:{color:l}},y:{type:"linear",display:!0,position:"left",stacked:!0,title:{display:!0,text:"å•è¯é‡",color:i},ticks:{color:i},grid:{color:l}},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},title:{display:!0,text:"åˆ†é’Ÿ",color:i},ticks:{color:i}}}}})}catch(e){console.error("å›¾è¡¨åŠ è½½å¤±è´¥:",e)}}};pe(Me,e=>{e&&setTimeout(Wt,100)}),pe(Te,()=>{Me.value&&Wt()});function $o(){et.value="",ke.value=!0,setTimeout(()=>{var e;return(e=document.getElementById("custom-word-input"))==null?void 0:e.focus()},100)}function Nt(){const e=et.value;if(!e||!e.trim()){ke.value=!1;return}const t=e.trim();ke.value=!1,setTimeout(()=>{pt(t).zh==="æœªæ‰¾åˆ°é‡Šä¹‰"?(ot.value=t,tt.value="",$e.value=!0,setTimeout(()=>{var i;return(i=document.getElementById("custom-meaning-input"))==null?void 0:i.focus()},100)):Ut(t)},200)}function Rt(){const e=tt.value.trim();e&&($e.value=!1,C.value={...C.value,[ot.value]:{zh:e}},Ut(ot.value))}function Ut(e){ke.value=!1,$e.value=!1;const t=y.value.findIndex(s=>s.w===e);t>-1?(y.value[t].stage=0,y.value[t].time=Date.now(),W(`"${e}" å·²é‡ç½®å¤ä¹ è¿›åº¦ï¼ğŸ”„`)):(y.value.push({w:e,stage:0,time:Date.now()}),W(`"${e}" å·²åŠ å…¥å¤ä¹ ï¼âœ…`)),g.value&&ft()}function W(e){Ot.value=e,gt.value=!0,setTimeout(()=>{gt.value=!1},1500)}const Ue=f(!1),te=ce({oldWord:"",newWord:"",newZh:""}),Mo=e=>{te.oldWord=e.en,te.newWord=e.en,te.newZh=e.zh,Ue.value=!0},To=()=>{const e=te.oldWord,t=te.newWord.trim(),s=te.newZh.trim();if(!t)return alert("å•è¯ä¸èƒ½ä¸ºç©º");if(e===t)C.value[e]?C.value[e].zh=s:C.value={...C.value,[e]:{zh:s}},W("é‡Šä¹‰å·²æ›´æ–°");else{if(C.value[e]){const l={...C.value};delete l[e],l[t]={zh:s},C.value=l}else C.value={...C.value,[t]:{zh:s}};const i=y.value.findIndex(l=>l.w===e);i>-1&&(y.value[i].w=t),A.value.includes(e)&&(A.value=A.value.filter(l=>l!==e),A.value.push(t)),I.value.includes(e)&&(I.value=I.value.filter(l=>l!==e),I.value.push(t)),W(`å·²ä¿®æ­£: ${e} -> ${t}`)}g.value&&ft(),Ue.value=!1},xe=f(!1),nt=f(window.innerWidth-320-5),yt=f(window.innerHeight*.26),oe=f(null);let w=null,mt=!1,bt=!1,Bt=0,Gt=0,Ae=null;const Kt=e=>{const t=oe.value;if(!t)return{x:0,y:0};const s=t.getBoundingClientRect();return{x:e.clientX-s.left,y:e.clientY-s.top}},kt=()=>{if(!oe.value)return;const e=oe.value,t=e.getBoundingClientRect(),s=Math.ceil(t.width),i=Math.ceil(t.height);s<1||i<1||(e.width!==s||e.height!==i?(e.width=s,e.height=i,w=e.getContext("2d"),w&&(w.strokeStyle="#ffffff",w.lineWidth=3,w.lineCap="round",w.lineJoin="round")):w||(w=e.getContext("2d")))},Eo=e=>{if(Ce.value||(e.cancelable&&e.preventDefault(),!oe.value)||(w||kt(),!w))return;if(mt=!0,e.target.setPointerCapture&&e.pointerId)try{e.target.setPointerCapture(e.pointerId)}catch{}w.strokeStyle="#ffffff",w.lineWidth=3,w.beginPath();const{x:s,y:i}=Kt(e);w.moveTo(s,i)},Ao=e=>{if(!mt||!w)return;e.cancelable&&e.preventDefault();const{x:t,y:s}=Kt(e);w.lineTo(t,s),w.stroke()},Vt=e=>{if(mt=!1,e&&e.target.releasePointerCapture&&e.pointerId)try{e.target.releasePointerCapture(e.pointerId)}catch{}},xt=()=>{!oe.value||!w||w.clearRect(0,0,oe.value.width,oe.value.height)},Do=e=>{e.target.tagName!=="BUTTON"&&(bt=!0,Bt=e.clientX-nt.value,Gt=e.clientY-yt.value,window.addEventListener("mousemove",jt),window.addEventListener("mouseup",Jt))},jt=e=>{bt&&(nt.value=e.clientX-Bt,yt.value=e.clientY-Gt)},Jt=()=>{bt=!1,window.removeEventListener("mousemove",jt),window.removeEventListener("mouseup",Jt)},Ft=()=>{xe.value=!xe.value,xe.value?(dt(()=>{kt(),oe.value&&!Ae&&(Ae=new ResizeObserver(()=>{kt()}),Ae.observe(oe.value))}),window.addEventListener("keydown",Ht)):(Ae&&(Ae.disconnect(),Ae=null),window.removeEventListener("keydown",Ht))},Ht=e=>{xe.value&&e.code==="Space"&&(e.preventDefault(),xt())};function zo(){if(y.value.length===0){alert("å½“å‰æ²¡æœ‰é”™é¢˜è®°å½•");return}let e=`My IELTS Mistakes

`;[...y.value].sort((d,n)=>d.time-n.time).forEach((d,n)=>{const u=pt(d.w);e+=`${n+1}. ${u.en} ${u.pos}
   [ä¹‰] ${u.zh}
`,u.example&&(e+=`   [ä¾‹] ${u.example}
`),u.notation&&(e+=`   [æ³¨] ${u.notation}
`),e+=`
`});const s=new Blob([e],{type:"text/plain;charset=utf-8"}),i=URL.createObjectURL(s),l=document.createElement("a");l.href=i,l.download="mistakes.txt",l.click(),URL.revokeObjectURL(i)}const Xt=J(()=>(le.value[S.value]||[]).includes(D.value)),Lo=()=>{const e=S.value,t=D.value,s={...le.value};s[e]||(s[e]=[]),s[e].includes(t)?s[e]=s[e].filter(i=>i!==t):s[e].push(t),le.value=s},Zt=e=>{const t=D.value+e;t>=0&&t<Ie.value.length&&(D.value=t,window.scrollTo({top:0,behavior:"smooth"}))},Po=[.0834,10,15,25,30,45,60],lt=F("my_ielts_focus_dur",30),De=()=>Math.round(lt.value*60),Ce=f(!1),Ct=f(!1),N=f(De()),se=f("idle"),L=f(!1);let X=null;const Yt=e=>{const t=Math.floor(e/60),s=e%60;return`${t<10?"0"+t:t}:${s<10?"0"+s:s}`},Be=()=>{localStorage.setItem("my_ielts_pomo",JSON.stringify({seconds:N.value,isBreak:L.value,state:se.value,timestamp:Date.now()}))},Oo=()=>{X&&clearInterval(X),X=null,se.value="paused",Be()},ze=e=>{L.value=!0,N.value=Math.round(e*60),Ce.value=!1,at()},Wo=()=>{L.value=!1,N.value=De(),Ce.value=!1,at()},No=()=>{se.value==="idle"&&!L.value&&(N.value=De())},Ro=()=>{Ce.value=!1,Be()},at=()=>{se.value!=="running"&&(X&&clearInterval(X),N.value<=0&&(N.value=L.value?5*60:De()),se.value="running",Be(),X=setInterval(()=>{if(N.value>0){N.value--;const e=L.value?"â˜•":"ğŸ…",t=L.value?"ä¼‘æ¯":"ä¸“æ³¨";document.title=`${Yt(N.value)} ${e} ${t}`,L.value||Ee("duration",1),Be()}else{wt(!1);const e=L.value;Ct.value=e,oo(e?vi:di),Ce.value=!0,document.title="ğŸ”” æ—¶é—´åˆ°ï¼",L.value=!e,N.value=L.value?5*60:De(),Be()}},1e3))},wt=(e=!0)=>{X&&(clearInterval(X),X=null),se.value="idle",localStorage.removeItem("my_ielts_pomo"),e&&(N.value=L.value?5*60:De(),document.title="MyIELTS")};ls(()=>{X&&clearInterval(X)}),Mt(()=>{const e=localStorage.getItem("my_ielts_pomo");if(e)try{const t=JSON.parse(e);if(L.value=t.isBreak,t.state==="paused")N.value=t.seconds,se.value="paused";else if(t.state==="running"){const s=Date.now(),i=Math.floor((s-t.timestamp)/1e3),l=t.seconds-i;l>0?(N.value=l,at()):(N.value=0,wt(!1))}}catch(t){console.error("ç•ªèŒ„é’Ÿæ¢å¤å¤±è´¥",t)}window.speechSynthesis.getVoices()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&se.value});const Ge=f(!1),Le=f(""),Z=f([]),Uo=()=>{Le.value="",Z.value=[],Ge.value=!0,setTimeout(()=>{var e;return(e=document.getElementById("global-search-input"))==null?void 0:e.focus()},100)},ie=f(-1),qt=e=>{if(Z.value.length===0)return;const t=Z.value.length;ie.value===-1?ie.value=e>0?0:t-1:ie.value=(ie.value+e+t)%t,dt(()=>{const s=document.querySelector(".search-item.selected");s&&s.scrollIntoView({block:"nearest",behavior:"smooth"})})},Bo=()=>{ie.value=-1;const e=Le.value.trim().toLowerCase();if(!e){Z.value=[];return}const t=[],s=new Set;for(const i in C.value)i.toLowerCase().includes(e)&&(t.push({en:i,zh:C.value[i].zh,source:"æˆ‘çš„ç”Ÿè¯æœ¬",isCustom:!0}),s.add(i));if(x)for(const i in x){const l=x[i].words||x[i].list||[];let d=0,n=0;const u=35,a=45;for(let _=0;_<l.length;_++){const P=l[_];let Y=0;for(const k of P)Y++;const b=n+Y;n>0&&(n>=u||b>a)&&(d++,n=0);for(const k of P){let q="",B="";Array.isArray(k)?(q=k[0],B=k[2]||""):(q=k.word||k.en,B=k.meaning||k.trans||k.zh||"");const ve=We(q);ve.toLowerCase().includes(e)&&!s.has(ve)&&(t.push({en:ve,zh:B,source:`${i} Â· Part ${d+1}`,chapter:i,partIdx:d,isCustom:!1}),s.add(ve))}n+=Y}if(t.length>100)break}t.sort((i,l)=>{const d=i.en.toLowerCase(),n=l.en.toLowerCase();if(d===e&&n!==e)return-1;if(n===e&&d!==e)return 1;const u=d.startsWith(e),a=n.startsWith(e);return u&&!a?-1:a&&!u?1:d.length-n.length}),Z.value=t.slice(0,50)},Go=()=>{const e=Le.value.trim().toLowerCase();if(!e||Z.value.length===0)return;if(ie.value!==-1){const s=Z.value[ie.value];if(s){Ke(s);return}}const t=Z.value.find(s=>s.en.toLowerCase()===e);Ke(t||Z.value[0])},Ko=e=>{if(!e.source||e.source==="ç”Ÿè¯æœ¬"||e.source==="æœªçŸ¥"){W("è¯¥è¯å±äºè‡ªå®šä¹‰ç”Ÿè¯ï¼Œæ— å›ºå®šç« èŠ‚ä½ç½®");return}const t=" Part ",s=e.source.lastIndexOf(t);if(s===-1){console.warn("æ— æ³•è§£æå‡ºå¤„æ ¼å¼:",e.source);return}const i=e.source.substring(0,s),l=e.source.substring(s+t.length),d=parseInt(l)-1,n={en:e.en,chapter:i,partIdx:d,isCustom:!1};Ke(n)},Ke=e=>{e.isCustom||e.partIdx===void 0||(Ge.value=!1,g.value=!1,ht=!0,S.value=e.chapter,D.value=e.partIdx,dt(()=>{ht=!1}),setTimeout(()=>{const t="word-row-"+e.en.replace(/\s+/g,"_"),s=document.getElementById(t);s?(s.scrollIntoView({behavior:"smooth",block:"center"}),s.classList.add("highlight-flash"),setTimeout(()=>s.classList.remove("highlight-flash"),2e3)):console.warn("æœªæ‰¾åˆ°å…ƒç´ :",t)},400))},it=ce({}),Vo=e=>{it[e]=!it[e]},Ve=e=>!e||!e.list||e.list.length===0?!1:e.list.every(t=>R.has(t.en)),jo=e=>{const t=Ve(e);e.list.forEach(s=>{t?R.delete(s.en):R.add(s.en)})},Jo=()=>{const e=[];if(ue.value.forEach(s=>{s.list&&s.list.forEach(i=>e.push(i.en))}),e.length===0)return W("å½“å‰æ²¡æœ‰å•è¯å¯å¤åˆ¶");const t=e.join(`
`);if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{W(`å·²å¤åˆ¶ ${e.length} ä¸ªå•è¯! ğŸ“‹`)});else{const s=document.createElement("textarea");s.value=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),W(`å·²å¤åˆ¶ ${e.length} ä¸ªå•è¯! ğŸ“‹`)}},Fo=e=>{if(!e||!e.list||e.list.length===0)return;const t=e.list.map(s=>s.en).join(`
`);if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{W(`å·²å¤åˆ¶è¯¥ç»„ ${e.list.length} ä¸ªå•è¯! ğŸ“‹`)});else{const s=document.createElement("textarea");s.value=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),W(`å·²å¤åˆ¶è¯¥ç»„ ${e.list.length} ä¸ªå•è¯! ğŸ“‹`)}},Qt=f(window.innerWidth),Ho=()=>Qt.value=window.innerWidth;Mt(()=>window.addEventListener("resize",Ho));const Xo=J(()=>xe.value?nt.value>Qt.value/2-100:!1),je=f(!1),St=f(""),ne=ce({title:"",content:""}),ct=e=>`${S.value}_${e}`,It=e=>{const t=ct(e);St.value=t;const s=j.value[t]||{title:"",content:""};ne.title=s.title,ne.content=s.content,je.value=!0},Je=f(!1),Pe=ce({title:"",content:"",groupId:-1}),$t=e=>{if(!e)return"";try{return ds.parse(e)}catch{return e}},Zo=e=>{const t=ct(e),s=j.value[t];if(!s||!s.title&&!s.content){It(e);return}Pe.title=s.title||"è¯ä¹‰è¾¨æ",Pe.content=s.content,Pe.groupId=e,Je.value=!0},Yo=()=>{Je.value=!1,It(Pe.groupId)},qo=()=>{if(!ne.title.trim()&&!ne.content.trim()){const e={...j.value};delete e[St.value],j.value=e}else j.value={...j.value,[St.value]:{title:ne.title.trim(),content:ne.content}};je.value=!1},rt=e=>{const t=ct(e),s=j.value[t];return s&&(s.title&&s.title.trim()||s.content&&s.content.trim())},Qo=e=>{const t=ct(e),s=j.value[t];return s?s.title&&s.title.trim()?s.title.trim():s.content&&s.content.trim()?"ğŸ“ è¯ä¹‰è¾¨æ":"":""},es=e=>{confirm(`ç¡®è®¤ç§»é™¤ "${e}" çš„å¬è§‰ä¾èµ–æ ‡è®°å—ï¼Ÿ`)&&(_e.value=_e.value.filter(t=>t!==e))},Fe=f(!1),U=ce({token:localStorage.getItem("my_ielts_gh_token")||"",gistId:localStorage.getItem("my_ielts_gh_gist_id")||""}),de=f(!1),ts=()=>{localStorage.setItem("my_ielts_gh_token",U.token.trim()),localStorage.setItem("my_ielts_gh_gist_id",U.gistId.trim()),alert("é…ç½®å·²ä¿å­˜ï¼âœ…"),Fe.value=!1},os=async()=>{if(!U.token||!U.gistId)return alert("è¯·å…ˆç‚¹å‡» âš™ï¸ é…ç½® GitHub Token å’Œ Gist ID");if(confirm("ç¡®å®šè¦è¦†ç›–äº‘ç«¯æ•°æ®å—ï¼Ÿ(äº‘ç«¯æ—§æ•°æ®å°†ä¸¢å¤±)")){de.value=!0;try{const e={k:A.value,r:y.value,c:le.value,m:I.value,d:C.value,s:z.value,n:j.value,st:Oe.value,ap:_e.value},t=JSON.stringify(e),s=`https://api.github.com/gists/${U.gistId}`,i=await fetch(s,{method:"PATCH",headers:{Authorization:`token ${U.token}`,"Content-Type":"application/json"},body:JSON.stringify({files:{"data.json":{content:t}}})});if(i.ok)alert("â˜ï¸ ä¸Šä¼ æˆåŠŸï¼æ•°æ®å·²å®‰å…¨ä¿å­˜åˆ° Gistã€‚");else throw new Error(i.statusText)}catch(e){alert("ä¸Šä¼ å¤±è´¥ï¼Œè¯·æ£€æŸ¥ Token æˆ–ç½‘ç»œ: "+e.message),console.error(e)}finally{de.value=!1}}},ss=async()=>{if(!U.token||!U.gistId)return alert("è¯·å…ˆç‚¹å‡» âš™ï¸ é…ç½® GitHub Token å’Œ Gist ID");if(confirm("âš ï¸ è­¦å‘Šï¼šè¿™å°†ç”¨äº‘ç«¯æ•°æ®è¦†ç›–å½“å‰æœ¬åœ°è¿›åº¦ï¼ç¡®å®šå—ï¼Ÿ")){de.value=!0;try{const e=`https://api.github.com/gists/${U.gistId}`,t=await fetch(e,{method:"GET",headers:{Authorization:`token ${U.token}`}});if(!t.ok)throw new Error(t.statusText);const i=(await t.json()).files["data.json"].content,l=JSON.parse(i);l.k&&(A.value=l.k),l.r&&(y.value=l.r),l.c&&(le.value=l.c),l.m&&(I.value=l.m),l.d&&(C.value=l.d),l.s&&(z.value=l.s),l.n&&(j.value=l.n),l.st&&(Oe.value=l.st),l.ap&&(_e.value=l.ap),alert("â˜ï¸ åŒæ­¥æˆåŠŸï¼æœ¬åœ°è¿›åº¦å·²æ›´æ–°ã€‚"),location.reload()}catch(e){alert("ä¸‹è½½å¤±è´¥: "+e.message),console.error(e)}finally{de.value=!1}}};return(e,t)=>{var s,i,l,d;return r(),c(he,null,[o("div",vs,[o("div",ps,[o("div",fs,[o("div",hs,[o("div",gs,[o("button",{class:$(["tab-btn",{active:!g.value}]),onClick:t[0]||(t[0]=n=>g.value=!1)},"ğŸ“– å­¦ä¹ ",2),o("button",{class:$(["tab-btn review-tab",{active:g.value}]),onClick:t[1]||(t[1]=n=>g.value=!0)},[V(" ğŸ”¥ å¤ä¹ "),fe(y).filter(n=>n.time<Date.now()).length>0?(r(),c("span",_s)):p("",!0)],2)]),o("label",ys,[O(o("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=n=>M.value=n)},null,512),[[as,M.value]]),o("span",null,v(M.value?"ğŸ™ï¸ ":"ğŸ‘€ "),1)]),M.value?(r(),c("button",{key:0,class:"mobile-only tool-btn-simple",onClick:Lt,style:{"margin-left":"10px","font-size":"20px"},title:Ye.value?"å…¨éƒ¨éšè—":"å…¨éƒ¨æ˜¾ç¤º"},v(Ye.value?"ğŸ“–":"ğŸ™ˆ"),9,ms)):p("",!0)]),o("div",bs,[g.value?p("",!0):(r(),c("div",ks,[O(o("select",{"onUpdate:modelValue":t[3]||(t[3]=n=>to(S)?S.value=n:null),class:"sel-chap"},[(r(!0),c(he,null,we(mo.value,n=>(r(),c("option",{key:n.value,value:n.value},v(n.label)+v(n.isDone?"âœ…":""),9,xs))),128))],512),[[Tt,fe(S)]]),O(o("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>D.value=n),class:"sel-part"},[(r(!0),c(he,null,we(_o.value,(n,u)=>(r(),c("option",{key:u,value:u},v(n),9,Cs))),128))],512),[[Tt,D.value]])])),o("div",{class:$(["stats-bar",{"compact-mode":!g.value}])},[g.value?(r(),c("span",ws,"ğŸ“š "+v(Qe.value.total),1)):p("",!0),o("span",Ss,"ğŸ”¥ "+v(Qe.value.learning),1),o("span",Is,"âœ… "+v(Qe.value.learned),1),o("span",$s,"ğŸŒ‘ "+v(Qe.value.unlearned),1)],2)]),o("div",Ms,[g.value?(r(),c("button",{key:0,onClick:t[5]||(t[5]=n=>Me.value=!0),class:"btn action-btn",title:"å­¦ä¹ ç»Ÿè®¡"},"ğŸ“Š")):p("",!0),o("button",{onClick:Ft,class:$(["btn action-btn desktop-only",{"active-pad":xe.value}]),title:"æ‰“å¼€/å…³é—­è‰ç¨¿æ¿"},"ğŸ–Šï¸",2),g.value?(r(),c("button",{key:1,onClick:zo,class:"btn action-btn special-btn desktop-only",title:"å¯¼å‡ºé”™é¢˜æ–‡æœ¬ (TXT)"},"ğŸ“¥ ")):p("",!0),o("button",{onClick:Co,class:"btn action-btn",title:"å¯¼å‡º/å¤‡ä»½è¿›åº¦ (JSON)"},"â¬‡ï¸ "),o("button",{onClick:So,class:"btn action-btn",style:{"margin-left":"8px"},title:"å¯¼å…¥/æ¢å¤è¿›åº¦"},"â¬†ï¸ "),o("input",{type:"file",id:"fileInput",hidden:"",onChange:Io},null,32),o("div",{class:$(["pomo-compact",{"break-mode":L.value}])},[!L.value&&se.value==="idle"?O((r(),c("select",{key:0,"onUpdate:modelValue":t[6]||(t[6]=n=>to(lt)?lt.value=n:null),onChange:No,class:"pomo-select",title:"ç‚¹å‡»è°ƒæ•´ä¸“æ³¨æ—¶é•¿"},[(r(),c(he,null,we(Po,n=>o("option",{key:n,value:n},v(n<1?"âš¡ 05s":(n<10?"0"+n:n)+":00"),9,Ts)),64))],544)),[[Tt,fe(lt)]]):(r(),c("span",Es,v(Yt(N.value)),1)),se.value!=="running"?(r(),c("button",{key:2,onClick:at,class:"pomo-btn-small play-btn"},"â–¶")):(r(),c("button",{key:3,onClick:Oo,class:"pomo-btn-small pause-btn"},"â¸")),o("button",{onClick:t[7]||(t[7]=n=>wt(!0)),class:"pomo-btn-small stop-btn"},"â¹")],2)])])]),Ce.value?(r(),c("div",{key:0,class:"modal-overlay",onClick:m(Ro,["self"])},[o("div",Ds,[o("button",{class:"modal-close-icon",onClick:t[8]||(t[8]=n=>Ce.value=!1)},"âœ•"),o("div",zs,v(L.value?"ğŸ”‹":"ğŸ‰"),1),o("h2",Ls,v(Ct.value?"å……ç”µå®Œæ¯•":"ä¸“æ³¨å®Œæˆ"),1),Ct.value?(r(),c("div",Os,[o("button",{onClick:Wo,class:"modal-btn focus-btn"},"å¼€å§‹ä¸“æ³¨")])):(r(),c("div",Ps,[o("button",{onClick:t[9]||(t[9]=n=>ze(3)),class:"modal-btn break-btn"},"3m"),o("button",{onClick:t[10]||(t[10]=n=>ze(5)),class:"modal-btn break-btn"},"5m"),o("button",{onClick:t[11]||(t[11]=n=>ze(10)),class:"modal-btn break-btn"},"10m"),o("button",{onClick:t[12]||(t[12]=n=>ze(15)),class:"modal-btn break-btn"},"15m"),o("button",{onClick:t[13]||(t[13]=n=>ze(25)),class:"modal-btn long-break-btn"},"25m"),o("button",{onClick:t[14]||(t[14]=n=>ze(.05)),class:"modal-btn focus-btn"},"âš¡ 03s (æµ‹è¯•)")]))])],8,As)):p("",!0),ue.value.length>0?(r(),c("div",Ws,[o("div",Ns,[Rs,o("div",Us,[V(" å•è¯ "),g.value?(r(),c("button",{key:0,class:"toggle-source-btn",onClick:vo,title:be.value?"éšè—å…¨éƒ¨å‡ºå¤„":"æ˜¾ç¤ºå…¨éƒ¨å‡ºå¤„"},[be.value?(r(),c("svg",Gs,js)):(r(),c("svg",Js,Xs))],8,Bs)):p("",!0),g.value?p("",!0):(r(),c("button",{key:1,class:"toggle-source-btn",onClick:Jo,title:"å¤åˆ¶æœ¬é¡µæ‰€æœ‰å•è¯",style:{"margin-left":"4px"}}," ğŸ“‹ "))]),Zs,o("div",Ys,[V(" è¯ä¹‰ "),M.value?(r(),c("button",{key:0,class:"toggle-all-btn",onClick:Lt,title:Ye.value?"å…¨éƒ¨éšè—":"å…¨éƒ¨æ˜¾ç¤º"},v(Ye.value?"ğŸ“–":"ğŸ™ˆ"),9,qs)):p("",!0)]),M.value?p("",!0):(r(),c("div",Qs,"ä¾‹å¥")),M.value?p("",!0):(r(),c("div",en,"æ‹“å±•")),tn])])):p("",!0),o("div",on,[ue.value.length===0?(r(),c("div",sn,v(g.value?"æš‚æ— é”™é¢˜ ğŸ‰":"æœ¬ç« æ•°æ®åŠ è½½ä¸­"),1)):p("",!0),(r(!0),c(he,null,we(ue.value,(n,u)=>(r(),c("div",{key:u,class:"vocab-block",style:Q({borderLeftColor:n.color})},[g.value?p("",!0):(r(),c("div",{key:0,class:$(["group-note-bar",{"has-note":rt(n.groupId)}]),style:Q({backgroundColor:rt(n.groupId)?n.color+"15":"transparent",borderBottom:rt(n.groupId)?"1px solid "+n.color+"20":"none"})},[o("div",{class:"note-title",onClick:a=>Zo(n.groupId)},[rt(n.groupId)?(r(),c("span",{key:0,class:"note-exist-text",style:Q({color:n.color})},[ln,V(" "+v(Qo(n.groupId)),1)],4)):(r(),c("span",an," â• æ·»åŠ è¾¨æç¬”è®° "))],8,nn),o("div",cn,[o("button",{class:"note-action-btn copy-group-btn",onClick:m(a=>Fo(n),["stop"]),title:"å¤åˆ¶æœ¬ç»„å•è¯"}," ğŸ“‹ ",8,rn),o("button",{class:"note-action-btn",onClick:m(a=>It(n.groupId),["stop"]),title:"ç¼–è¾‘ç¬”è®°"}," âš™ï¸ ",8,un)])],6)),g.value&&n.title?(r(),c("div",{key:1,class:"group-title",style:Q([{color:n.color,backgroundColor:n.color+"15"},{cursor:"pointer",display:"flex","align-items":"center","user-select":"none"}]),onClick:a=>Vo(n.title)},[o("span",vn,v(n.title),1),o("button",{class:"stage-source-btn",onClick:m(a=>jo(n),["stop"]),title:Ve(n)?"éšè—æœ¬é˜¶æ®µå‡ºå¤„":"æ˜¾ç¤ºæœ¬é˜¶æ®µå‡ºå¤„",style:Q({color:Ve(n)?n.color:"#9ca3af",opacity:Ve(n)?1:.5})},[(r(),c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:Ve(n)?"currentColor":"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},_n,8,fn))],12,pn),yn,o("button",{class:"collapse-btn",style:Q({color:n.color,borderColor:n.color})},v(it[n.title]?"ğŸ”½ å±•å¼€":"ğŸ”¼ æ”¶èµ·"),5)],12,dn)):p("",!0),O(o("div",null,[(r(!0),c(he,null,we(n.list,a=>(r(),c("div",{key:a.en,class:$(["grid-layout row-item",{"mastered-row":a._isMastered&&!a._isKilled&&!g.value,"killed-row":a._isKilled&&!g.value}]),id:"word-row-"+a.en.replace(/\s+/g,"_")},[o("div",bn,[V(v(g.value?a.id:a._id)+" ",1),(a._isMastered||a._isKilled)&&!g.value?(r(),c("span",{key:0,class:"status-icon",style:Q({color:a._isKilled?"#a855f7":"#10b981",fontWeight:"bold"})}," âœ” ",4)):p("",!0)]),o("div",kn,[o("div",xn,[M.value?(r(),c("div",Kn,[o("span",{class:$(["speaker",{playing:K.value===a.en}]),onClick:m(_=>Ne(a.en),["stop"])},v(K.value===a.en?"â¸ï¸":"ğŸ”Š"),11,Vn),o("div",jn,[o("input",{type:"text",class:$(["dictation-input",[Se[a.en],{"mastered-input":a._isMastered&&!g.value}]]),placeholder:"è¾“å…¥...",onChange:_=>xo(a,_),onInput:_=>Se[a.en]="",onFocus:_=>bo(a.en),onKeydown:[t[15]||(t[15]=ge(m(()=>{},["stop"]),["space"])),ge(m(At,["prevent"]),["tab"]),ge(m(At,["prevent"]),["enter"])],autocomplete:"off"},null,42,Jn),Se[a.en]==="error"?(r(),c("div",Fn,"âŒ "+v(a.en),1)):p("",!0),ae.has(a.en)?(r(),c("div",Hn,"ğŸ‘€ "+v(a.en),1)):p("",!0)]),o("button",{class:"peek-btn",onClick:m(_=>no(a.en),["stop"]),title:ae.has(a.en)?"éšè—ç­”æ¡ˆ":"å·çœ‹ç­”æ¡ˆ"},v(ae.has(a.en)?"ğŸ™ˆ":"ğŸ‘ï¸"),9,Xn)])):(r(),c("div",Cn,[o("div",wn,[o("span",{class:"en-text",onClick:m(_=>Ne(a.en),["stop"]),style:{cursor:"pointer"},title:"ç‚¹å‡»å‘éŸ³"},v(a.en),9,Sn),o("span",{class:$(["speaker",{playing:K.value===a.en}]),onClick:m(_=>Ne(a.en),["stop"])},v(K.value===a.en?"â¸ï¸":"ğŸ”Š"),11,In),fe(_e).includes(a.en)?(r(),c("span",{key:0,onClick:m(_=>es(a.en),["stop"]),title:"è¯¥è¯æ›¾ä¾èµ–å¬éŸ³å›å¿† (å¬è§‰å°è®°)",style:{"font-size":"14px","margin-left":"6px",cursor:"help"}}," ğŸ‘‚ ",8,$n)):p("",!0),a.source!=="ç”Ÿè¯æœ¬"?(r(),c("button",{key:1,class:"copy-btn",onClick:m(_=>wo(a.en),["stop"]),title:"ç‚¹å‡»å¤åˆ¶"},"ğŸ“‹",8,Mn)):p("",!0),g.value&&a.notation==="æˆ‘çš„ç”Ÿè¯æœ¬"?(r(),c("button",{key:2,class:"copy-btn edit-btn",onClick:m(_=>Mo(a),["stop"]),title:"ä¿®æ”¹å•è¯/é‡Šä¹‰"},"âœ",8,Tn)):p("",!0),g.value&&!be.value&&a.source!=="ç”Ÿè¯æœ¬"?(r(),c("button",{key:3,class:"copy-btn location-btn",onClick:m(_=>po(a.en),["stop"]),title:R.has(a.en)?"éšè—å‡ºå¤„":"æŸ¥çœ‹å‡ºå¤„",style:Q({color:R.has(a.en)?"#3b82f6":"",opacity:R.has(a.en)?"1":""})},[R.has(a.en)?(r(),c("svg",An,Ln)):(r(),c("svg",Pn,Nn))],12,En)):p("",!0)]),be.value||R.has(a.en)?(r(),c("div",{key:0,class:"word-source-row clickable-source",onClick:m(_=>Ko(a),["stop"]),title:"ç‚¹å‡»è·³è½¬åˆ°åŸæ–‡ä½ç½® ğŸš€"}," ğŸ“ "+v(a.source)+" âœ ",9,Rn)):p("",!0),g.value&&a._review?(r(),c("div",Un,[a._review.time<Date.now()?(r(),c("span",Bn,"å¾…å¤ä¹ ")):(r(),c("span",Gn,v(Math.round((a._review.time-Date.now())/6e4))+"m",1))])):p("",!0)]))]),o("div",Zn,v(a.pos),1),o("button",{class:"mobile-only mobile-kill",onClick:_=>Pt(a.en),style:Q(M.value?{top:"auto",bottom:"10px",right:"10px",background:"#fff",border:"1px solid #eee",borderRadius:"50%",width:"30px",height:"30px"}:{})},v(a._isKilled?"â†º":"âœ•"),13,Yn)]),o("div",qn,v(a.pos),1),o("div",{class:$(["col-zh",{"interactive-zh":M.value}]),onClick:_=>M.value?lo(a.en):null},[o("div",{class:$(["zh-text",{"blur-zh":M.value&&!T.has(a.en)&&a.pos!=="è‡ªé€‰"}])},v(a.zh),3),a.notation&&!M.value?(r(),c("div",el,v(a.notation),1)):p("",!0)],10,Qn),M.value?p("",!0):(r(),c("div",tl,[o("div",ol,[o("span",null,v(a.example),1),a.example?(r(),c("span",{key:0,class:"speaker-small",onClick:m(_=>ko(a.example),["stop"]),title:"è¯»ä¾‹å¥"},"ğŸ”‰",8,sl)):p("",!0)])])),M.value?p("",!0):(r(),c("div",nl,v(a.notation||""),1)),o("div",ll,[o("button",{class:"kill-btn",onClick:_=>Pt(a.en),title:a._isKilled?"æ¢å¤/æ’¤é”€æ–©æ€":"æ–©æ€/å½’æ¡£",style:Q({color:a._isKilled?"#a855f7":""})},v(a._isKilled?"â†º":"âœ•"),13,al)])],10,mn))),128))],512),[[is,!it[n.title]]])],4))),128)),!g.value&&Ie.value.length>1?(r(),c("div",il,[o("button",{class:"page-btn big-btn",disabled:D.value===0,onClick:t[16]||(t[16]=n=>Zt(-1))},"â¬…ï¸ ä¸Šä¸€é¡µ",8,cl),o("div",rl,[o("span",ul,v(D.value+1)+" / "+v(Ie.value.length),1),o("button",{class:$(["finish-btn",{done:Xt.value}]),onClick:Lo,title:"æ ‡è®°æœ¬é¡µä¸ºå·²å®Œæˆ"},v(Xt.value?"âœ… å·²å®Œæˆ":"â­• æ ‡è®°å®Œæˆ"),3)]),o("button",{class:"page-btn big-btn",disabled:D.value===Ie.value.length-1,onClick:t[17]||(t[17]=n=>Zt(1))},"ä¸‹ä¸€é¡µ â¡ï¸",8,dl)])):p("",!0),vl]),xe.value?(r(),c("div",{key:2,class:"scratchpad-window",style:Q({left:nt.value+"px",top:yt.value+"px"})},[o("div",{class:"pad-header",onMousedown:Do},[pl,o("button",{class:"pad-close",onClick:Ft},"âœ•")],32),o("canvas",{ref_key:"canvasRef",ref:oe,class:"pad-canvas",style:{"touch-action":"none",display:"block"},onPointerdown:Eo,onPointermove:Ao,onPointerup:Vt,onPointerleave:Vt,onDblclick:xt},null,544),o("div",{class:"pad-footer"},[fl,o("button",{class:"pad-btn-clear",onClick:xt},"ğŸ—‘ï¸ (Space)")])],4)):p("",!0),o("div",{class:$(["floating-action-group",{"pos-left":Xo.value}])},[g.value?(r(),c("button",{key:0,onClick:ft,class:"floating-btn refresh-btn",title:"åˆ·æ–°æ•°æ®"},"ğŸ”„")):p("",!0),g.value?p("",!0):(r(),c("button",{key:1,onClick:ao,class:"floating-btn story-btn",title:"æœ¬é¡µåŠ©è®°æ–‡ç« /æ•…äº‹"},"ğŸ“œ")),o("button",{onClick:$o,class:"floating-btn add-btn",title:"æ‰‹åŠ¨åŠ å…¥ç”Ÿè¯"},"â•"),o("button",{onClick:Uo,class:"floating-btn search-btn",title:"æœç´¢å•è¯/è¯æ ¹"},"ğŸ”"),o("button",{onClick:os,class:"floating-btn sync-btn",title:"ä¸Šä¼ è¿›åº¦åˆ°äº‘ç«¯",disabled:de.value},v(de.value?"â³":"â˜ï¸â¬†ï¸"),9,hl),o("button",{onClick:ss,class:"floating-btn sync-btn",title:"ä»äº‘ç«¯ä¸‹è½½è¿›åº¦",disabled:de.value},v(de.value?"â³":"â˜ï¸â¬‡ï¸"),9,gl),o("button",{onClick:t[18]||(t[18]=n=>Fe.value=!0),class:"floating-btn sync-btn",title:"é…ç½®äº‘åŒæ­¥",style:{"font-size":"20px"}}," âš™ï¸ ")],2),ke.value?(r(),c("div",{key:3,class:"modal-overlay",onClick:t[21]||(t[21]=m(n=>ke.value=!1,["self"]))},[o("div",_l,[yl,o("div",ml,[O(o("input",{id:"custom-word-input",type:"text","onUpdate:modelValue":t[19]||(t[19]=n=>et.value=n),class:"modal-input-field",placeholder:"è¯·è¾“å…¥å•è¯...",onKeydown:ge(Nt,["enter"]),autocomplete:"off"},null,40,bl),[[ee,et.value]])]),o("div",kl,[o("button",{onClick:t[20]||(t[20]=n=>ke.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),o("button",{onClick:Nt,class:"modal-btn",style:{background:"#2563eb",color:"white"}},"ç¡®å®š")])])])):p("",!0),$e.value?(r(),c("div",{key:4,class:"modal-overlay",onClick:t[24]||(t[24]=m(n=>$e.value=!1,["self"]))},[o("div",xl,[Cl,o("p",wl,[V(' è¯åº“ä¸­æœªæ‰¾åˆ° "'),o("strong",null,v(ot.value),1),V('"ï¼Œè¯·å¡«å†™ä¸­æ–‡æ„æ€ï¼š ')]),o("div",Sl,[O(o("input",{id:"custom-meaning-input",type:"text","onUpdate:modelValue":t[22]||(t[22]=n=>tt.value=n),class:"modal-input-field",placeholder:"ä¾‹å¦‚ï¼šå¼€é˜”çœ¼ç•Œ...",onKeydown:ge(Rt,["enter"]),autocomplete:"off"},null,40,Il),[[ee,tt.value]])]),o("div",$l,[o("button",{onClick:t[23]||(t[23]=n=>$e.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),o("button",{onClick:Rt,class:"modal-btn",style:{background:"#10b981",color:"white"}},"ä¿å­˜å¹¶æ·»åŠ ")])])])):p("",!0),gt.value?(r(),c("div",Ml,[o("div",Tl,[El,o("h3",Al,v(Ot.value),1)])])):p("",!0)]),Ue.value?(r(),c("div",{key:0,class:"modal-overlay",onClick:t[28]||(t[28]=m(n=>Ue.value=!1,["self"]))},[o("div",Dl,[zl,o("div",Ll,[Pl,O(o("input",{type:"text","onUpdate:modelValue":t[25]||(t[25]=n=>te.newWord=n),class:"modal-input-field"},null,512),[[ee,te.newWord]])]),o("div",Ol,[Wl,O(o("input",{type:"text","onUpdate:modelValue":t[26]||(t[26]=n=>te.newZh=n),class:"modal-input-field"},null,512),[[ee,te.newZh]])]),o("div",Nl,[o("button",{onClick:t[27]||(t[27]=n=>Ue.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),o("button",{onClick:To,class:"modal-btn",style:{background:"#3b82f6",color:"white"}},"ä¿å­˜ä¿®æ”¹")])])])):p("",!0),Me.value?(r(),c("div",{key:1,class:"modal-overlay",onClick:t[32]||(t[32]=m(n=>Me.value=!1,["self"]))},[o("div",Rl,[o("div",Ul,[Bl,o("div",Gl,[o("button",{class:$({active:Te.value==="week"}),onClick:t[29]||(t[29]=n=>Te.value="week")},"è¿‘7å¤©",2),o("button",{class:$({active:Te.value==="month"}),onClick:t[30]||(t[30]=n=>Te.value="month")},"è¿‘30å¤©",2)])]),o("div",Kl,[o("div",Vl,[o("div",jl,v(Math.round((((s=fe(z)[Re()])==null?void 0:s.duration)||0)/60)),1),Jl]),o("div",Fl,[o("div",Hl,v(((i=fe(z)[Re()])==null?void 0:i.learn)||0),1),Xl]),o("div",Zl,[o("div",Yl,v(((l=fe(z)[Re()])==null?void 0:l.review)||0),1),ql]),o("div",Ql,[o("div",ea,v(((d=fe(z)[Re()])==null?void 0:d.kill)||0),1),ta])]),o("div",oa,[o("canvas",{ref_key:"statsChartCanvas",ref:_t},null,512)]),o("button",{class:"modal-close",onClick:t[31]||(t[31]=n=>Me.value=!1),style:{"margin-top":"15px"}},"å…³é—­")])])):p("",!0),Ge.value?(r(),c("div",{key:2,class:"modal-overlay",onClick:t[37]||(t[37]=m(n=>Ge.value=!1,["self"]))},[o("div",sa,[o("div",na,[O(o("input",{id:"global-search-input",type:"text","onUpdate:modelValue":t[33]||(t[33]=n=>Le.value=n),onInput:Bo,onKeydown:[ge(m(Go,["prevent"]),["enter"]),t[34]||(t[34]=ge(m(n=>qt(-1),["prevent"]),["up"])),t[35]||(t[35]=ge(m(n=>qt(1),["prevent"]),["down"]))],placeholder:"è¾“å…¥è¯æ ¹ (æ”¯æŒé”®ç›˜ â†‘â†“ é€‰æ‹©)...",class:"modal-input-field search-input",autocomplete:"off"},null,40,la),[[ee,Le.value]]),o("button",{class:"modal-close-icon static-pos",onClick:t[36]||(t[36]=n=>Ge.value=!1)},"âœ•")]),o("div",aa,[Le.value?Z.value.length===0?(r(),c("div",ca,"æœªæ‰¾åˆ°åŒ¹é…å•è¯")):(r(!0),c(he,{key:2},we(Z.value,(n,u)=>(r(),c("div",{key:n.en,class:$(["search-item",{"clickable-item":!n.isCustom,selected:u===ie.value}]),onClick:a=>Ke(n),onMouseenter:a=>ie.value=u},[o("div",ua,[o("div",da,[V(v(n.en)+" ",1),o("span",{class:"speaker-small",onClick:m(a=>Ne(n.en),["stop"])},"ğŸ”Š",8,va)]),o("div",pa,v(n.zh),1)]),o("div",fa,[o("span",ha,v(n.source),1)])],42,ra))),128)):(r(),c("div",ia,"è¾“å…¥å­—æ¯æŸ¥æ‰¾åŒ…å«è¯¥è¯æ ¹çš„å•è¯"))])])])):p("",!0),je.value?(r(),c("div",{key:3,class:"modal-overlay",onClick:t[41]||(t[41]=m(n=>je.value=!1,["self"]))},[o("div",ga,[_a,o("div",ya,[ma,O(o("input",{type:"text","onUpdate:modelValue":t[38]||(t[38]=n=>ne.title=n),class:"modal-input-field",placeholder:"ä¾‹å¦‚ï¼šDiscover vs Invent åŒºåˆ«...",autocomplete:"off"},null,512),[[ee,ne.title]])]),o("div",ba,[ka,O(o("textarea",{"onUpdate:modelValue":t[39]||(t[39]=n=>ne.content=n),class:"modal-input-field",style:{flex:"1",resize:"none","line-height":"1.6","font-family":"sans-serif"},placeholder:"åœ¨è¿™é‡Œè®°å½•è¯¦ç»†çš„è¯ä¹‰è¾¨æã€åœºæ™¯ç”¨æ³•ç­‰..."},null,512),[[ee,ne.content]])]),o("div",xa,[o("button",{onClick:t[40]||(t[40]=n=>je.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),o("button",{onClick:qo,class:"modal-btn",style:{background:"#8b5cf6",color:"white"}},"ğŸ’¾ ä¿å­˜ç¬”è®°")])])])):p("",!0),Je.value?(r(),c("div",{key:4,class:"modal-overlay",onClick:t[43]||(t[43]=m(n=>Je.value=!1,["self"]))},[o("div",Ca,[o("div",wa,[o("h3",Sa,v(Pe.title||"æ— æ ‡é¢˜ç¬”è®°"),1),o("div",Ia,[o("button",{class:"icon-btn edit-switch-btn",onClick:Yo,title:"ä¿®æ”¹å†…å®¹"},"âœ"),o("button",{class:"icon-btn close-btn",onClick:t[42]||(t[42]=n=>Je.value=!1)},"âœ•")])]),o("div",{class:"read-content markdown-body",innerHTML:$t(Pe.content)},null,8,$a)])])):p("",!0),Ze.value?(r(),c("div",{key:5,class:"modal-overlay",onClick:t[50]||(t[50]=m(n=>Ze.value=!1,["self"]))},[o("div",Ma,[o("div",Ta,[o("h3",Ea,v(H.value?"âœï¸ ç¼–è¾‘æ¨¡å¼":"ğŸ“œ æœ¬é¡µåŠ©è®°æ–‡ç«  (Part "+(D.value+1)+")"),1),o("div",Aa,[H.value?(r(),c("button",{key:1,class:"icon-btn",onClick:t[45]||(t[45]=n=>H.value=!1),title:"é¢„è§ˆ"}," ğŸ‘ï¸ é¢„è§ˆ ")):(r(),c("button",{key:0,class:"icon-btn edit-switch-btn",onClick:t[44]||(t[44]=n=>H.value=!0),title:"ç¼–è¾‘å½“å‰æ–‡ç« "}," âœ ç¼–è¾‘ ")),o("button",{class:"icon-btn close-btn",onClick:t[46]||(t[46]=n=>Ze.value=!1)},"âœ•")])]),o("div",Da,[o("div",za,[La,o("div",Pa,[(r(!0),c(he,null,we(E.value,(n,u)=>(r(),c("div",{key:u,class:$(["sidebar-item",{active:me.value===u}]),onClick:a=>zt(u)},[Wa,o("span",Na,v(n.title||"æ— æ ‡é¢˜æ–‡ç« "),1)],10,Oa))),128))]),o("button",{class:"sidebar-add-btn",onClick:io}," + æ–°å¢æ–‡ç«  ")]),o("div",Ra,[H.value?(r(),c("div",Fa,[o("div",Ha,[O(o("input",{type:"text","onUpdate:modelValue":t[47]||(t[47]=n=>re.value.title=n),class:"modal-input-field",placeholder:"è¯·è¾“å…¥æ–‡ç« æ ‡é¢˜...",style:{"font-weight":"bold"}},null,512),[[ee,re.value.title]])]),o("div",Xa,[o("div",Za,[o("div",{class:"editor-toolbar"},[Ya,o("button",{class:"tiny-btn",onClick:uo},"ğŸ¤– å¤åˆ¶ AI Prompt"),o("button",{class:"tiny-btn delete-btn",onClick:co},"ğŸ—‘ï¸ åˆ é™¤æ­¤ç¯‡")]),O(o("textarea",{"onUpdate:modelValue":t[48]||(t[48]=n=>re.value.content=n),class:"modal-input-field",style:{flex:"1",resize:"none","margin-bottom":"0"},placeholder:"åœ¨æ­¤ç²˜è´´æ•…äº‹å†…å®¹..."},null,512),[[ee,re.value.content]])]),o("div",qa,[Qa,o("div",{class:"markdown-body",style:{padding:"10px","overflow-y":"auto",height:"100%"},innerHTML:$t(re.value.content)},null,8,ei)])])])):(r(),c("div",Ua,[o("h1",Ba,v(re.value.title),1),re.value.content?(r(),c("div",{key:0,innerHTML:$t(re.value.content)},null,8,Ga)):(r(),c("div",Ka,Ja))]))])]),H.value?(r(),c("div",ti,[o("button",{onClick:t[49]||(t[49]=n=>H.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),o("button",{onClick:ro,class:"modal-btn",style:{background:"#f59e0b",color:"white"}},"ğŸ’¾ ä¿å­˜å…¨éƒ¨æ›´æ”¹")])):p("",!0)])])):p("",!0),Fe.value?(r(),c("div",{key:6,class:"modal-overlay",onClick:t[54]||(t[54]=m(n=>Fe.value=!1,["self"]))},[o("div",oi,[si,ni,o("div",li,[ai,O(o("input",{type:"password","onUpdate:modelValue":t[51]||(t[51]=n=>U.token=n),class:"modal-input-field",placeholder:"ghp_xxxxxxxxxxxx..."},null,512),[[ee,U.token]])]),o("div",ii,[ci,O(o("input",{type:"text","onUpdate:modelValue":t[52]||(t[52]=n=>U.gistId=n),class:"modal-input-field",placeholder:"ä¾‹å¦‚: e5a3c..."},null,512),[[ee,U.gistId]])]),o("div",ri,[o("button",{onClick:t[53]||(t[53]=n=>Fe.value=!1),class:"modal-btn",style:{background:"#f3f4f6",color:"#6b7280"}},"å–æ¶ˆ"),o("button",{onClick:ts,class:"modal-btn",style:{background:"#a855f7",color:"white"}},"ğŸ’¾ ä¿å­˜é…ç½®")]),ui])])):p("",!0)],64)}}},_i=ns(pi,[["__scopeId","data-v-2d3967ef"]]);export{_i as default};
